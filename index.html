<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Relicord - Group Chat That’s All Fun & Games</title>
<meta content="Relicord is great for playing games and chilling with friends, or even building a worldwide community. Customize your own space to talk, play, and hang out." name="description"/><meta content="Relicord - Group Chat That’s All Fun & Games" property="og:title"/><meta content="Relicord is great for playing games and chilling with friends, or even building a worldwide community. Customize your own space to talk, play, and hang out." property="og:description"/><meta content="https://cdn.prod.website-files.com/6257adef93867e50d84d30e2/665643dd8c7ac752237b5cef_Discord-OG-1200x630.jpg" property="og:image"/><meta content="Relicord - Group Chat That’s All Fun & Games" property="twitter:title"/><meta content="Relicord is great for playing games and chilling with friends, or even building a worldwide community. Customize your own space to talk, play, and hang out." property="twitter:description"/><meta content="https://cdn.prod.website-files.com/6257adef93867e50d84d30e2/665643dd8c7ac752237b5cef_Discord-OG-1200x630.jpg" property="twitter:image"/><meta property="og:type" content="website"/><meta content="summary_large_image" name="twitter:card"/><meta content="width=device-width, initial-scale=1" name="viewport"/>
<link rel="icon" type="image/x-icon" href="data:image/jpeg;base64,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">
<!-- Tailwind CSS CDN -->
<script src="https://cdn.tailwindcss.com"></script>
<!-- Inter Font -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
/* Ensure html and body take full viewport height and width */
html, body {
height: 100%;
width: 100%;
margin: 0;
padding: 0;
}
body {
font-family: 'Inter', sans-serif;
background-color: #1a1a2e;
color: #e0e0e0;
display: flex;
justify-content: center;
align-items: center;
}
/* Custom scrollbar */
::-webkit-scrollbar {
width: 8px;
}
::-webkit-scrollbar-track {
background: #282840;
}
::-webkit-scrollbar-thumb {
background: #4a4a6e;
border-radius: 10px;
}
::-webkit-scrollbar-thumb:hover {
background: #5c5c8a;
}
.app-container {
display: flex;
width: 95%;
max-width: 1400px; /* Increased max-width for new sidebar */
height: 85vh; /* Increased height */
border-radius: 12px;
box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
overflow: hidden;
background-color: #24243e;
}
.sidebar {
width: 250px;
background-color: #1a1a2e;
padding: 20px;
display: flex;
flex-direction: column;
border-right: 1px solid #3a3a5e;
flex-shrink: 0;
}
.chat-container {
flex-grow: 1;
display: flex;
flex-direction: row; /* Changed for member list */
overflow: hidden;
}
.main-chat-column {
flex-grow: 1;
display: flex;
flex-direction: column;
overflow: hidden;
}
#chat-header {
border-bottom: 1px solid #3a3a5e;
}
#chat-header.no-right-border {
border-top-right-radius: 0;
}
#member-list-sidebar {
width: 240px;
background-color: #1a1a2e;
padding: 12px;
border-left: 1px solid #3a3a5e;
overflow-y: auto;
flex-shrink: 0;
}
.messages-area {
flex-grow: 1;
padding: 20px;
overflow-y: auto;
display: flex;
flex-direction: column;
gap: 16px; /* Increased gap for avatar spacing */
}
.message-input-area {
padding: 15px 20px;
border-top: 1px solid #3a3a5e;
display: flex;
flex-direction: column; /* Changed for reply bar */
gap: 10px;
background-color: #24243e;
position: relative;
}
/* New Join Channel Bar styles */
#join-channel-bar {
padding: 15px 20px;
border-top: 1px solid #3a3a5e;
background-color: #24243e;
text-align: center;
}
#join-channel-button {
width: 100%;
padding: 12px;
font-size: 1rem;
font-weight: 700;
background-color: #4CAF50;
color: white;
border: none;
border-radius: 8px;
cursor: pointer;
transition: background-color 0.2s ease;
}
#join-channel-button:hover {
background-color: #45a049;
}
/* ---- NEW MESSAGE STYLES ---- */
.message-wrapper {
position: relative;
padding: 2px 4px; /* Padding to make hover area larger */
border-radius: 8px;
transition: background-color 0.15s ease-in-out;
}
.message-wrapper:hover {
background-color: rgba(90, 14, 165, 0.15);
}
.message-wrapper:hover .message-actions {
opacity: 1;
}
.message-avatar-container {
width: 40px;
height: 40px;
flex-shrink: 0;
}
.message-content-wrapper {
display: flex;
flex-direction: column;
}
.message-header {
display: flex;
align-items: baseline;
gap: 8px;
margin-bottom: 4px;
}
.message-username {
font-weight: 700;
color: #ffcc00;
cursor: pointer;
}
.message-username:hover {
text-decoration: underline;
}
.message-timestamp {
font-size: 0.7rem;
color: #9a9aab;
}
.message-edited-indicator {
font-size: 0.65rem;
color: #8a8a9b;
margin-left: -4px;
}
.message-text-content {
font-size: 0.9rem;
color: #e0e0e0;
word-wrap: break-word;
line-height: 1.5;
}
.message-actions {
position: absolute;
top: -16px;
right: 12px;
display: flex;
gap: 4px;
background-color: #1a1a2e;
border: 1px solid #4a4a6e;
border-radius: 8px;
padding: 4px;
box-shadow: 0 2px 8px rgba(0,0,0,0.3);
opacity: 0;
transition: opacity 0.15s ease-in-out;
pointer-events: all;
}
.message-action-btn {
background: none;
border: none;
color: #9a9aab;
cursor: pointer;
padding: 4px;
border-radius: 4px;
transition: color 0.2s, background-color 0.2s;
}
.message-action-btn:hover {
color: #e0e0e0;
background-color: #3a3a5e;
}
.reply-context {
display: flex;
align-items: center;
font-size: 0.8rem;
color: #9a9aab;
margin-bottom: 4px;
padding-left: 8px;
border-left: 2px solid #4a4a6e;
}
.reply-context strong {
color: #ffcc00;
margin: 0 4px;
}
.reply-context span {
white-space: nowrap;
overflow: hidden;
text-overflow: ellipsis;
max-width: 250px;
}
/* ---- END NEW MESSAGE STYLES ---- */
#reply-input-bar {
background-color: #3a3a5e;
padding: 6px 12px;
border-radius: 8px;
font-size: 0.8rem;
display: flex;
justify-content: space-between;
align-items: center;
color: #c0c0d0;
}
.edit-message-input {
width: 100%;
padding: 8px;
border-radius: 6px;
background-color: #3a3a5e;
color: #e0e0e0;
border: 1px solid #6a11cb;
font-size: 0.9rem;
resize: none; /* Prevent manual resize */
overflow-y: hidden; /* Hide scrollbar initially */
}
.edit-message-input:focus {
outline: none;
}
.edit-actions-info {
font-size: 0.75rem;
color: #9a9aab;
margin-top: 4px;
}
.edit-actions-info a {
color: #3b82f6;
cursor: pointer;
}
.edit-actions-info a:hover {
text-decoration: underline;
}

.message-box {
position: fixed;
top: 20px;
right: 20px;
background-color: #4CAF50;
color: white;
padding: 15px 20px;
border-radius: 8px;
box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
z-index: 1001;
opacity: 0;
transition: opacity 0.3s ease-in-out;
}
.message-box.error {
background-color: #f44336;
}
.message-box.show {
opacity: 1;
}
.channel-item, .dm-item {
padding: 10px 12px;
border-radius: 8px;
cursor: pointer;
transition: background-color 0.2s ease, color 0.2s ease;
display: flex;
align-items: center;
gap: 8px;
position: relative;
}
.channel-item:hover, .dm-item:hover {
background-color: #3a3a5e;
color: #ffffff;
}
.channel-item.active, .dm-item.active {
background-color: #6a11cb;
color: #ffffff;
font-weight: 600;
}
#clips-nav-item.active {
background-color: #ffcc00;
color: #1a1a2e;
font-weight: 600;
}
#clips-nav-item.active:hover {
background-color: #e6b800;
}
#quests-nav-item.active {
background-color: #4CAF50;
color: #ffffff;
font-weight: 600;
}
#quests-nav-item.active:hover {
background-color: #45a049;
}
.channel-item.active:hover, .dm-item.active:hover {
background-color: #6a11cb;
}
.unread-badge {
position: absolute;
right: 12px;
top: 50%;
transform: translateY(-50%);
background-color: #f44336;
color: white;
width: 20px;
height: 20px;
border-radius: 9999px;
display: flex;
align-items: center;
justify-content: center;
font-size: 0.75rem;
font-weight: 700;
line-height: 1;
}
.channel-icon, .dm-icon {
width: 20px;
height: 20px;
fill: currentColor;
}
.channel-section-title {
color: #9a9aab;
font-weight: 500;
margin-bottom: 8px;
margin-top: 15px;
font-size: 0.85rem;
text-transform: uppercase;
letter-spacing: 0.05em;
}
.friend-request-item {
padding: 8px 12px;
border-radius: 8px;
background-color: #3a3a5e;
margin-bottom: 8px;
display: flex;
flex-direction: column;
gap: 6px;
}
.friend-request-header {
display: flex;
align-items: center;
gap: 8px;
font-size: 0.85rem;
}
.friend-request-actions {
display: flex;
gap: 6px;
}
.friend-request-btn {
padding: 4px 8px;
border-radius: 4px;
font-size: 0.75rem;
font-weight: 500;
cursor: pointer;
transition: background-color 0.2s ease;
border: none;
}
.friend-request-btn.accept {
background-color: #4CAF50;
color: white;
}
.friend-request-btn.accept:hover {
background-color: #45a049;
}
.friend-request-btn.decline {
background-color: #f44336;
color: white;
}
.friend-request-btn.decline:hover {
background-color: #da190b;
}
.add-friend-section {
margin-top: 10px;
padding: 10px;
background-color: #24243e;
border-radius: 8px;
border: 1px solid #3a3a5e;
}
.add-friend-input {
width: 100%;
padding: 8px;
border-radius: 6px;
background-color: #3a3a5e;
color: #e0e0e0;
border: 1px solid #4a4a6e;
font-size: 0.85rem;
margin-bottom: 8px;
}
.add-friend-input:focus {
outline: none;
border-color: #6a11cb;
}
.add-friend-btn {
width: 100%;
padding: 8px;
border-radius: 6px;
background-color: #6a11cb;
color: white;
border: none;
font-size: 0.85rem;
font-weight: 500;
cursor: pointer;
transition: background-color 0.2s ease;
}
.add-friend-btn:hover {
background-color: #5a0ea5;
}
.add-friend-btn:disabled {
background-color: #4a4a6e;
cursor: not-allowed;
}
.modal-backdrop {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background-color: rgba(0, 0, 0, 0.7);
backdrop-filter: blur(5px);
display: flex;
justify-content: center;
align-items: center;
z-index: 1000;
}
.modal-backdrop.hidden {
display: none;
}
.input-action-btn {
background-color: transparent;
border: none;
padding: 8px;
cursor: pointer;
color: #9a9aab;
transition: color 0.2s ease;
border-radius: 50%;
}
.input-action-btn:hover {
color: #e0e0e0;
background-color: #3a3a5e;
}
#emoji-picker.hidden {
display: none;
}
#emoji-picker {
position: absolute;
bottom: 70px;
left: 10px;
background-color: #1a1a2e;
border: 1px solid #3a3a5e;
border-radius: 8px;
padding: 10px;
display: grid;
grid-template-columns: repeat(8, 1fr);
gap: 5px;
box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
z-index: 1002;
max-height: 300px;
overflow-y: auto;
}
.emoji {
cursor: pointer;
padding: 5px;
border-radius: 4px;
font-size: 1.2rem;
text-align: center;
transition: background-color 0.2s ease;
}
.emoji:hover {
background-color: #3a3a5e;
}
.message-image {
max-width: 300px;
max-height: 250px;
border-radius: 12px;
margin-top: 8px;
cursor: pointer;
transition: opacity 0.3s;
}
.message-image:hover {
opacity: 0.8;
}
.mention {
background-color: #3b82f6;
color: #ffffff;
font-weight: 500;
padding: 2px 6px;
border-radius: 6px;
}
#upload-status {
position: absolute;
bottom: 75px;
left: 50%;
transform: translateX(-50%);
background-color: rgba(0,0,0,0.7);
color: white;
padding: 5px 10px;
border-radius: 6px;
font-size: 0.8rem;
}
/* ---- AVATAR SYSTEM STYLES ---- */
.avatar-container {
position: relative;
width: 100%;
height: 100%;
}
.avatar-container .avatar-image {
width: 100%;
height: 100%;
border-radius: 50%;
background-color: #3a3a5e;
background-size: cover;
background-position: center;
}
.avatar-container .avatar-decoration-overlay {
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
pointer-events: none;
}
/* ---- STATUS INDICATOR STYLES ---- */
.status-indicator {
position: absolute;
bottom: 0;
right: 0;
border-radius: 50%;
border: 2px solid #1a1a2e; /* Same as sidebar/member list bg */
box-sizing: content-box;
background-clip: content-box;
}
.avatar-container .status-indicator { width: 25%; height: 25%; }
#user-profile-avatar-container .status-indicator { width: 20px; height: 20px; border-width: 4px; border-color: #1a1a2e;}
.status-online { background-color: #3ba55d; }
.status-offline { background-color: #747f8d; }
.status-idle { background-color: #faa61a; }

.status-dnd { background-color: #ed4245; }
/* Profile View Modal Styles */
#user-profile-modal-card {
background-color: #1a1a2e;
border-radius: 12px;
overflow: hidden;
width: 340px;
box-shadow: 0 8px 30px rgba(0,0,0,0.5);
}
#user-profile-banner {
height: 120px;
background-color: #6a11cb;
background-size: cover;
background-position: center;
}
#user-profile-content {
padding: 12px;
padding-top: 60px; /* space for the avatar */
position: relative;
}
#user-profile-avatar-container {
position: absolute;
top: -48px;
left: 16px;
width: 96px;
height: 96px;
}
#user-profile-avatar-container .avatar-image {
border: 4px solid #1a1a2e;
}
/* Settings Modal Styles */
#settings-avatar-preview-container {
width: 100px;
height: 100px;
margin-bottom: 10px;
}
#settings-banner-preview {
width: 100%;
height: 120px;
border-radius: 8px;
background-color: #3a3a5e;
background-size: cover;
background-position: center;
margin-bottom: 10px;
}
.decoration-item {
display: flex;
align-items: center;
gap: 16px;
background-color: #3a3a5e;
padding: 12px;
border-radius: 8px;
}
.decoration-preview-container {
width: 60px;
height: 60px;
flex-shrink: 0;
}
.decoration-info {
flex-grow: 1;
}
.decoration-info h5 {
font-weight: 600;
color: #e0e0e0;
}
.decoration-info p {
font-size: 0.8rem;
color: #9a9aab;
}
.decoration-action-btn {
padding: 6px 12px;
border-radius: 6px;
font-weight: 500;
cursor: pointer;
border: none;
transition: background-color 0.2s;
}
.decoration-action-btn.claim {
background-color: #4CAF50;
color: white;
}
.decoration-action-btn.claim:hover {
background-color: #45a049;
}
.decoration-action-btn.equip {
background-color: #6a11cb;
color: white;
}
.decoration-action-btn.equip:hover {
background-color: #5a0ea5;
}
.decoration-action-btn:disabled {
background-color: #4a4a6e;
color: #9a9aab;
cursor: not-allowed;
}
/* Clips Section Styles */
#clips-container {
background-color: #1a1a2e;
}
.clip-card {
background-color: #24243e;
border-radius: 12px;
overflow: hidden;
border: 1px solid #3a3a5e;
box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}
.clip-video-placeholder {
width: 100%;
padding-top: 56.25%; /* 16:9 Aspect Ratio */
background-color: #000;
position: relative;
display: flex;
justify-content: center;
align-items: center;
color: #9a9aab;
font-size: 1.5rem;
}
.clip-video-placeholder iframe {
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
border: 0;
}
.clip-content {
padding: 16px;
}
.clip-header {
display: flex;
align-items: flex-start;
gap: 12px;
}
.clip-uploader-avatar-container {
width: 48px;
height: 48px;
flex-shrink: 0;
}
.clip-title-meta {
flex-grow: 1;
}
.clip-title {
font-size: 1.1rem;
font-weight: 600;
color: #e0e0e0;
margin-bottom: 4px;
}
.clip-uploader-name {
font-size: 0.85rem;
color: #9a9aab;
}
.clip-uploader-name:hover {
color: #ffcc00;
text-decoration: underline;
cursor: pointer;
}
.clip-comments-section {
border-top: 1px solid #3a3a5e;
margin-top: 16px;
padding-top: 16px;
}
.comment {
display: flex;
gap: 10px;
margin-bottom: 12px;
}
.comment-avatar-container {
width: 32px;
height: 32px;
flex-shrink: 0;
}
.comment-content {
flex-grow: 1;
}
.comment-username {
font-weight: 600;
font-size: 0.8rem;
color: #ffcc00;
margin-right: 6px;
}
.comment-text {
font-size: 0.9rem;
color: #e0e0e0;
}
.comment-form {
display: flex;
gap: 10px;
margin-top: 16px;
}
.comment-input {
flex-grow: 1;
padding: 8px 12px;
border-radius: 18px;
background-color: #3a3a5e;
color: #e0e0e0;
border: 1px solid #4a4a6e;
font-size: 0.85rem;
}
.comment-input:focus {
outline: none;
border-color: #ffcc00;
}
.comment-submit-btn {
background-color: #ffcc00;
color: #1a1a2e;
border: none;
padding: 0 16px;
border-radius: 18px;
font-weight: 600;
cursor: pointer;
transition: background-color 0.2s ease;
}
.comment-submit-btn:hover {
background-color: #e6b800;
}
.clip-report-btn {
background: none;
border: none;
padding: 4px;
cursor: pointer;
border-radius: 50%;
line-height: 0;
transition: background-color 0.2s ease;
}
.clip-report-btn:hover {
background-color: #3a3a5e;
}
.clip-report-btn svg {
color: #9a9aab;
transition: color 0.2s ease;
}
.clip-report-btn:hover svg {
color: #e0e0e0;
}
.clip-report-btn:disabled {
cursor: not-allowed;
opacity: 0.5;
}
/* ---- Custom Video Player Styles ---- */
.custom-video-player {
position: absolute;
top: 0; left: 0;
width: 100%; height: 100%;
background-color: #000;
display: flex;
justify-content: center;
align-items: center;
}
.video-player-element {
width: 100%;
height: 100%;
object-fit: contain;
cursor: pointer;
}
.video-controls-container {
position: absolute;
bottom: 0;
left: 0;
right: 0;
background: linear-gradient(to top, rgba(0,0,0,0.7), transparent);
padding: 10px;
display: flex;
align-items: center;
gap: 12px;
z-index: 2;
opacity: 0;
visibility: hidden;
transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
color: white;
}
.custom-video-player:hover .video-controls-container,
.custom-video-player.playing:not(:hover) .video-controls-container.persistent {
opacity: 1;
visibility: visible;
}
.play-pause-btn, .volume-btn, .fullscreen-btn {
background: none; border: none; cursor: pointer; padding: 0; line-height: 0;
}
.play-pause-btn .icon, .volume-btn .icon, .fullscreen-btn .icon {
width: 24px; height: 24px; fill: white;
}
.play-pause-btn .pause-icon { display: none; }
.custom-video-player.playing .play-pause-btn .play-icon { display: none; }
.custom-video-player.playing .play-pause-btn .pause-icon { display: block; }
.time-container {
font-size: 0.8rem;
font-family: 'Inter', sans-serif;
white-space: nowrap;
}
.progress-range {
flex-grow: 1;
height: 8px;
background-color: rgba(255, 255, 255, 0.3);
border-radius: 4px;
cursor: pointer;
}
.progress-bar {
height: 100%;
width: 0;
background-color: #ffcc00;
border-radius: 4px;
}
.volume-container {
display: flex;
align-items: center;
}
.volume-range {
width: 70px;
height: 6px;
background-color: rgba(255, 255, 255, 0.3);
border-radius: 3px;
cursor: pointer;
position: relative;
margin-left: 8px;
}
.volume-bar {
position: absolute;
left: 0;
top: 0;
height: 100%;
width: 100%;
background-color: white;
border-radius: 3px;
}
/* New Member List & Server Settings Styles */
.role-group-title {
color: #9a9aab;
font-weight: 600;
margin-bottom: 8px;
margin-top: 15px;
font-size: 0.85rem;
text-transform: uppercase;
}
.member-item {
display: flex;
align-items: center;
gap: 12px;
padding: 8px;
border-radius: 6px;
cursor: pointer;
transition: background-color 0.2s;
}
.member-item:hover {
background-color: #3a3a5e;
}
.member-avatar-container {
width: 32px;
height: 32px;
flex-shrink: 0;
}
.member-username {
font-weight: 500;
font-size: 0.9rem;
white-space: nowrap;
overflow: hidden;
text-overflow: ellipsis;
}
.role-management-item {
display: flex;
justify-content: space-between;
align-items: center;
padding: 8px;
border-radius: 6px;
background-color: #3a3a5e;
}
.role-select {
background-color: #4a4a6e;
color: #e0e0e0;
border: 1px solid #5c5c8a;
border-radius: 6px;
padding: 4px 8px;
font-size: 0.8rem;
-webkit-appearance: none;
-moz-appearance: none;
appearance: none;
background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
background-repeat: no-repeat;
background-position: right 0.5rem center;
background-size: 1em;
padding-right: 2rem;
}
.role-select:focus {
outline: none;
border-color: #6a11cb;
}
.delete-role-btn {
background: none;
border: none;
font-size: 1.5rem;
line-height: 1;
padding: 0 8px;
cursor: pointer;
font-weight: bold;
}
/* ---- Quests Styles ---- */
#quests-container {
background-color: #1a1a2e;
}
.quest-card {
background-color: #24243e;
border-radius: 12px;
padding: 20px;
border: 1px solid #3a3a5e;
box-shadow: 0 4px 12px rgba(0,0,0,0.2);
display: flex;
flex-direction: column;
gap: 12px;
}
.quest-title {
font-size: 1.2rem;
font-weight: 600;
color: #e0e0e0;
}
.quest-description {
font-size: 0.9rem;
color: #9a9aab;
}
.quest-progress-container {
width: 100%;
background-color: #1a1a2e;
border-radius: 8px;
height: 20px;
position: relative;
overflow: hidden;
}
.quest-progress-bar {
height: 100%;
background-color: #4CAF50;
border-radius: 8px;
transition: width 0.3s ease-in-out;
}
.quest-progress-text {
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
display: flex;
align-items: center;
justify-content: center;
color: white;
font-weight: 600;
font-size: 0.8rem;
text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
}
.quest-action-btn {
padding: 10px 16px;
border-radius: 8px;
font-weight: 700;
cursor: pointer;
border: none;
transition: background-color 0.2s;
align-self: flex-start;
}
.quest-action-btn.claim {
background-color: #ffcc00;
color: #1a1a2e;
}
.quest-action-btn.claim:hover {
background-color: #e6b800;
}
.quest-action-btn:disabled {
background-color: #4a4a6e;
color: #9a9aab;
cursor: not-allowed;
}
/* --- NEW EMOJI AUTOCOMPLETE STYLES --- */
#emoji-autocomplete-container {
position: absolute;
bottom: 75px; /* Position above the input bar */
left: 20px;
right: 20px;
background-color: #1a1a2e;
border: 1px solid #4a4a6e;
border-radius: 8px;
box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.4);
max-height: 250px;
overflow-y: auto;
z-index: 1003;
}
.emoji-suggestion-item {
display: flex;
align-items: center;
gap: 12px;
padding: 8px 12px;
cursor: pointer;
font-size: 0.9rem;
transition: background-color 0.1s ease-in-out;
}
.emoji-suggestion-item.selected, .emoji-suggestion-item:hover {
background-color: #3a3a5e;
}
.emoji-suggestion-item .emoji-char {
font-size: 1.5rem;
width: 24px;
text-align: center;
}
.emoji-suggestion-item .emoji-name {
color: #e0e0e0;
font-weight: 500;
}
.emoji-suggestion-item .emoji-name strong {
color: #ffcc00; /* Highlight the matched part */
font-weight: 600;
}
.emoji-picker-category-title {
color: #9a9aab;
font-weight: 600;
font-size: 0.8rem;
padding: 8px 6px 4px 6px;
text-transform: uppercase;
position: sticky;
top: -10px;
background-color: #1a1a2e;
grid-column: 1 / -1; /* Span all columns */
}
/* ---- Posts Styles ---- */
#posts-nav-item.active {
background-color: #3b82f6; /* A blue color for Posts */
color: #ffffff;
font-weight: 600;
}
#posts-nav-item.active:hover {
background-color: #2563eb;
}
#posts-container {
background-color: #1a1a2e;
}
.post-card {
background-color: #24243e;
border-radius: 12px;
padding: 20px;
border: 1px solid #3a3a5e;
box-shadow: 0 4px 12px rgba(0,0,0,0.2);
display: flex;
gap: 16px;
}
.post-avatar-container {
width: 48px;
height: 48px;
flex-shrink: 0;
}
.post-main-content {
flex-grow: 1;
display: flex;
flex-direction: column;
gap: 8px;
}
.post-header {
display: flex;
align-items: baseline;
gap: 8px;
}
.post-username {
font-weight: 700;
color: #ffcc00;
cursor: pointer;
}
.post-username:hover {
text-decoration: underline;
}
.post-timestamp {
font-size: 0.8rem;
color: #9a9aab;
}
.post-body {
font-size: 0.95rem;
color: #e0e0e0;
white-space: normal; /* This collapses whitespace to the default behavior */
word-wrap: break-word;
}
.post-actions {
display: flex;
gap: 20px;
margin-top: 12px;
}
.post-action-btn {
background: none;
border: none;
color: #9a9aab;
cursor: pointer;
display: flex;
align-items: center;
gap: 6px;
font-size: 0.85rem;
font-weight: 500;
padding: 4px;
border-radius: 6px;
transition: color 0.2s ease, background-color 0.2s ease;
}
.post-action-btn svg {
width: 20px;
height: 20px;
}
.post-action-btn.like:hover {
color: #f44336; /* Red on hover for like */
}
.post-action-btn.heart:hover {
color: #e91e63; /* Pink on hover for heart */
}
.post-action-btn.active.like {
color: #f44336;
}
.post-action-btn.active.heart {
color: #e91e63;
}
/* ---- RelicTok Nav Item ---- */
#relictok-nav-item.active {
background-color: #ff0050; /* A vibrant pink/red for RelicTok */
color: #ffffff;
font-weight: 600;
}
#relictok-nav-item.active:hover {
background-color: #cc0040;
}

/* ---- RelicTok Container & Feed ---- */
#relictok-container {
background-color: #000; /* TikTok-style black background */
flex-direction: column;
width: 100%;
height: 100%;
}
#relictok-feed {
display: flex;
flex-direction: column;
align-items: center;
gap: 30px; /* Space between videos */
padding: 20px 0;
height: 100%;
overflow-y: auto;
/* This creates the snap-scrolling effect */
scroll-snap-type: y mandatory;
}
.relictok-video-card {
width: 100%;
max-width: 400px; /* Typical vertical video width */
height: 95%;
max-height: 800px;
background-color: #111;
border-radius: 12px;
position: relative;
display: flex;
justify-content: center;
align-items: center;
overflow: hidden;
scroll-snap-align: center; /* Snap this item to the center of the viewport */
border: 1px solid #3a3a5e;
}

/* ---- RelicTok Video Player ---- */
.relictok-video-wrapper {
width: 100%;
height: 100%;
position: relative;
}
.relictok-video-element {
width: 100%;
height: 100%;
object-fit: cover; /* Cover the container, might crop a little */
border-radius: 12px;
cursor: pointer;
}

/* ---- RelicTok UI Overlay ---- */
.relictok-overlay {
position: absolute;
bottom: 0;
left: 0;
right: 0;
padding: 16px;
background: linear-gradient(to top, rgba(0,0,0,0.6), transparent);
color: #fff;
display: flex;
justify-content: space-between;
align-items: flex-end;
}
.relictok-info {
flex-grow: 1;
}
.relictok-username {
font-weight: 700;
font-size: 1rem;
cursor: pointer;
}
.relictok-username:hover {
text-decoration: underline;
}
.relictok-caption {
font-size: 0.9rem;
margin-top: 4px;
word-wrap: break-word;
}
.relictok-sidebar {
display: flex;
flex-direction: column;
gap: 20px;
align-items: center;
}
.relictok-action-btn {
background: none;
border: none;
color: #fff;
cursor: pointer;
display: flex;
flex-direction: column;
align-items: center;
gap: 4px;
font-size: 0.8rem;
font-weight: 500;
transition: transform 0.2s ease, color 0.2s ease;
}
.relictok-action-btn:hover {
transform: scale(1.1);
}
.relictok-action-btn svg {
width: 32px;
height: 32px;
}
.relictok-action-btn.active.like {
color: #f44336;
}
.relictok-action-btn.active.heart {
color: #e91e63;
}
.relictok-uploader-avatar {
width: 48px;
height: 48px;
border: 2px solid #fff;
border-radius: 50%;
background-size: cover;
background-position: center;
}

/* ---- RelicTok User Profile Modal ---- */
#relictok-user-profile-modal-card {
background-color: #1a1a2e;
border-radius: 12px;
overflow: hidden;
width: 360px;
box-shadow: 0 8px 30px rgba(0,0,0,0.5);
}
#relictok-profile-banner {
height: 120px;
background-color: #ff0050;
background-size: cover;
background-position: center;
}
#relictok-profile-avatar-container {
position: absolute;
top: -48px;
left: 16px;
width: 96px;
height: 96px;
}
#relictok-profile-follow-btn {
padding: 6px 16px;
border-radius: 8px;
font-weight: 700;
cursor: pointer;
border: none;
transition: background-color 0.2s;
}
#relictok-profile-follow-btn.following {
background-color: #4a4a6e;
color: #e0e0e0;
}
#relictok-profile-follow-btn.following:hover {
background-color: #f44336; /* Red on hover to indicate unfollow */
}
</style>
</head>
<body>
<div class="app-container">
<!-- Sidebar -->
<div class="sidebar">
<h2 class="text-lg font-bold text-e0e0e0 mb-4">Relicord</h2>
<div id="clips-nav-item" class="channel-item mb-2">
<svg class="channel-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M4 6.47L10.55 3l1.1 1.63L5.1 8.1 4 6.47zm16 0L13.45 3l-1.1 1.63L18.9 8.1 20 6.47zM12 10.5c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM2 12c0-2.61 1.67-4.83 4-5.65V4.26C2.52 5.17 0 8.29 0 12s2.52 6.83 6 7.74v-2.09c-2.33-.82-4-3.04-4-5.65zm14 0c0 2.61-1.67 4.83-4 5.65v2.09c3.48-.91 6-4.03 6-7.74s-2.52-6.83-6-7.74v2.09c2.33.82 4 3.04 4 5.65z"></path></svg>
<span>Clips</span>
</div>
<div id="quests-nav-item" class="channel-item mb-2">
<svg class="channel-icon" xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" viewBox="0 0 24 24" fill="currentColor"><g><rect fill="none" height="24" width="24"></rect></g><g><g><path d="M12,2C6.48,2,2,6.48,2,12s4.48,10,10,10s10-4.48,10-10S17.52,2,12,2z M12,20c-4.41,0-8-3.59-8-8s3.59-8,8-8s8,3.59,8,8 S16.41,20,12,20z M12.5,8v6.25l5,2.9L16.55,18L11,14.25V8H12.5z"></path></g></g></svg>
<span>Quests</span>
</div>
<div id="posts-nav-item" class="channel-item mb-2">
<svg class="channel-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12zM7 9h10v2H7zm0 4h7v2H7z"></path></svg>
<span>Posts</span>
</div>
<div class="channel-section-title">Channels</div>
<div id="channels-list" class="flex-grow overflow-y-auto mb-4">
<div id="loading-channels" class="text-center text-9a9aab text-sm">Loading channels...</div>
</div>
<button id="create-channel-btn" class="bg-[#4CAF50] hover:bg-[#45a049] text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200">
+ Create New Channel
</button>
<div class="channel-section-title mt-6">Direct Messages</div>
<div id="dm-list" class="flex-grow overflow-y-auto mb-4">
<div id="loading-dms" class="text-center text-9a9aab text-sm">No DMs yet.</div>
</div>
<div class="add-friend-section">
<div class="text-xs text-9a9aab mb-2 uppercase font-medium">Add Friend</div>
<input type="text" id="add-friend-input" class="add-friend-input" placeholder="Enter username">
<button id="add-friend-btn" class="add-friend-btn">Send Friend Request</button>
</div>
<div class="channel-section-title mt-4">Friend Requests</div>
<div id="friend-requests-list" class="overflow-y-auto mb-4 max-h-32">
<div id="loading-friend-requests" class="text-center text-9a9aab text-sm">No pending requests.</div>
</div>
</div>
<!-- Main Chat Area -->
<div class="chat-container">
<div class="main-chat-column">
<!-- Header -->
<div id="chat-header" class="bg-[#1a1a2e] p-4 rounded-tr-xl shadow-md flex justify-between items-center">
<div class="flex items-center gap-3">
<h1 class="text-xl font-bold text-e0e0e0" id="current-chat-name">Select a Channel or DM</h1>
<button id="server-settings-btn" class="hidden text-gray-400 hover:text-white transition-colors" title="Channel Settings">
<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0 3.35a1.724 1.724 0 001.066 2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
</button>
</div>
<div class="text-xs text-9a9aab flex items-center gap-2">
Your User ID: <span id="user-id-display" class="font-mono text-white">Loading...</span>
<button id="settings-btn" class="text-gray-400 hover:text-white transition-colors" title="User Settings">
<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0 3.35a1.724 1.724 0 001.066 2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
</button>
</div>
</div>
<!-- Messages Area -->
<div id="messages-area" class="messages-area">
<div id="loading-messages" class="text-center text-9a9aab">Loading messages...</div>
</div>
<!-- Join Channel Bar -->
<div id="join-channel-bar" class="hidden">
<button id="join-channel-button">Join Channel to Chat</button>
</div>
<!-- Message Input Area -->
<div id="message-input-area" class="message-input-area">
<div id="emoji-autocomplete-container" class="hidden"></div>
<div id="reply-input-bar" class="hidden"></div>
<div class="flex w-full gap-2 items-center">
<div id="emoji-picker" class="hidden"></div>
<div id="upload-status" class="hidden"></div>
<input type="file" id="image-upload-input" class="hidden" accept="image/*">
<button id="image-upload-btn" class="input-action-btn">
<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"></path></svg>
</button>
<button id="emoji-btn" class="input-action-btn">
<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
</button>
<input
type="text"
id="message-input"
placeholder="Type your message..."
class="flex-grow p-3 rounded-lg bg-[#3a3a5e] text-e0e0e0 focus:outline-none focus:ring-2 focus:ring-[#6a11cb] placeholder-[#9a9aab]"
autocomplete="off"
>
<button id="send-button" class="bg-[#6a11cb] hover:bg-[#5a0ea5] text-white font-bold py-3 px-6 rounded-lg transition-colors duration-200 flex items-center justify-center">
<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
<path d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l.684-.275a1 1 0 00.57-1.425L9.5 8.618V3a1 1 0 012 0v5.618l5.315 10.533a1 1 0 00.57 1.425l.684.275a1 1 0 001.169-1.409l-7-14z"></path>
</svg>
</button>
</div>
</div>
</div>
<!-- Member List Sidebar -->
<div id="member-list-sidebar" class="hidden">
<div id="channel-description-area" class="mb-4 p-3 bg-[#24243e] rounded-lg text-sm text-[#9a9aab] hidden"></div>
<div id="member-list-content">
<!-- Member list will be populated here -->
</div>
</div>
</div>
<!-- Clips Area (hidden by default) -->
<div id="clips-container" class="hidden flex flex-col">
<!-- Clips Header -->
<div class="bg-[#1a1a2e] p-4 rounded-tr-xl shadow-md flex justify-between items-center gap-4">
<h1 class="text-xl font-bold text-e0e0e0">Clips</h1>
<div class="flex items-center gap-2">
<button id="rules-btn" class="bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
Posting Rules
</button>
<button id="upload-clip-btn" class="bg-[#ffcc00] hover:bg-[#e6b800] text-[#1a1a2e] font-bold py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
Post Clip
</button>
</div>
</div>
<!-- Clips Feed -->
<div id="clips-feed" class="flex-grow p-6 overflow-y-auto space-y-8">
<div id="loading-clips" class="text-center text-9a9aab">Loading clips...</div>
</div>
</div>
<!-- Quests Area (hidden by default) -->
<div id="quests-container" class="hidden flex flex-col">
<!-- Quests Header -->
<div class="bg-[#1a1a2e] p-4 rounded-tr-xl shadow-md flex justify-between items-center gap-4">
<h1 class="text-xl font-bold text-e0e0e0">Quests</h1>
<div id="quests-timer-display" class="text-sm text-9a9aab"></div>
</div>
<!-- Quests Feed -->
<div id="quests-feed" class="flex-grow p-6 overflow-y-auto space-y-6">
<div id="loading-quests" class="text-center text-9a9aab">Loading quests...</div>
</div>
</div>
<!-- Posts Area (hidden by default) -->
<div id="posts-container" class="hidden flex flex-col">
<!-- Posts Header -->
<div class="bg-[#1a1a2e] p-4 rounded-tr-xl shadow-md flex justify-between items-center gap-4">
<h1 class="text-xl font-bold text-e0e0e0">Posts</h1>
<button id="create-post-btn" class="bg-[#3b82f6] hover:bg-[#2563eb] text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
Create Post
</button>
</div>
<!-- Posts Feed -->
<div id="posts-feed" class="flex-grow p-6 overflow-y-auto space-y-6">
<div id="loading-posts" class="text-center text-9a9aab">No posts yet. Be the first to share something!</div>
</div>
</div>
</div>

<!-- Modals (All hidden by default) -->
<div id="message-box" class="message-box hidden"></div>
<div id="create-channel-modal" class="modal-backdrop hidden">
<div class="bg-[#24243e] p-8 rounded-xl shadow-2xl w-11/12 md:w-1/3 relative">
<button id="close-channel-modal-btn" class="absolute top-4 right-4 text-9a9aab hover:text-e0e0e0 transition-colors duration-200">
<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
</button>
<h2 class="text-2xl font-bold text-e0e0e0 mb-6 text-center">Create New Channel</h2>
<form id="create-channel-form">
<div class="mb-4">
<label for="new-channel-name" class="block text-9a9aab text-sm font-medium mb-1">Channel Name</label>
<input type="text" id="new-channel-name" class="w-full p-3 rounded-lg bg-[#3a3a5e] text-e0e0e0 focus:outline-none focus:ring-2 focus:ring-[#6a11cb] placeholder-[#9a9aab]" placeholder="e.g., general-chat" required>
</div>
<div class="mb-4">
<label class="flex items-center text-9a9aab cursor-pointer">
<input type="checkbox" id="make-private-checkbox" class="form-checkbox h-5 w-5 text-[#6a11cb] bg-[#3a3a5e] border-[#4a4a6e] rounded focus:ring-[#6a11cb]">
<span class="ml-2 text-sm">Make this channel private (require password)?</span>
</label>
</div>
<div id="channel-password-container" class="hidden mb-6">
<label for="new-channel-password" class="block text-9a9aab text-sm font-medium mb-1">Channel Password</label>
<input type="text" id="new-channel-password" class="w-full p-3 rounded-lg bg-[#3a3a5e] text-e0e0e0 focus:outline-none focus:ring-2 focus:ring-[#6a11cb] placeholder-[#9a9aab]" placeholder="Password to join">
</div>
<button type="submit" class="w-full bg-[#6a11cb] hover:bg-[#5a0ea5] text-white font-bold py-3 rounded-lg transition-colors duration-200">Create Channel</button>
</form>
</div>
</div>
<div id="username-modal" class="modal-backdrop hidden">
<div class="bg-[#24243e] p-8 rounded-xl shadow-2xl w-11/12 md:w-1/3 relative text-center">
<h2 class="text-2xl font-bold text-e0e0e0 mb-6">Choose Your Username</h2>
<p class="text-9a9aab mb-4">This username will identify you in chat and DMs.</p>
<form id="username-form" class="space-y-4">
<div>
<input type="text" id="username-input" class="w-full p-3 rounded-lg bg-[#3a3a5e] text-e0e0e0 focus:outline-none focus:ring-2 focus:ring-[#6a11cb] placeholder-[#9a9aab]" placeholder="Enter your unique username" required minlength="3" maxlength="20">
</div>
<button type="submit" class="w-full bg-[#4CAF50] hover:bg-[#45a049] text-white font-bold py-3 rounded-lg transition-colors duration-200">Set Username</button>
<p id="username-error" class="text-red-400 text-sm mt-2 hidden"></p>
</form>
</div>
</div>
<!-- User Settings Modal -->
<div id="user-settings-modal" class="modal-backdrop hidden">
<div class="bg-[#24243e] p-8 rounded-xl shadow-2xl w-11/12 md:w-1/2 relative max-h-[90vh] overflow-y-auto">
<button id="close-settings-modal-btn" class="absolute top-4 right-4 text-9a9aab hover:text-e0e0e0 transition-colors duration-200">
<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
</button>
<h2 class="text-2xl font-bold text-e0e0e0 mb-6 text-center">User Profile Settings</h2>
<div class="mb-6 border-b border-[#3a3a5e] pb-6">
<label class="block text-9a9aab text-sm font-medium mb-3">Set Your Status</label>
<div id="status-selection-container" class="flex justify-around items-center"></div>
</div>
<form id="user-settings-form">
<div class="mb-4">
<label class="block text-9a9aab text-sm font-medium mb-2">Profile Picture (Avatar)</label>
<div id="settings-avatar-preview-container"></div>
<input type="file" id="settings-avatar-input" class="hidden" accept="image/*,image/gif">
<button type="button" class="text-sm bg-[#4a4a6e] hover:bg-[#5c5c8a] px-3 py-1 rounded-md">Change Avatar</button>
</div>
<div class="mb-4">
<label class="block text-9a9aab text-sm font-medium mb-2">Profile Banner</label>
<div id="settings-banner-preview" class="settings-banner-preview"></div>
<input type="file" id="settings-banner-input" class="hidden" accept="image/*,image/gif">
<button type="button" class="text-sm bg-[#4a4a6e] hover:bg-[#5c5c8a] px-3 py-1 rounded-md">Change Banner</button>
</div>
<div class="mb-6">
<label for="settings-description-input" class="block text-9a9aab text-sm font-medium mb-1">About Me</label>
<textarea id="settings-description-input" rows="3" class="w-full p-3 rounded-lg bg-[#3a3a5e] text-e0e0e0 focus:outline-none focus:ring-2 focus:ring-[#6a11cb] placeholder-[#9a9aab]" placeholder="Tell everyone a little about yourself..."></textarea>
</div>
<div class="mb-6 border-t border-b border-[#3a3a5e] py-6">
<label for="settings-username-input" class="block text-9a9aab text-sm font-medium mb-1">Change Username</label>
<div class="flex items-center gap-2">
<input type="text" id="settings-username-input" class="flex-grow p-3 rounded-lg bg-[#3a3a5e] text-e0e0e0 focus:outline-none focus:ring-2 focus:ring-[#6a11cb] placeholder-[#9a9aab]" placeholder="New username" minlength="3" maxlength="20">
<button type="button" id="settings-username-btn" class="bg-[#4a4a6e] hover:bg-[#5c5c8a] text-white font-bold py-3 px-4 rounded-lg transition-colors duration-200 disabled:bg-gray-700 disabled:cursor-not-allowed">Change Username</button>
</div>
<p id="username-change-status" class="text-xs text-9a9aab mt-2"></p>
</div>
<button type="submit" class="w-full bg-[#4CAF50] hover:bg-[#45a049] text-white font-bold py-3 rounded-lg transition-colors duration-200 mb-6">Save Profile Stuff (not user)</button>
</form>
<hr class="border-t border-[#3a3a5e] my-6">
<div id="settings-perks-section">
<h3 class="text-xl font-bold text-e0e0e0 mb-4 text-center">Relicord Perks</h3>
<div id="perks-status-container" class="text-center"></div>
</div>
<hr class="border-t border-[#3a3a5e] my-6">
<div id="settings-decorations-section">
<h3 class="text-xl font-bold text-e0e0e0 mb-4 text-center">Avatar Decoration</h3>
<div id="decorations-list-container" class="space-y-3"></div>
</div>
</div>
</div>
<!-- User Profile View Modal -->
<div id="user-profile-modal" class="modal-backdrop hidden">
<div id="user-profile-modal-card">
<div id="user-profile-banner"></div>
<div id="user-profile-content">
<div id="user-profile-avatar-container"></div>
<div class="flex items-center gap-2">
<h3 id="user-profile-username" class="text-xl font-bold text-white"></h3>
<style>
/* Custom CSS for the tooltip */
.tooltip-container {
position: relative;
display: inline-block; /* Essential for the tooltip positioning relative to this container */
}

.tooltip-text {
visibility: hidden;
opacity: 0;
width: auto; /* Adjust based on content */
background-color: #333; /* Dark background for the tooltip */
color: #fff; /* White text */
text-align: center;
border-radius: 6px;
padding: 4px 8px; /* Padding inside the tooltip */
position: absolute;
z-index: 100; /* Ensure tooltip is above other content */
right: 110%; /* Position to the right of the badge */
top: 50%;
transform: translateY(-50%); /* Vertically center the tooltip */
white-space: nowrap; /* Keep text on one line */
transition: opacity 0.3s, visibility 0.3s; /* Smooth transition */
font-size: 0.75rem; /* Smaller font size, equivalent to Tailwind's text-xs */
}

/* Show the tooltip text when hovering over the container */
.tooltip-container:hover .tooltip-text {
visibility: visible;
opacity: 1;
}

/* Optional: Add a small arrow to the tooltip */
.tooltip-text::after {
content: "";
position: absolute;
top: 50%;
left: -5px; /* Position the arrow on the left side of the tooltip */
margin-top: -5px; /* Vertically center the arrow */
border-width: 5px;
border-style: solid;
border-color: transparent #333 transparent transparent; /* Arrow pointing left */
}
</style>

<span id="user-profile-perks-plus-badge" class="relative hidden text-xs font-bold px-2 py-1 rounded-full group" style="background-color: transparent !important;">
<img src="data:image/jpeg;base64,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PkrY9J2uccOuymMkWfe/NsL0n2753mScZP7XaE3/aVzr45RGDlLKuWmaSZNz+ueklJtJ0zQ5p/QfI+mRy0vg/gNTOWXV/yAp5Zybppk0Of0zUs7NpGmaJueUZqFSbibz5jX6R5OayWSyyiqrrDJ/MklJ/2iazJ83aXL691vlBCqmD7WDN+jfP+VmMm/eJOmf2UwmSSmt8A+mybx5kyan2aSUc9PotlffcOt7P+ARj3vK8175xvd85LNHfOEbR33rWz865ifH/PCbR33xiEM++Yn3veUVz3nyYx76gPtus9Hquu2myTn9+yS9hGrTjzp82fpK/z4p56bRba+64VY77fqgR+z7tBe99h0f+J+DPvWZww//+lFHfenwI474zCc/9ZH/fvMrXvDUxz3qwbvtsMV683XbTZNzmhFKKaeVrHSy+W5PeuX7PvOVo3/71/OvXsL/fSy59oK//ua7R3zsna94yh6bZ93OlFP611v7bPcnuPpDav7lUsppJSudt+UDn7bfOw46/Du/+ut5V9085f+63HLZWSf+4ttHfPzd+z1h100b3c6UU5rZSbmZJK00zdv8kft/7DsnnHXJdcu4nVGm02nbtmXldcWy8radTttqbufy6y4589ivf3C/R285P2ulaTLJ6V+o0VscQV9qV1++vfK/UMqTiVaeV73n4/b/6LdPOGvBjVNub5TptF2x/INt206n01LN7Vx63cVnnvDtj73usVut0mjlk0mTZm7yZJ5WXHPz++7z2kN/fdm0cpsu07YtpUbYxvyzbeyIqKW0bVvNbcb02hO/+NZ9d9psTa04b5LTv0bSJue44L4E3PKxlP5FUjOZaMV1t7zvE95y2LHXt8FturZtW0qNCNuYf66xHVFrKW3bFnObMb35lG+87xm7bLW2VmwmTZqZSSlJ0rx7PnK/T/7iEm7bUWuEbWP+lW1sO6LWMLd94a8+/drH7zBPklJK/wJZb6c1/ampceMOSv93KSWteJf7PeWtXz7uKm7bUWuEbWPzL2xsR0StYW77mj98/s1P2+1ukpRSSjMuqcla6Yb7vudbx16yFKCWGuGVY/59bbzyiFoMUC859sgDHruRVpqb9H+iTa6JivsT7MoX9X+bm6SVbv+sD33/L1eyYi01wivH/PsarzyilsqKC08/5mPP3kYrTU2eUcmTLCnfZeunfeyka5ayYtuW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" alt="Verified badge" class="h-5 w-5 inline-block align-text-top">

<span id="verified-tooltip" class="
absolute
left-[calc(100%+8px)] top-1/2 -translate-y-1/2
bg-gray-800 text-white text-xs px-2 py-1 rounded shadow-md
whitespace-nowrap
opacity-0 invisible
transition-opacity duration-300 z-50
">
Verified
</span>
</span>

<script>
document.addEventListener('DOMContentLoaded', () => {
const badgeContainer = document.getElementById('user-profile-perks-plus-badge');
const tooltip = document.getElementById('verified-tooltip');

if (badgeContainer && tooltip) {
// Show tooltip on hover
badgeContainer.addEventListener('mouseenter', () => {
tooltip.classList.remove('invisible', 'opacity-0');
tooltip.classList.add('visible', 'opacity-100');
});

// Hide tooltip when not hovering
badgeContainer.addEventListener('mouseleave', () => {
tooltip.classList.remove('visible', 'opacity-100');
tooltip.classList.add('invisible', 'opacity-0');
});
}
});
</script>
<span id="user-profile-perks-badge" class="hidden text-xs font-bold bg-pink-500 text-white px-2 py-1 rounded-full">Perk Member</span>
</div>
<hr class="border-t border-[#3a3a5e] my-4">
<div class="text-left">
<h4 class="text-xs text-9a9aab font-bold uppercase mb-2">About Me</h4>
<p id="user-profile-description" class="text-sm text-e0e0e0 whitespace-pre-wrap break-words">No description set.</p>
</div>
<button id="user-profile-dm-btn" class="mt-6 w-full bg-[#6a11cb] hover:bg-[#5a0ea5] text-white font-bold py-2 rounded-lg transition-colors duration-200">Send Message</button>
</div>
</div>
</div>
<!-- Server Settings Modal -->
<div id="server-settings-modal" class="modal-backdrop hidden">
<div class="bg-[#24243e] p-8 rounded-xl shadow-2xl w-11/12 md:w-1/2 relative max-h-[90vh] overflow-y-auto">
<button id="close-server-settings-modal-btn" class="absolute top-4 right-4 text-9a9aab hover:text-e0e0e0 transition-colors duration-200">
<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
</button>
<h2 class="text-2xl font-bold text-e0e0e0 mb-6 text-center">Channel Settings</h2>
<form id="server-settings-form">
<div class="mb-4">
<label for="server-settings-name" class="block text-9a9aab text-sm font-medium mb-1">Channel Name</label>
<input type="text" id="server-settings-name" class="w-full p-3 rounded-lg bg-[#3a3a5e] text-e0e0e0 focus:outline-none focus:ring-2 focus:ring-[#6a11cb]" required>
</div>
<div class="mb-6">
<label for="server-settings-description" class="block text-9a9aab text-sm font-medium mb-1">Channel Description</label>
<textarea id="server-settings-description" rows="3" class="w-full p-3 rounded-lg bg-[#3a3a5e] text-e0e0e0 focus:outline-none focus:ring-2 focus:ring-[#6a11cb]" placeholder="Let people know what this channel is about."></textarea>
</div>
<div class="mb-6">
<label class="block text-9a9aab text-sm font-medium mb-1">Channel Logo</label>
<div class="p-3 rounded-lg bg-[#3a3a5e] text-center text-[#9a9aab]">Coming Soon!</div>
</div>
<button type="submit" class="w-full bg-[#4CAF50] hover:bg-[#45a049] text-white font-bold py-3 rounded-lg transition-colors duration-200 mb-6">Save Changes</button>
</form>
<hr class="border-t border-[#3a3a5e] my-6">
<div id="server-roles-section">
<h3 class="text-xl font-bold text-e0e0e0 mb-4 text-center">Manage Roles</h3>
<div class="mb-6 p-4 bg-[#3a3a5e] rounded-lg">
<h4 class="text-lg font-semibold text-e0e0e0 mb-3">Create Role</h4>
<div class="flex items-center gap-4">
<input type="text" id="new-role-name" placeholder="New role name" class="flex-grow p-2 rounded-lg bg-[#24243e] text-e0e0e0 border border-[#4a4a6e] focus:outline-none focus:ring-2 focus:ring-[#6a11cb]">
<input type="color" id="new-role-color" value="#888888" class="p-1 h-10 w-10 block bg-[#24243e] border border-[#4a4a6e] rounded-lg cursor-pointer">
<button id="create-role-btn" class="bg-[#4CAF50] hover:bg-[#45a049] text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200">Create</button>
</div>
</div>
<div id="custom-roles-list" class="space-y-2 mb-6"></div>
<hr class="border-t border-[#4a4a6e] my-4">
<div id="server-members-list" class="space-y-2"></div>
</div>
</div>
</div>
<!-- Upload Clip Modal -->
<div id="upload-clip-modal" class="modal-backdrop hidden">
<div class="bg-[#24243e] p-8 rounded-xl shadow-2xl w-11/12 md:w-1/2 relative">
<button id="close-upload-modal-btn" class="absolute top-4 right-4 text-9a9aab hover:text-e0e0e0 transition-colors duration-200">
<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
</button>
<h2 class="text-2xl font-bold text-e0e0e0 mb-6 text-center">Post New Clip</h2>
<form id="upload-clip-form">
<div class="mb-4">
<label for="new-clip-title" class="block text-9a9aab text-sm font-medium mb-1">Clip Title</label>
<input type="text" id="new-clip-title" class="w-full p-3 rounded-lg bg-[#3a3a5e] text-e0e0e0 focus:outline-none focus:ring-2 focus:ring-[#ffcc00] placeholder-[#9a9aab]" placeholder="e.g., Awesome gameplay moment" required>
</div>
<div class="mb-4">
<label class="block text-9a9aab text-sm font-medium mb-2">Upload Method</label>
<div class="flex gap-4">
<label class="flex items-center text-e0e0e0 cursor-pointer">
<input type="radio" name="upload-type" value="url" class="form-radio h-4 w-4 text-[#ffcc00] bg-[#3a3a5e] border-[#4a4a6e] focus:ring-[#ffcc00]" checked>
<span class="ml-2">Video URL</span>
</label>
<label class="flex items-center text-e0e0e0 cursor-pointer">
<input type="radio" name="upload-type" value="file" class="form-radio h-4 w-4 text-[#ffcc00] bg-[#3a3a5e] border-[#4a4a6e] focus:ring-[#ffcc00]">
<span class="ml-2">Upload File</span>
</label>
</div>
</div>
<div id="url-upload-section" class="mb-6">
<label for="new-clip-url" class="block text-9a9aab text-sm font-medium mb-1">YouTube Video URL</label>
<input type="url" id="new-clip-url" class="w-full p-3 rounded-lg bg-[#3a3a5e] text-e0e0e0 focus:outline-none focus:ring-2 focus:ring-[#ffcc00] placeholder-[#9a9aab]" placeholder="e.g., https://www.youtube.com/watch?v=...">
</div>
<div id="file-upload-section" class="mb-6 hidden">
<label for="new-clip-file" class="block text-9a9aab text-sm font-medium mb-1">Video File</label>
<input type="file" id="new-clip-file" accept="video/mp4,video/webm" class="w-full text-sm text-e0e0e0 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-violet-50 file:text-violet-700 hover:file:bg-violet-100">
<p class="text-xs text-9a9aab mt-2">Larger files may cause lag for viewers. Recommended under 10MB.</p>
</div>
<button type="submit" id="post-clip-submit-btn" class="w-full bg-[#ffcc00] hover:bg-[#e6b800] text-[#1a1a2e] font-bold py-3 rounded-lg transition-colors duration-200">Post Clip</button>
</form>
</div>
</div>
<!-- Create Post Modal -->
<div id="create-post-modal" class="modal-backdrop hidden">
<div class="bg-[#24243e] p-8 rounded-xl shadow-2xl w-11/12 md:w-1/2 relative">
<button id="close-post-modal-btn" class="absolute top-4 right-4 text-9a9aab hover:text-e0e0e0 transition-colors duration-200">
<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
</button>
<h2 class="text-2xl font-bold text-e0e0e0 mb-6 text-center">Create a New Post</h2>
<form id="create-post-form">
<div class="mb-4">
<label for="new-post-content" class="block text-9a9aab text-sm font-medium mb-1">What's on your mind?</label>
<textarea id="new-post-content" rows="4" class="w-full p-3 rounded-lg bg-[#3a3a5e] text-e0e0e0 focus:outline-none focus:ring-2 focus:ring-[#6a11cb] placeholder-[#9a9aab]" placeholder="Share your thoughts with the community..." required maxlength="280"></textarea>
<p id="post-char-count" class="text-right text-xs text-9a9aab mt-1">0 / 280</p>
</div>
<button type="submit" class="w-full bg-[#3b82f6] hover:bg-[#2563eb] text-white font-bold py-3 rounded-lg transition-colors duration-200">Post</button>
</form>
</div>
</div>
<!-- Rules Modal -->
<div id="rules-modal" class="modal-backdrop hidden">
<div class="bg-[#24243e] p-8 rounded-xl shadow-2xl w-11/12 md:w-1/2 relative">
<button id="close-rules-modal-btn" class="absolute top-4 right-4 text-9a9aab hover:text-e0e0e0 transition-colors duration-200">
<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
</button>
<h2 class="text-2xl font-bold text-e0e0e0 mb-4 text-center">Clips Posting Rules</h2>
<div class="text-9a9aab space-y-3">
<p>To ensure our community remains a fun and safe place for everyone, please adhere to the following rules when posting clips:</p>
<ul class="list-disc list-inside space-y-2 pl-2">
<li><strong class="text-e0e0e0">Videos Only:</strong> All clips must be videos NOT images.</li>
<li><strong class="text-e0e0e0">No Hate Speech or Harassment:</strong> Content that promotes violence, incites hatred, or harasses individuals or groups is strictly forbidden.</li>
<li><strong class="text-e0e0e0">No Explicit or NSFW Content:</strong> All clips and comments must be safe for work and general audiences.</li>
<li><strong class="text-e0e0e0">Respect Copyright:</strong> Only post content you have the right to share. Give credit where it's due.</li>
<li><strong class="text-e0e0e0">No Spam or Self-Promotion:</strong> Do not spam the feed with repetitive content or excessive self-promotion.</li>
</ul>
<p class="pt-2">Violations may result in content removal or other moderation actions. Thank you for helping us build a great community!</p>
</div>
</div>
</div>
<!-- Report Clip Modal -->
<div id="report-clip-modal" class="modal-backdrop hidden">
<div class="bg-[#24243e] p-8 rounded-xl shadow-2xl w-11/12 md:w-1/3 relative">
<button id="close-report-modal-btn" class="absolute top-4 right-4 text-9a9aab hover:text-e0e0e0 transition-colors duration-200">
<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
</button>
<h2 class="text-2xl font-bold text-e0e0e0 mb-6 text-center">Report Clip</h2>
<form id="report-clip-form">
<div class="mb-4">
<label for="report-category" class="block text-9a9aab text-sm font-medium mb-1">Reason for Reporting</label>
<select id="report-category" class="w-full p-3 rounded-lg bg-[#3a3a5e] text-e0e0e0 focus:outline-none focus:ring-2 focus:ring-[#6a11cb]" required>
<option value="" disabled selected>Select a category...</option>
<option value="NSFW Content">NSFW Content</option>
<option value="Illegal Content">Illegal Content</option>
<option value="Drug Use or Promotion">Drug Use or Promotion</option>
<option value="Hate Speech or Harassment">Hate Speech or Harassment</option>
<option value="Spam or Misleading">Spam or Misleading</option>
<option value="Copyright Infringement">Copyright Infringement</option>
<option value="Other">Other (please specify below)</option>
</select>
</div>
<div class="mb-6">
<label for="report-details" class="block text-9a9aab text-sm font-medium mb-1">Additional Details (Optional)</label>
<textarea id="report-details" rows="3" class="w-full p-3 rounded-lg bg-[#3a3a5e] text-e0e0e0 focus:outline-none focus:ring-2 focus:ring-[#6a11cb]" placeholder="Provide more information if necessary..."></textarea>
</div>
<button type="submit" class="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 rounded-lg transition-colors duration-200">Submit Report</button>
</form>
</div>
</div>
<!-- Admin Button -->
<button id="admin-clear-btn" class="fixed bottom-5 right-5 bg-red-800 hover:bg-red-700 text-white font-bold p-3 rounded-full shadow-lg transition-lg z-50" title="Admin Tools">
<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
</button>
<script type="module">
// Firebase imports
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
import { getFirestore, collection, query, orderBy, onSnapshot, addDoc, serverTimestamp, doc, setDoc, getDoc, getDocs, where, deleteDoc, increment, arrayUnion, updateDoc, deleteField, runTransaction, arrayRemove } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
import { getDatabase, ref, onValue, set, onDisconnect, get } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-database.js";

// Global Firebase variables
let app;
let db;
let rtdb; // Realtime Database for presence
let auth;
let userId = 'anonymous';
let username = null;
let currentChatId = null;
let currentChatType = null;
let currentChatName = null;
let isCurrentUserMember = false;
const unlockedPrivateChannels = new Set();
const BANNED_USER_ID = 'xsmd8X9q7gNxAYuduRgEF5PDl2p1'; // The ID to be prohibited.
let replyingToMessage = null; // For the new reply feature
let editingMessageId = null; // For the new edit feature

// User-provided Firebase config
const customFirebaseConfig = {
apiKey: "AIzaSyBQHMSvtgLqGMDLoCinG7HKfzBinmwYSr0",
authDomain: "fir-booths.firebaseapp.com",
databaseURL: "https://fir-booths-default-rtdb.firebaseio.com",
projectId: "fir-booths",
storageBucket: "fir-booths.appspot.com",
messagingSenderId: "345582300995",
appId: "1:345582300995:web:522594ddbadcf678acc9f6",
measurementId: "G-48KGZ412Y9"
};

// Config setup
const firebaseConfig = customFirebaseConfig.projectId ? customFirebaseConfig : (typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {});
const appId = firebaseConfig.projectId || (typeof __app_id !== 'undefined' ? __app_id : 'default-app-id');
const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

// Decoration Info
const DECORATIONS = {
'mirage_twilight': { name: 'Mirage Twilight', url: 'https://cdn.jsdelivr.net/gh/itspi3141/discord-fake-avatar-decorations@main/public/decorations/mirage_twilight.png', description: 'Believe it, and you will see it.' },
'izuku_midoriya': { name: 'Izuku Midoriya', url: 'https://cdn.jsdelivr.net/gh/itspi3141/discord-fake-avatar-decorations@main/public/decorations/izuku_midoriya.png', description: 'Quirk: One For All' },
'tomura_shigaraki': { name: 'Tomura Shigaraki', url: 'https://cdn.jsdelivr.net/gh/itspi3141/discord-fake-avatar-decorations@main/public/decorations/tomura_shigaraki.png', description: 'Quirk: Decay' },
'lightsabers_blue_and_red': { name: 'Lightsabers (Blue and Red)', url: 'https://cdn.jsdelivr.net/gh/itspi3141/discord-fake-avatar-decorations@main/public/decorations/lightsabers_blue_and_red.png', description: 'What side do you stand on?' },
'cybernetic': { name: 'Cybernetic', url: 'https://cdn.jsdelivr.net/gh/itspi3141/discord-fake-avatar-decorations@main/public/decorations/cybernetic.png', description: 'Cybernetic visuals now online. Welcome aboard, runner.' }
};

const ROLES = {
owner: { name: 'Owner', order: 1, color: '#ffcc00' },
moderator: { name: 'Moderator', order: 2, color: '#3b82f6' },
member: { name: 'Member', order: 3, color: '#e0e0e0' }
};

// --- NEW EMOJI DATA AND LOGIC ---
const EMOJI_DATA = [
// Smileys & Emotion
{ shortcode: "grinning", unicode: "😀", category: "Smileys & People" }, { shortcode: "smiley", unicode: "😃", category: "Smileys & People" }, { shortcode: "smile", unicode: "😄", category: "Smileys & People" }, { shortcode: "grin", unicode: "😁", category: "Smileys & People" }, { shortcode: "laughing", unicode: "😆", category: "Smileys & People" }, { shortcode: "sweat_smile", unicode: "😅", category: "Smileys & People" }, { shortcode: "rofl", unicode: "🤣", category: "Smileys & People" }, { shortcode: "joy", unicode: "😂", category: "Smileys & People" }, { shortcode: "slightly_smiling_face", unicode: "🙂", category: "Smileys & People" }, { shortcode: "upside_down_face", unicode: "🙃", category: "Smileys & People" }, { shortcode: "wink", unicode: "😉", category: "Smileys & People" }, { shortcode: "blush", unicode: "😊", category: "Smileys & People" }, { shortcode: "innocent", unicode: "😇", category: "Smileys & People" }, { shortcode: "smiling_face_with_three_hearts", unicode: "🥰", category: "Smileys & People" }, { shortcode: "heart_eyes", unicode: "😍", category: "Smileys & People" }, { shortcode: "star_struck", unicode: "🤩", category: "Smileys & People" }, { shortcode: "kissing_heart", unicode: "😘", category: "Smileys & People" }, { shortcode: "kissing", unicode: "😗", category: "Smileys & People" }, { shortcode: "relaxed", unicode: "☺️", category: "Smileys & People" }, { shortcode: "kissing_closed_eyes", unicode: "😚", category: "Smileys & People" }, { shortcode: "kissing_smiling_eyes", unicode: "😙", category: "Smileys & People" }, { shortcode: "yum", unicode: "😋", category: "Smileys & People" }, { shortcode: "stuck_out_tongue", unicode: "😛", category: "Smileys & People" }, { shortcode: "stuck_out_tongue_winking_eye", unicode: "😜", category: "Smileys & People" }, { shortcode: "zany_face", unicode: "🤪", category: "Smileys & People" }, { shortcode: "stuck_out_tongue_closed_eyes", unicode: "😝", category: "Smileys & People" }, { shortcode: "money_mouth_face", unicode: "🤑", category: "Smileys & People" }, { shortcode: "hugs", unicode: "🤗", category: "Smileys & People" }, { shortcode: "hand_over_mouth", unicode: "🤭", category: "Smileys & People" }, { shortcode: "shushing_face", unicode: "🤫", category: "Smileys & People" }, { shortcode: "thinking", unicode: "🤔", category: "Smileys & People" }, { shortcode: "zip_it_face", unicode: "🤐", category: "Smileys & People" }, { shortcode: "raised_eyebrow", unicode: "🤨", category: "Smileys & People" }, { shortcode: "neutral_face", unicode: "😐", category: "Smileys & People" }, { shortcode: "expressionless", unicode: "😑", category: "Smileys & People" }, { shortcode: "no_mouth", unicode: "😶", category: "Smileys & People" }, { shortcode: "smirk", unicode: "😏", category: "Smileys & People" }, { shortcode: "unamused", unicode: "😒", category: "Smileys & People" }, { shortcode: "roll_eyes", unicode: "🙄", category: "Smileys & People" }, { shortcode: "grimacing", unicode: "😬", category: "Smileys & People" }, { shortcode: "lying_face", unicode: "🤥", category: "Smileys & People" }, { shortcode: "relieved", unicode: "😌", category: "Smileys & People" }, { shortcode: "pensive", unicode: "😔", category: "Smileys & People" }, { shortcode: "sleepy", unicode: "😪", category: "Smileys & People" }, { shortcode: "drooling_face", unicode: "🤤", category: "Smileys & People" }, { shortcode: "sleeping", unicode: "😴", category: "Smileys & People" }, { shortcode: "mask", unicode: "😷", category: "Smileys & People" }, { shortcode: "face_with_thermometer", unicode: "🤒", category: "Smileys & People" }, { shortcode: "face_with_head_bandage", unicode: "🤕", category: "Smileys & People" }, { shortcode: "nauseated_face", unicode: "🤢", category: "Smileys & People" }, { shortcode: "vomiting_face", unicode: "🤮", category: "Smileys & People" }, { shortcode: "sneezing_face", unicode: "🤧", category: "Smileys & People" }, { shortcode: "hot_face", unicode: "🥵", category: "Smileys & People" }, { shortcode: "cold_face", unicode: "🥶", category: "Smileys & People" }, { shortcode: "woozy_face", unicode: "🥴", category: "Smileys & People" }, { shortcode: "dizzy_face", unicode: "😵", category: "Smileys & People" }, { shortcode: "exploding_head", unicode: "🤯", category: "Smileys & People" }, { shortcode: "cowboy_hat_face", unicode: "🤠", category: "Smileys & People" }, { shortcode: "partying_face", unicode: "🥳", category: "Smileys & People" }, { shortcode: "sunglasses", unicode: "😎", category: "Smileys & People" }, { shortcode: "nerd_face", unicode: "🤓", category: "Smileys & People" }, { shortcode: "monocle_face", unicode: "🧐", category: "Smileys & People" }, { shortcode: "confused", unicode: "😕", category: "Smileys & People" }, { shortcode: "worried", unicode: "😟", category: "Smileys & People" }, { shortcode: "slightly_frowning_face", unicode: "🙁", category: "Smileys & People" }, { shortcode: "frowning_face", unicode: "☹️", category: "Smileys & People" }, { shortcode: "open_mouth", unicode: "😮", category: "Smileys & People" }, { shortcode: "hushed", unicode: "😯", category: "Smileys & People" }, { shortcode: "astonished", unicode: "😲", category: "Smileys & People" }, { shortcode: "flushed", unicode: "😳", category: "Smileys & People" }, { shortcode: "pleading_face", unicode: "🥺", category: "Smileys & People" }, { shortcode: "frowning", unicode: "😦", category: "Smileys & People" }, { shortcode: "anguished", unicode: "😧", category: "Smileys & People" }, { shortcode: "fearful", unicode: "😨", category: "Smileys & People" }, { shortcode: "cold_sweat", unicode: "😰", category: "Smileys & People" }, { shortcode: "disappointed_relieved", unicode: "😥", category: "Smileys & People" }, { shortcode: "cry", unicode: "😢", category: "Smileys & People" }, { shortcode: "sob", unicode: "😭", category: "Smileys & People" }, { shortcode: "scream", unicode: "😱", category: "Smileys & People" }, { shortcode: "confounded", unicode: "😖", category: "Smileys & People" }, { shortcode: "persevere", unicode: "😣", category: "Smileys & People" }, { shortcode: "disappointed", unicode: "😞", category: "Smileys & People" }, { shortcode: "sweat", unicode: "😓", category: "Smileys & People" }, { shortcode: "weary", unicode: "😩", category: "Smileys & People" }, { shortcode: "tired_face", unicode: "😫", category: "Smileys & People" }, { shortcode: "yawning_face", unicode: "🥱", category: "Smileys & People" }, { shortcode: "triumph", unicode: "😤", category: "Smileys & People" }, { shortcode: "pout", unicode: "😡", category: "Smileys & People" }, { shortcode: "angry", unicode: "😠", category: "Smileys & People" }, { shortcode: "cursing_face", unicode: "🤬", category: "Smileys & People" }, { shortcode: "face_with_symbols_on_mouth", unicode: "🤬", category: "Smileys & People" }, { shortcode: "smiling_imp", unicode: "😈", category: "Smileys & People" }, { shortcode: "imp", unicode: "👿", category: "Smileys & People" }, { shortcode: "skull", unicode: "💀", category: "Smileys & People" }, { shortcode: "skull_and_crossbones", unicode: "☠️", category: "Smileys & People" }, { shortcode: "hankey", unicode: "💩", category: "Smileys & People" }, { shortcode: "poop", unicode: "💩", category: "Smileys & People" }, { shortcode: "clown_face", unicode: "🤡", category: "Smileys & People" }, { shortcode: "japanese_ogre", unicode: "👹", category: "Smileys & People" }, { shortcode: "japanese_goblin", unicode: "👺", category: "Smileys & People" }, { shortcode: "ghost", unicode: "👻", category: "Smileys & People" }, { shortcode: "alien", unicode: "👽", category: "Smileys & People" }, { shortcode: "space_invader", unicode: "👾", category: "Smileys & People" }, { shortcode: "robot", unicode: "🤖", category: "Smileys & People" },
// People & Body
{ shortcode: "wave", unicode: "👋", category: "People & Body" }, { shortcode: "raised_back_of_hand", unicode: "🤚", category: "People & Body" }, { shortcode: "hand_with_fingers_splayed", unicode: "🖐️", category: "People & Body" }, { shortcode: "raised_hand", unicode: "✋", category: "People & Body" }, { shortcode: "vulcan_salute", unicode: "🖖", category: "People & Body" }, { shortcode: "ok_hand", unicode: "👌", category: "People & Body" }, { shortcode: "pinching_hand", unicode: "🤏", category: "People & Body" }, { shortcode: "v", unicode: "✌️", category: "People & Body" }, { shortcode: "crossed_fingers", unicode: "🤞", category: "People & Body" }, { shortcode: "love_you_gesture", unicode: "🤟", category: "People & Body" }, { shortcode: "metal", unicode: "🤘", category: "People & Body" }, { shortcode: "call_me_hand", unicode: "🤙", category: "People & Body" }, { shortcode: "point_left", unicode: "👈", category: "People & Body" }, { shortcode: "point_right", unicode: "👉", category: "People & Body" }, { shortcode: "point_up_2", unicode: "👆", category: "People & Body" }, { shortcode: "middle_finger", unicode: "🖕", category: "People & Body" }, { shortcode: "fu", unicode: "🖕", category: "People & Body" }, { shortcode: "point_down", unicode: "👇", category: "People & Body" }, { shortcode: "point_up", unicode: "☝️", category: "People & Body" }, { shortcode: "thumbsup", unicode: "👍", category: "People & Body" }, { shortcode: "+1", unicode: "👍", category: "People & Body" }, { shortcode: "thumbsdown", unicode: "👎", category: "People & Body" }, { shortcode: "-1", unicode: "👎", category: "People & Body" }, { shortcode: "raised_fist", unicode: "✊", category: "People & Body" }, { shortcode: "fist", unicode: "👊", category: "People & Body" }, { shortcode: "left_facing_fist", unicode: "🤛", category: "People & Body" }, { shortcode: "right_facing_fist", unicode: "🤜", category: "People & Body" }, { shortcode: "clap", unicode: "👏", category: "People & Body" }, { shortcode: "raised_hands", unicode: "🙌", category: "People & Body" }, { shortcode: "open_hands", unicode: "👐", category: "People & Body" }, { shortcode: "palms_up_together", unicode: "🤲", category: "People & Body" }, { shortcode: "handshake", unicode: "🤝", category: "People & Body" }, { shortcode: "pray", unicode: "🙏", category: "People & Body" }, { shortcode: "writing_hand", unicode: "✍️", category: "People & Body" }, { shortcode: "nail_care", unicode: "💅", category: "People & Body" }, { shortcode: "selfie", unicode: "🤳", category: "People & Body" }, { shortcode: "muscle", unicode: "💪", category: "People & Body" }, { shortcode: "mechanical_arm", unicode: "🦾", category: "People & Body" }, { shortcode: "mechanical_leg", unicode: "🦿", category: "People & Body" }, { shortcode: "leg", unicode: "🦵", category: "People & Body" }, { shortcode: "foot", unicode: "🦶", category: "People & Body" }, { shortcode: "ear", unicode: "👂", category: "People & Body" }, { shortcode: "ear_with_hearing_aid", unicode: "🦻", category: "People & Body" }, { shortcode: "nose", unicode: "👃", category: "People & Body" }, { shortcode: "brain", unicode: "🧠", category: "People & Body" }, { shortcode: "tooth", unicode: "🦷", category: "People & Body" }, { shortcode: "bone", unicode: "🦴", category: "People & Body" }, { shortcode: "eyes", unicode: "👀", category: "People & Body" }, { shortcode: "eye", unicode: "👁️", category: "People & Body" }, { shortcode: "tongue", unicode: "👅", category: "People & Body" }, { shortcode: "mouth", unicode: "👄", category: "People & Body" }, { shortcode: "baby", unicode: "👶", category: "People & Body" }, { shortcode: "child", unicode: "🧒", category: "People & Body" }, { shortcode: "boy", unicode: "👦", category: "People & Body" }, { shortcode: "girl", unicode: "👧", category: "People & Body" },
// Animals & Nature
{ shortcode: "dog", unicode: "🐶", category: "Animals & Nature" }, { shortcode: "cat", unicode: "🐱", category: "Animals & Nature" }, { shortcode: "mouse", unicode: "🐭", category: "Animals & Nature" }, { shortcode: "hamster", unicode: "🐹", category: "Animals & Nature" }, { shortcode: "rabbit", unicode: "🐰", category: "Animals & Nature" }, { shortcode: "fox_face", unicode: "🦊", category: "Animals & Nature" }, { shortcode: "bear", unicode: "🐻", category: "Animals & Nature" }, { shortcode: "panda_face", unicode: "🐼", category: "Animals & Nature" }, { shortcode: "koala", unicode: "🐨", category: "Animals & Nature" }, { shortcode: "tiger", unicode: "🐯", category: "Animals & Nature" }, { shortcode: "lion_face", unicode: "🦁", category: "Animals & Nature" }, { shortcode: "cow", unicode: "🐮", category: "Animals & Nature" }, { shortcode: "pig", unicode: "🐷", category: "Animals & Nature" }, { shortcode: "pig_nose", unicode: "🐽", category: "Animals & Nature" }, { shortcode: "frog", unicode: "🐸", category: "Animals & Nature" }, { shortcode: "monkey_face", unicode: "🐵", category: "Animals & Nature" }, { shortcode: "see_no_evil", unicode: "🙈", category: "Animals & Nature" }, { shortcode: "hear_no_evil", unicode: "🙉", category: "Animals & Nature" }, { shortcode: "speak_no_evil", unicode: "🙊", category: "Animals & Nature" }, { shortcode: "monkey", unicode: "🐒", category: "Animals & Nature" }, { shortcode: "chicken", unicode: "🐔", category: "Animals & Nature" }, { shortcode: "penguin", unicode: "🐧", category: "Animals & Nature" }, { shortcode: "bird", unicode: "🐦", category: "Animals & Nature" }, { shortcode: "baby_chick", unicode: "🐤", category: "Animals & Nature" }, { shortcode: "hatching_chick", unicode: "🐣", category: "Animals & Nature" }, { shortcode: "hatched_chick", unicode: "🐥", category: "Animals & Nature" }, { shortcode: "duck", unicode: "🦆", category: "Animals & Nature" }, { shortcode: "eagle", unicode: "🦅", category: "Animals & Nature" }, { shortcode: "owl", unicode: "🦉", category: "Animals & Nature" }, { shortcode: "bat", unicode: "🦇", category: "Animals & Nature" }, { shortcode: "wolf", unicode: "🐺", category: "Animals & Nature" }, { shortcode: "boar", unicode: "🐗", category: "Animals & Nature" }, { shortcode: "horse", unicode: "🐴", category: "Animals & Nature" }, { shortcode: "unicorn_face", unicode: "🦄", category: "Animals & Nature" }, { shortcode: "bee", unicode: "🐝", category: "Animals & Nature" }, { shortcode: "bug", unicode: "🐛", category: "Animals & Nature" }, { shortcode: "butterfly", unicode: "🦋", category: "Animals & Nature" }, { shortcode: "snail", unicode: "🐌", category: "Animals & Nature" }, { shortcode: "rose", unicode: "🌹", category: "Animals & Nature" }, { shortcode: "wilted_flower", unicode: "🥀", category: "Animals & Nature" }, { shortcode: "hibiscus", unicode: "🌺", category: "Animals & Nature" }, { shortcode: "sunflower", unicode: "🌻", category: "Animals & Nature" }, { shortcode: "blossom", unicode: "🌼", category: "Animals & Nature" }, { shortcode: "tulip", unicode: "🌷", category: "Animals & Nature" }, { shortcode: "seedling", unicode: "🌱", category: "Animals & Nature" }, { shortcode: "evergreen_tree", unicode: "🌲", category: "Animals & Nature" }, { shortcode: "deciduous_tree", unicode: "🌳", category: "Animals & Nature" }, { shortcode: "palm_tree", unicode: "🌴", category: "Animals & Nature" }, { shortcode: "cactus", unicode: "🌵", category: "Animals & Nature" },
// Food & Drink
{ shortcode: "grapes", unicode: "🍇", category: "Food & Drink" }, { shortcode: "melon", unicode: "🍈", category: "Food & Drink" }, { shortcode: "watermelon", unicode: "🍉", category: "Food & Drink" }, { shortcode: "tangerine", unicode: "🍊", category: "Food & Drink" }, { shortcode: "lemon", unicode: "🍋", category: "Food & Drink" }, { shortcode: "banana", unicode: "🍌", category: "Food & Drink" }, { shortcode: "pineapple", unicode: "🍍", category: "Food & Drink" }, { shortcode: "mango", unicode: "🥭", category: "Food & Drink" }, { shortcode: "apple", unicode: "🍎", category: "Food & Drink" }, { shortcode: "green_apple", unicode: "🍏", category: "Food & Drink" }, { shortcode: "pear", unicode: "🍐", category: "Food & Drink" }, { shortcode: "peach", unicode: "🍑", category: "Food & Drink" }, { shortcode: "cherries", unicode: "🍒", category: "Food & Drink" }, { shortcode: "strawberry", unicode: "🍓", category: "Food & Drink" }, { shortcode: "kiwi_fruit", unicode: "🥝", category: "Food & Drink" }, { shortcode: "tomato", unicode: "🍅", category: "Food & Drink" }, { shortcode: "coconut", unicode: "🥥", category: "Food & Drink" }, { shortcode: "avocado", unicode: "🥑", category: "Food & Drink" }, { shortcode: "eggplant", unicode: "🍆", category: "Food & Drink" }, { shortcode: "potato", unicode: "🥔", category: "Food & Drink" }, { shortcode: "carrot", unicode: "🥕", category: "Food & Drink" }, { shortcode: "corn", unicode: "🌽", category: "Food & Drink" }, { shortcode: "hot_pepper", unicode: "🌶️", category: "Food & Drink" }, { shortcode: "cucumber", unicode: "🥒", category: "Food & Drink" }, { shortcode: "leafy_green", unicode: "🥬", category: "Food & Drink" }, { shortcode: "broccoli", unicode: "🥦", category: "Food & Drink" }, { shortcode: "garlic", unicode: "🧄", category: "Food & Drink" }, { shortcode: "onion", unicode: "🧅", category: "Food & Drink" }, { shortcode: "mushroom", unicode: "🍄", category: "Food & Drink" }, { shortcode: "peanuts", unicode: "🥜", category: "Food & Drink" }, { shortcode: "chestnut", unicode: "🌰", category: "Food & Drink" }, { shortcode: "bread", unicode: "🍞", category: "Food & Drink" }, { shortcode: "croissant", unicode: "🥐", category: "Food & Drink" }, { shortcode: "baguette_bread", unicode: "🥖", category: "Food & Drink" }, { shortcode: "pretzel", unicode: "🥨", category: "Food & Drink" }, { shortcode: "bagel", unicode: "🥯", category: "Food & Drink" }, { shortcode: "pancakes", unicode: "🥞", category: "Food & Drink" }, { shortcode: "waffle", unicode: "🧇", category: "Food & Drink" }, { shortcode: "cheese_wedge", unicode: "🧀", category: "Food & Drink" }, { shortcode: "meat_on_bone", unicode: "🍖", category: "Food & Drink" }, { shortcode: "poultry_leg", unicode: "🍗", category: "Food & Drink" }, { shortcode: "cut_of_meat", unicode: "🥩", category: "Food & Drink" }, { shortcode: "bacon", unicode: "🥓", category: "Food & Drink" }, { shortcode: "hamburger", unicode: "🍔", category: "Food & Drink" }, { shortcode: "fries", unicode: "🍟", category: "Food & Drink" }, { shortcode: "pizza", unicode: "🍕", category: "Food & Drink" }, { shortcode: "hotdog", unicode: "🌭", category: "Food & Drink" }, { shortcode: "sandwich", unicode: "🥪", category: "Food & Drink" }, { shortcode: "taco", unicode: "🌮", category: "Food & Drink" }, { shortcode: "burrito", unicode: "🌯", category: "Food & Drink" }, { shortcode: "ramen", unicode: "🍜", category: "Food & Drink" }, { shortcode: "spaghetti", unicode: "🍝", category: "Food & Drink" }, { shortcode: "bento", unicode: "🍱", category: "Food & Drink" }, { shortcode: "sushi", unicode: "🍣", category: "Food & Drink" }, { shortcode: "rice_ball", unicode: "🍙", category: "Food & Drink" }, { shortcode: "shrimp", unicode: "🍤", category: "Food & Drink" }, { shortcode: "ice_cream", unicode: "🍨", category: "Food & Drink" }, { shortcode: "doughnut", unicode: "🍩", category: "Food & Drink" }, { shortcode: "cookie", unicode: "🍪", category: "Food & Drink" }, { shortcode: "birthday", unicode: "🎂", category: "Food & Drink" }, { shortcode: "cake", unicode: "🍰", category: "Food & Drink" }, { shortcode: "pie", unicode: "🥧", category: "Food & Drink" }, { shortcode: "chocolate_bar", unicode: "🍫", category: "Food & Drink" }, { shortcode: "candy", unicode: "🍬", category: "Food & Drink" }, { shortcode: "lollipop", unicode: "🍭", category: "Food & Drink" }, { shortcode: "custard", unicode: "🍮", category: "Food & Drink" }, { shortcode: "honey_pot", unicode: "🍯", category: "Food & Drink" }, { shortcode: "coffee", unicode: "☕", category: "Food & Drink" }, { shortcode: "tea", unicode: "🍵", category: "Food & Drink" }, { shortcode: "beer", unicode: "🍺", category: "Food & Drink" }, { shortcode: "beers", unicode: "🍻", category: "Food & Drink" }, { shortcode: "clinking_glasses", unicode: "🥂", category: "Food & Drink" }, { shortcode: "wine_glass", unicode: "🍷", category: "Food & Drink" }, { shortcode: "tumbler_glass", unicode: "🥃", category: "Food & Drink" }, { shortcode: "cocktail", unicode: "🍸", category: "Food & Drink" }, { shortcode: "tropical_drink", unicode: "🍹", category: "Food & Drink" }, { shortcode: "champagne", unicode: "🍾", category: "Food & Drink" },
// Objects
{ shortcode: "watch", unicode: "⌚", category: "Objects" }, { shortcode: "iphone", unicode: "📱", category: "Objects" }, { shortcode: "calling", unicode: "📲", category: "Objects" }, { shortcode: "computer", unicode: "💻", category: "Objects" }, { shortcode: "keyboard", unicode: "⌨️", category: "Objects" }, { shortcode: "desktop_computer", unicode: "🖥️", category: "Objects" }, { shortcode: "printer", unicode: "🖨️", category: "Objects" }, { shortcode: "computer_mouse", unicode: "🖱️", category: "Objects" }, { shortcode: "trackball", unicode: "🖲️", category: "Objects" }, { shortcode: "joystick", unicode: "🕹️", category: "Objects" }, { shortcode: "floppy_disk", unicode: "💾", category: "Objects" }, { shortcode: "cd", unicode: "💿", category: "Objects" }, { shortcode: "dvd", unicode: "📀", category: "Objects" }, { shortcode: "movie_camera", unicode: "🎥", category: "Objects" }, { shortcode: "film_strip", unicode: "🎞️", category: "Objects" }, { shortcode: "film_projector", unicode: "📽️", category: "Objects" }, { shortcode: "clapper", unicode: "🎬", category: "Objects" }, { shortcode: "tv", unicode: "📺", category: "Objects" }, { shortcode: "camera", unicode: "📷", category: "Objects" }, { shortcode: "camera_flash", unicode: "📸", category: "Objects" }, { shortcode: "video_camera", unicode: "📹", category: "Objects" }, { shortcode: "vhs", unicode: "📼", category: "Objects" }, { shortcode: "mag", unicode: "🔍", category: "Objects" }, { shortcode: "mag_right", unicode: "🔎", category: "Objects" }, { shortcode: "bulb", unicode: "💡", category: "Objects" }, { shortcode: "flashlight", unicode: "🔦", category: "Objects" }, { shortcode: "moneybag", unicode: "💰", category: "Objects" }, { shortcode: "yen", unicode: "💴", category: "Objects" }, { shortcode: "dollar", unicode: "💵", category: "Objects" }, { shortcode: "euro", unicode: "💶", category: "Objects" }, { shortcode: "pound", unicode: "💷", category: "Objects" }, { shortcode: "credit_card", unicode: "💳", category: "Objects" }, { shortcode: "gem", unicode: "💎", category: "Objects" }, { shortcode: "balance_scale", unicode: "⚖️", category: "Objects" }, { shortcode: "wrench", unicode: "🔧", category: "Objects" }, { shortcode: "hammer", unicode: "🔨", category: "Objects" }, { shortcode: "hammer_and_pick", unicode: "⚒️", category: "Objects" }, { shortcode: "hammer_and_wrench", unicode: "🛠️", category: "Objects" }, { shortcode: "pick", unicode: "⛏️", category: "Objects" }, { shortcode: "nut_and_bolt", unicode: "🔩", category: "Objects" }, { shortcode: "gear", unicode: "⚙️", category: "Objects" }, { shortcode: "chains", unicode: "⛓️", category: "Objects" }, { shortcode: "gun", unicode: "🔫", category: "Objects" }, { shortcode: "bomb", unicode: "💣", category: "Objects" }, { shortcode: "hocho", unicode: "🔪", category: "Objects" }, { shortcode: "knife", unicode: "🔪", category: "Objects" }, { shortcode: "dagger", unicode: "🗡️", category: "Objects" }, { shortcode: "crossed_swords", unicode: "⚔️", category: "Objects" }, { shortcode: "shield", unicode: "🛡️", category: "Objects" }, { shortcode: "smoking", unicode: "🚬", category: "Objects" }, { shortcode: "coffin", unicode: "⚰️", category: "Objects" }, { shortcode: "funeral_urn", unicode: "⚱️", category: "Objects" }, { shortcode: "amphora", unicode: "🏺", category: "Objects" }, { shortcode: "crystal_ball", unicode: "🔮", category: "Objects" }, { shortcode: "prayer_beads", unicode: "📿", category: "Objects" }, { shortcode: "nazar_amulet", unicode: "🧿", category: "Objects" }, { shortcode: "barber", unicode: "💈", category: "Objects" }, { shortcode: "alembic", unicode: "⚗️", category: "Objects" }, { shortcode: "telescope", unicode: "🔭", category: "Objects" }, { shortcode: "microscope", unicode: "🔬", category: "Objects" }, { shortcode: "hole", unicode: "🕳️", category: "Objects" }, { shortcode: "pill", unicode: "💊", category: "Objects" }, { shortcode: "syringe", unicode: "💉", category: "Objects" }, { shortcode: "dna", unicode: "🧬", category: "Objects" },
// Symbols
{ shortcode: "heart", unicode: "❤️", category: "Symbols" }, { shortcode: "orange_heart", unicode: "🧡", category: "Symbols" }, { shortcode: "yellow_heart", unicode: "💛", category: "Symbols" }, { shortcode: "green_heart", unicode: "💚", category: "Symbols" }, { shortcode: "blue_heart", unicode: "💙", category: "Symbols" }, { shortcode: "purple_heart", unicode: "💜", category: "Symbols" }, { shortcode: "black_heart", unicode: "🖤", category: "Symbols" }, { shortcode: "broken_heart", unicode: "💔", category: "Symbols" }, { shortcode: "heavy_heart_exclamation", unicode: "❣️", category: "Symbols" }, { shortcode: "two_hearts", unicode: "💕", category: "Symbols" }, { shortcode: "revolving_hearts", unicode: "💞", category: "Symbols" }, { shortcode: "heartbeat", unicode: "💓", category: "Symbols" }, { shortcode: "heartpulse", unicode: "💗", category: "Symbols" }, { shortcode: "sparkling_heart", unicode: "💖", category: "Symbols" }, { shortcode: "cupid", unicode: "💘", category: "Symbols" }, { shortcode: "gift_heart", unicode: "💝", category: "Symbols" }, { shortcode: "peace_symbol", unicode: "☮️", category: "Symbols" }, { shortcode: "latin_cross", unicode: "✝️", category: "Symbols" }, { shortcode: "star_and_crescent", unicode: "☪️", category: "Symbols" }, { shortcode: "om", unicode: "🕉️", category: "Symbols" }, { shortcode: "wheel_of_dharma", unicode: "☸️", category: "Symbols" }, { shortcode: "star_of_david", unicode: "✡️", category: "Symbols" }, { shortcode: "yin_yang", unicode: "☯️", category: "Symbols" }, { shortcode: "infinity", unicode: "♾️", category: "Symbols" }, { shortcode: "aries", unicode: "♈", category: "Symbols" }, { shortcode: "taurus", unicode: "♉", category: "Symbols" }, { shortcode: "gemini", unicode: "♊", category: "Symbols" }, { shortcode: "cancer", unicode: "♋", category: "Symbols" }, { shortcode: "leo", unicode: "♌", category: "Symbols" }, { shortcode: "virgo", unicode: "♍", category: "Symbols" }, { shortcode: "libra", unicode: "♎", category: "Symbols" }, { shortcode: "scorpius", unicode: "♏", category: "Symbols" }, { shortcode: "sagittarius", unicode: "♐", category: "Symbols" }, { shortcode: "capricorn", unicode: "♑", category: "Symbols" }, { shortcode: "aquarius", unicode: "♒", category: "Symbols" }, { shortcode: "pisces", unicode: "♓", category: "Symbols" }, { shortcode: "ophiuchus", unicode: "⛎", category: "Symbols" }, { shortcode: "recycle", unicode: "♻️", category: "Symbols" }, { shortcode: "warning", unicode: "⚠️", category: "Symbols" }, { shortcode: "children_crossing", unicode: "🚸", category: "Symbols" }, { shortcode: "no_entry", unicode: "⛔", category: "Symbols" }, { shortcode: "name_badge", unicode: "📛", category: "Symbols" }, { shortcode: "no_entry_sign", unicode: "🚫", category: "Symbols" }, { shortcode: "x", unicode: "❌", category: "Symbols" }, { shortcode: "o", unicode: "⭕", category: "Symbols" }, { shortcode: "stop_sign", unicode: "🛑", category: "Symbols" }, { shortcode: "hotsprings", unicode: "♨️", category: "Symbols" }, { shortcode: "sos", unicode: "🆘", category: "Symbols" }, { shortcode: "100", unicode: "💯", category: "Symbols" }, { shortcode: "white_check_mark", unicode: "✅", category: "Symbols" }, { shortcode: "zzz", unicode: "💤", category: "Symbols" }, { shortcode: "sparkles", unicode: "✨", category: "Symbols" }, { shortcode: "fire", unicode: "🔥", category: "Symbols" }, { shortcode: "boom", unicode: "💥", category: "Symbols" },
// Travel & Places
{ shortcode: "rocket", unicode: "🚀", category: "Travel & Places" }, { shortcode: "helicopter", unicode: "🚁", category: "Travel & Places" }, { shortcode: "steam_locomotive", unicode: "🚂", category: "Travel & Places" }, { shortcode: "railway_car", unicode: "🚃", category: "Travel & Places" }, { shortcode: "bullettrain_side", unicode: "🚄", category: "Travel & Places" }, { shortcode: "bullettrain_front", unicode: "🚅", category: "Travel & Places" }, { shortcode: "train2", unicode: "🚆", category: "Travel & Places" }, { shortcode: "metro", unicode: "🚇", category: "Travel & Places" }, { shortcode: "light_rail", unicode: "🚈", category: "Travel & Places" }, { shortcode: "station", unicode: "🚉", category: "Travel & Places" }, { shortcode: "tram", unicode: "🚊", category: "Travel & Places" }, { shortcode: "monorail", unicode: "🚝", category: "Travel & Places" }, { shortcode: "mountain_railway", unicode: "🚞", category: "Travel & Places" }, { shortcode: "train", unicode: "🚋", category: "Travel & Places" }, { shortcode: "bus", unicode: "🚌", category: "Travel & Places" }, { shortcode: "oncoming_bus", unicode: "🚍", category: "Travel & Places" }, { shortcode: "trolleybus", unicode: "🚎", category: "Travel & Places" }, { shortcode: "minibus", unicode: "🚐", category: "Travel & Places" }, { shortcode: "ambulance", unicode: "🚑", category: "Travel & Places" }, { shortcode: "fire_engine", unicode: "🚒", category: "Travel & Places" }, { shortcode: "police_car", unicode: "🚓", category: "Travel & Places" }, { shortcode: "oncoming_police_car", unicode: "🚔", category: "Travel & Places" }, { shortcode: "taxi", unicode: "🚕", category: "Travel & Places" }, { shortcode: "oncoming_taxi", unicode: "🚖", category: "Travel & Places" }, { shortcode: "car", unicode: "🚗", category: "Travel & Places" }, { shortcode: "red_car", unicode: "🚗", category: "Travel & Places" }, { shortcode: "oncoming_automobile", unicode: "🚘", category: "Travel & Places" }, { shortcode: "blue_car", unicode: "🚙", category: "Travel & Places" }, { shortcode: "truck", unicode: "🚚", category: "Travel & Places" }, { shortcode: "articulated_lorry", unicode: "🚛", category: "Travel & Places" }, { shortcode: "tractor", unicode: "🚜", category: "Travel & Places" }, { shortcode: "racing_car", unicode: "🏎️", category: "Travel & Places" }, { shortcode: "motorcycle", unicode: "🏍️", category: "Travel & Places" }, { shortcode: "motorbike", unicode: "🏍️", category: "Travel & Places" }, { shortcode: "motor_scooter", unicode: "🛵", category: "Travel & Places" }, { shortcode: "manual_wheelchair", unicode: "🦽", category: "Travel & Places" }, { shortcode: "motorized_wheelchair", unicode: "🦼", category: "Travel & Places" }, { shortcode: "auto_rickshaw", unicode: "🛺", category: "Travel & Places" }, { shortcode: "bike", unicode: "🚲", category: "Travel & Places" }, { shortcode: "kick_scooter", unicode: "🛴", category: "Travel & Places" }, { shortcode: "skateboard", unicode: "🛹", category: "Travel & Places" }, { shortcode: "busstop", unicode: "🚏", category: "Travel & Places" }, { shortcode: "fuelpump", unicode: "⛽", category: "Travel & Places" }, { shortcode: "rotating_light", unicode: "🚨", category: "Travel & Places" }, { shortcode: "traffic_light", unicode: "🚥", category: "Travel & Places" }, { shortcode: "vertical_traffic_light", unicode: "🚦", category: "Travel & Places" }, { shortcode: "construction", unicode: "🚧", category: "Travel & Places" }, { shortcode: "anchor", unicode: "⚓", category: "Travel & Places" }, { shortcode: "boat", unicode: "⛵", category: "Travel & Places" }, { shortcode: "sailboat", unicode: "⛵", category: "Travel & Places" }, { shortcode: "canoe", unicode: "🛶", category: "Travel & Places" }, { shortcode: "speedboat", unicode: "🚤", category: "Travel & Places" }, { shortcode: "passenger_ship", unicode: "🛳️", category: "Travel & Places" }, { shortcode: "ferry", unicode: "⛴️", category: "Travel & Places" }, { shortcode: "motor_boat", unicode: "🛥️", category: "Travel & Places" }, { shortcode: "ship", unicode: "🚢", category: "Travel & Places" }, { shortcode: "airplane", unicode: "✈️", category: "Travel & Places" }, { shortcode: "small_airplane", unicode: "🛩️", category: "Travel & Places" }, { shortcode: "airplane_departure", unicode: "🛫", category: "Travel & Places" }, { shortcode: "airplane_arriving", unicode: "🛬", category: "Travel & Places" },
];
const emojiShortcodeMap = {};
const emojiDataByCategory = {};
let autocompleteActive = false;
let selectedAutocompleteIndex = -1;

// Process the master emoji list into more usable formats on startup
EMOJI_DATA.forEach(emoji => {
// Map for quick shortcode -> unicode replacement
emojiShortcodeMap[emoji.shortcode.toLowerCase()] = emoji.unicode;

// Group emojis by category for the picker UI
if (!emojiDataByCategory[emoji.category]) {
emojiDataByCategory[emoji.category] = [];
}
emojiDataByCategory[emoji.category].push(emoji);
});

// DOM elements
const chatContainer = document.querySelector('.chat-container');
const chatHeader = document.getElementById('chat-header');
const memberListSidebar = document.getElementById('member-list-sidebar');
const memberListContent = document.getElementById('member-list-content');
const channelDescriptionArea = document.getElementById('channel-description-area');
const serverSettingsBtn = document.getElementById('server-settings-btn');
const serverSettingsModal = document.getElementById('server-settings-modal');
const closeServerSettingsModalBtn = document.getElementById('close-server-settings-modal-btn');
const serverSettingsForm = document.getElementById('server-settings-form');
const serverSettingsName = document.getElementById('server-settings-name');
const serverSettingsDescription = document.getElementById('server-settings-description');
const serverMembersList = document.getElementById('server-members-list');
const newRoleNameInput = document.getElementById('new-role-name');
const newRoleColorInput = document.getElementById('new-role-color');
const createRoleBtn = document.getElementById('create-role-btn');
const customRolesList = document.getElementById('custom-roles-list');
const messagesArea = document.getElementById('messages-area');
const messageInput = document.getElementById('message-input');
const sendButton = document.getElementById('send-button');
const messageInputArea = document.getElementById('message-input-area');
const joinChannelBar = document.getElementById('join-channel-bar');
const joinChannelButton = document.getElementById('join-channel-button');
const userIdDisplay = document.getElementById('user-id-display');
const loadingMessages = document.getElementById('loading-messages');
const messageBox = document.getElementById('message-box');
const channelsList = document.getElementById('channels-list');
const dmList = document.getElementById('dm-list');
const createChannelBtn = document.getElementById('create-channel-btn');
const createChannelModal = document.getElementById('create-channel-modal');
const closeChannelModalBtn = document.getElementById('close-channel-modal-btn');
const createChannelForm = document.getElementById('create-channel-form');
const newChannelNameInput = document.getElementById('new-channel-name');
const currentChatNameDisplay = document.getElementById('current-chat-name');
const loadingChannels = document.getElementById('loading-channels');
const loadingDMs = document.getElementById('loading-dms');
const usernameModal = document.getElementById('username-modal');
const usernameForm = document.getElementById('username-form');
const usernameInput = document.getElementById('username-input');
const usernameError = document.getElementById('username-error');
const addFriendInput = document.getElementById('add-friend-input');
const addFriendBtn = document.getElementById('add-friend-btn');
const friendRequestsList = document.getElementById('friend-requests-list');
const loadingFriendRequests = document.getElementById('loading-friend-requests');
const imageUploadBtn = document.getElementById('image-upload-btn');
const imageUploadInput = document.getElementById('image-upload-input');
const emojiBtn = document.getElementById('emoji-btn');
const emojiPicker = document.getElementById('emoji-picker');
const emojiAutocompleteContainer = document.getElementById('emoji-autocomplete-container');
const uploadStatus = document.getElementById('upload-status');
const adminClearBtn = document.getElementById('admin-clear-btn');
const makePrivateCheckbox = document.getElementById('make-private-checkbox');
const channelPasswordContainer = document.getElementById('channel-password-container');
const newChannelPasswordInput = document.getElementById('new-channel-password');
const settingsBtn = document.getElementById('settings-btn');
const userSettingsModal = document.getElementById('user-settings-modal');
const closeSettingsModalBtn = document.getElementById('close-settings-modal-btn');
const userSettingsForm = document.getElementById('user-settings-form');
const settingsAvatarPreviewContainer = document.getElementById('settings-avatar-preview-container');
const settingsAvatarInput = document.getElementById('settings-avatar-input');
const settingsBannerPreview = document.getElementById('settings-banner-preview');
const settingsBannerInput = document.getElementById('settings-banner-input');
const settingsDescriptionInput = document.getElementById('settings-description-input');
const settingsUsernameInput = document.getElementById('settings-username-input');
const settingsUsernameBtn = document.getElementById('settings-username-btn');
const usernameChangeStatus = document.getElementById('username-change-status');
const userProfileModal = document.getElementById('user-profile-modal');
const userProfileBanner = document.getElementById('user-profile-banner');
const userProfileAvatarContainer = document.getElementById('user-profile-avatar-container');
const userProfileUsername = document.getElementById('user-profile-username');
const userProfilePerksBadge = document.getElementById('user-profile-perks-badge');
const userProfilePerksPlusBadge = document.getElementById('user-profile-perks-plus-badge');
const userProfileDescription = document.getElementById('user-profile-description');
const userProfileDmBtn = document.getElementById('user-profile-dm-btn');
const perksStatusContainer = document.getElementById('perks-status-container');
const decorationsListContainer = document.getElementById('decorations-list-container');
const statusSelectionContainer = document.getElementById('status-selection-container');
const replyInputBar = document.getElementById('reply-input-bar');

function ensureProfileBadgesExist() {
if (!document.getElementById('user-profile-verified-badge')) {
const badgeContainer = document.querySelector('#user-profile-content > .flex.items-center.gap-2');
if (badgeContainer) {
badgeContainer.insertAdjacentHTML('beforeend', `
<span id="user-profile-verified-badge" class="hidden flex items-center gap-1 text-xs font-bold bg-blue-500 text-white px-2 py-1 rounded-full">
<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
Verified
</span>
`);
badgeContainer.insertAdjacentHTML('beforeend', `
<span id="user-profile-posts-famous-badge" class="hidden text-xs font-bold bg-blue-500 text-white px-2 py-1 rounded-full">Posts Famous</span>
`);
}
}
}


// Clips DOM Elements
const clipsContainer = document.getElementById('clips-container');
const clipsNavItem = document.getElementById('clips-nav-item');
const clipsFeed = document.getElementById('clips-feed');
const loadingClips = document.getElementById('loading-clips');
const uploadClipBtn = document.getElementById('upload-clip-btn');
const uploadClipModal = document.getElementById('upload-clip-modal');
const closeUploadModalBtn = document.getElementById('close-upload-modal-btn');
const uploadClipForm = document.getElementById('upload-clip-form');
const newClipTitleInput = document.getElementById('new-clip-title');
const newClipUrlInput = document.getElementById('new-clip-url');
const newClipFileInput = document.getElementById('new-clip-file');
const postClipSubmitBtn = document.getElementById('post-clip-submit-btn');
const urlUploadSection = document.getElementById('url-upload-section');
const fileUploadSection = document.getElementById('file-upload-section');
const uploadTypeRadios = document.querySelectorAll('input[name="upload-type"]');
const rulesBtn = document.getElementById('rules-btn');
const rulesModal = document.getElementById('rules-modal');
const closeRulesModalBtn = document.getElementById('close-rules-modal-btn');
const reportClipModal = document.getElementById('report-clip-modal');
const closeReportModalBtn = document.getElementById('close-report-modal-btn');
const reportClipForm = document.getElementById('report-clip-form');
const reportCategory = document.getElementById('report-category');
const reportDetails = document.getElementById('report-details');

// Quests DOM Elements
const questsContainer = document.getElementById('quests-container');
const questsNavItem = document.getElementById('quests-nav-item');
const questsFeed = document.getElementById('quests-feed');
const loadingQuests = document.getElementById('loading-quests');
const questsTimerDisplay = document.getElementById('quests-timer-display');

// Posts DOM Elements
const postsContainer = document.getElementById('posts-container');
const postsNavItem = document.getElementById('posts-nav-item');
const postsFeed = document.getElementById('posts-feed');
const loadingPosts = document.getElementById('loading-posts');
const createPostBtn = document.getElementById('create-post-btn');
const createPostModal = document.getElementById('create-post-modal');
const closePostModalBtn = document.getElementById('close-post-modal-btn');
const createPostForm = document.getElementById('create-post-form');
const newPostContentInput = document.getElementById('new-post-content');
const postCharCount = document.getElementById('post-char-count');

const everyoneChannel = { id: 'everyone', name: 'everyone', isStatic: true };
const _userCache = {};
let newAvatarBase64 = null;
let newBannerBase64 = null;
let unsubscribeClips = null;
let unsubscribePosts = null; // Listener for permanent posts
let unsubscribeMembers = null;
const activeCommentListeners = new Map();

// --- PRESENCE SYSTEM ---
const _presenceCache = {};
let idleTimeout;
const IDLE_TIME = 5 * 60 * 1000; // 5 minutes
let unsubscribeMyUserDoc = null;

// --- QUESTS SYSTEM ---
const QUESTS_DEFINITIONS = [
{ id: 'send_messages_20', type: 'sendMessage', title: 'Chatterbox', description: 'Send 20 messages in any channel or DM.', target: 20 },
{ id: 'send_messages_50', type: 'sendMessage', title: 'Social Butterfly', description: 'Send 50 messages in any channel or DM.', target: 50 },
{ id: 'post_clip_1', type: 'postClip', title: 'Content Creator', description: 'Post one clip to the Clips feed.', target: 1 },
{ id: 'add_friend_1', type: 'addFriend', title: 'Friendly Neighbor', description: 'Send a friend request to another user.', target: 1 },
{ id: 'join_channel_1', type: 'joinChannel', title: 'Explorer', description: 'Join a new public channel.', target: 1 },
];
const QUEST_STORAGE_KEY = 'relicord_quests_data_v2';
let userQuestsData = { activeQuests: [], questsCompletedTimestamp: null };

// NEW: Central function to update all visible avatars based on the latest presence data.
function updateAllAvatarsOnScreen() {
document.querySelectorAll('.avatar-container[data-user-id]').forEach(container => {
const uid = container.dataset.userId;
if (!uid) return;

// Use the existing helper which correctly defaults to 'offline'
const newStatus = getUserEffectiveStatus({ id: uid });

const indicator = container.querySelector('.status-indicator');
if (indicator) {
// Robustly remove all possible status classes before adding the new one
indicator.classList.remove('status-online', 'status-offline', 'status-idle', 'status-dnd');
indicator.classList.add(`status-${newStatus}`);
}
});
}


// Listens to your own user document for preference changes.
function listenForMyUserDocumentChanges() {
if (unsubscribeMyUserDoc) unsubscribeMyUserDoc();
if (!userId || userId === 'anonymous') return;

const userDocRef = doc(db, `artifacts/${appId}/public/data/users`, userId);
unsubscribeMyUserDoc = onSnapshot(userDocRef, (docSnap) => {
const userData = docSnap.exists() ? docSnap.data() : {};
const manualStatus = userData.manualStatus;

_userCache[userId] = { id: userId, ...userData };

const userStatusRef = ref(rtdb, `/status/${userId}`);

if (manualStatus) {
clearTimeout(idleTimeout);
set(userStatusRef, { state: manualStatus, last_changed: serverTimestamp() });
} else {
resetIdleTimer();
}
});
}

function initializePresenceSystem() {
if (!userId || userId === 'anonymous') return;

const userStatusDatabaseRef = ref(rtdb, `/status/${userId}`);
const connectedRef = ref(rtdb, '.info/connected');

onValue(connectedRef, (snapshot) => {
if (snapshot.val() === false) return;
onDisconnect(userStatusDatabaseRef)
.set({ state: 'offline', last_changed: serverTimestamp(), activeChatId: null })
.catch((err) => console.error("Could not establish onDisconnect hook", err));
});

const statusRef = ref(rtdb, 'status');
// MODIFIED: The main RTDB listener is now more efficient and updates the entire UI.
onValue(statusRef, (snapshot) => {
const statuses = snapshot.val() || {};

// 1. Remove users from cache who are no longer in the status list (truly offline)
Object.keys(_presenceCache).forEach(uid => {
if (!statuses[uid]) {
delete _presenceCache[uid];
}
});

// 2. Add/update users from the status list into the cache
Object.keys(statuses).forEach(uid => {
_presenceCache[uid] = statuses[uid].state;
});

// 3. Update all avatars currently visible on the screen with the new status info
updateAllAvatarsOnScreen();
});

window.addEventListener('mousemove', resetIdleTimer);
window.addEventListener('keydown', resetIdleTimer);
window.addEventListener('visibilitychange', resetIdleTimer);
}

async function updateMyPresence(state) {
if (!userId || userId === 'anonymous') return;
if (_userCache[userId] && _userCache[userId].manualStatus) {
return;
}
const userStatusRef = ref(rtdb, `/status/${userId}`);
set(userStatusRef, { state: state, last_changed: serverTimestamp(), activeChatId: currentChatId });
}

function resetIdleTimer() {
if (_userCache[userId] && _userCache[userId].manualStatus) {
clearTimeout(idleTimeout);
return;
}
clearTimeout(idleTimeout);
updateMyPresence('online');
idleTimeout = setTimeout(() => {
updateMyPresence('idle');
}, IDLE_TIME);
}

function getUserEffectiveStatus(userData) {
return _presenceCache[userData.id] || 'offline';
}

// [MODIFIED] Added localStorage logic to handleStatusChange
async function handleStatusChange(statusKey) {
if (!userId) return;
const userDocRef = doc(db, `artifacts/${appId}/public/data/users`, userId);
const userStatusRef = ref(rtdb, `/status/${userId}`);

try {
if (statusKey === 'online') {
// Update Firestore and localStorage to clear manual preference
await updateDoc(userDocRef, { manualStatus: deleteField() });
localStorage.removeItem('relicord_manual_status');

if (_userCache[userId]) _userCache[userId].manualStatus = null;
resetIdleTimer();
} else { // 'dnd' or 'offline'
// Update Firestore and localStorage to set manual preference
await updateDoc(userDocRef, { manualStatus: statusKey });
localStorage.setItem('relicord_manual_status', statusKey);

if (_userCache[userId]) _userCache[userId].manualStatus = statusKey;
set(userStatusRef, { state: statusKey, last_changed: serverTimestamp(), activeChatId: currentChatId });
clearTimeout(idleTimeout);
}
showMessage(`Status set to ${statusKey}.`);
if (currentChatType === 'channel') listenForChannelMembers(currentChatId);
} catch (error) {
console.error('Error updating status:', error);
showMessage('Could not update status.', true);
}
}

function showMessage(message, isError = false) {
messageBox.textContent = message;
messageBox.className = 'message-box show';
if (isError) messageBox.classList.add('error');
setTimeout(() => {
messageBox.classList.remove('show');
}, 3000);
}

async function initializeFirebase() {
try {
if (!firebaseConfig.apiKey) throw new Error("Firebase config missing.");
app = initializeApp(firebaseConfig);
db = getFirestore(app);
rtdb = getDatabase(app);
auth = getAuth(app);

onAuthStateChanged(auth, async (user) => {
if (user) {
// Check if the current user's ID is the one to be banned.
if (user.uid === BANNED_USER_ID) {
// If it is, sign them out and then immediately sign them in
// anonymously again. This will generate a new UID and effectively
// give them a "new account" on every page load.
await auth.signOut();
await signInAnonymously(auth);
return; // Halt further execution for the banned ID.
}

userId = user.uid;
userIdDisplay.textContent = userId.substring(0, 8) + '...';

// --- START LOCALSTORAGE SYNC ON LOAD ---
// Get the status remembered in this browser
const persistedStatus = localStorage.getItem('relicord_manual_status');
const userDocRef = doc(db, `artifacts/${appId}/public/data/users`, userId);

// Get the status stored in the cloud
const userDocSnap = await getDoc(userDocRef);
const cloudStatus = userDocSnap.exists() ? userDocSnap.data().manualStatus : undefined;

// If browser memory differs from cloud, update the cloud to match the browser
if (persistedStatus && persistedStatus !== cloudStatus) {
await updateDoc(userDocRef, { manualStatus: persistedStatus });
} else if (!persistedStatus && cloudStatus) {
await updateDoc(userDocRef, { manualStatus: deleteField() });
}
// --- END LOCALSTORAGE SYNC ON LOAD ---

// Now that Firestore is synchronized, initialize the presence system.
initializePresenceSystem();
listenForMyUserDocumentChanges();

await getOrCreateUsername();
if (username) {
listenForChannels();
listenForDMs();
listenForFriendRequests();
initializeQuests(); // Initialize quests system
}
} else {
userId = 'anonymous';
username = null;
if(unsubscribeMyUserDoc) unsubscribeMyUserDoc();
userIdDisplay.textContent = 'Not Authenticated';
}
});

if (initialAuthToken) {
await signInWithCustomToken(auth, initialAuthToken);
} else {
await signInAnonymously(auth);
}
} catch (error) {
console.error("Firebase Init Error:", error);
showMessage(error.message, true);
}
}

async function getUserData(targetUserId) {
if (_userCache[targetUserId]) return _userCache[targetUserId];
try {
const userDocRef = doc(db, `artifacts/${appId}/public/data/users`, targetUserId);
const userDocSnap = await getDoc(userDocRef);
if (userDocSnap.exists()) {
const fetchedData = userDocSnap.data();
_userCache[targetUserId] = {id: targetUserId, ...fetchedData};
return {id: targetUserId, ...fetchedData};
}
} catch (error) {
console.error("Error fetching user data:", error);
}
return { id: targetUserId, username: 'Unknown User', avatarUrl: null, hasPerks: false, hasPerksPlus: false };
}

// MODIFIED: Added a data-user-id attribute to the container for real-time status updates.
function createAvatarHTML(userData, withDecorationId = null) {
const avatarUrl = userData.avatarUrl || 'https://i.pravatar.cc/96';
const status = getUserEffectiveStatus(userData);

const avatarImageHTML = `<div class="avatar-image" style="background-image: url('${avatarUrl}');"></div>`;

let decorationHTML = '';
const decorationId = withDecorationId ?? userData.equippedDecoration;
if (decorationId && DECORATIONS[decorationId]) {
decorationHTML = `<img src="${DECORATIONS[decorationId].url}" class="avatar-decoration-overlay">`;
}

const statusIndicatorHTML = `<div class="status-indicator status-${status}"></div>`;

return `<div class="avatar-container" data-user-id="${userData.id}">${avatarImageHTML}${decorationHTML}${statusIndicatorHTML}</div>`;
}

imageUploadBtn.addEventListener('click', () => imageUploadInput.click());
imageUploadInput.addEventListener('change', (e) => {
const file = e.target.files[0];
if (!file) return;
if (!file.type.startsWith('image/')) return showMessage('Please upload only image files.', true);
if (file.size > 900 * 1024) return showMessage('Image is too large. Please choose a file under 900KB.', true);
uploadImageAsBase64(file);
imageUploadInput.value = '';
});

function uploadImageAsBase64(file, callback) {
if (!currentChatId || !currentChatType || !username) return showMessage("Please select a chat and set a username before uploading.", true);

const reader = new FileReader();
reader.readAsDataURL(file);
uploadStatus.textContent = "Processing image...";
uploadStatus.classList.remove('hidden');
sendButton.disabled = true;
imageUploadBtn.disabled = true;

reader.onload = () => {
if(callback) {
callback(reader.result);
} else {
sendMessage('', reader.result);
}
uploadStatus.classList.add('hidden');
sendButton.disabled = false;
imageUploadBtn.disabled = false;
};

reader.onerror = (error) => {
console.error("File Reader Error:", error);
showMessage("Failed to process the image.", true);
uploadStatus.classList.add('hidden');
sendButton.disabled = false;
imageUploadBtn.disabled = false;
};
}

function renderMessageWithMentions(text) {
const escapedText = text.replace(/</g, "&lt;").replace(/>/g, "&gt;");
const mentionRegex = /@(\w+)/g;
return escapedText.replace(mentionRegex, '<span class="mention">@$1</span>');
}

function initializeEmojiPicker() {
emojiPicker.innerHTML = '';
const orderedCategories = ["Smileys & People", "Animals & Nature", "Food & Drink", "Travel & Places", "Objects", "Symbols"];

orderedCategories.forEach(category => {
if (emojiDataByCategory[category]) {
const categoryTitle = document.createElement('div');
categoryTitle.className = 'emoji-picker-category-title';
categoryTitle.textContent = category;
emojiPicker.appendChild(categoryTitle);

emojiDataByCategory[category].forEach(emoji => {
const emojiSpan = document.createElement('span');
emojiSpan.className = 'emoji';
emojiSpan.textContent = emoji.unicode;
emojiSpan.title = `:${emoji.shortcode}:`;
emojiSpan.addEventListener('click', () => {
messageInput.value += emoji.unicode;
emojiPicker.classList.add('hidden');
messageInput.focus();
});
emojiPicker.appendChild(emojiSpan);
});
}
});
}

async function createMessageElement(messageData) {
const messageWrapper = document.createElement('div');
messageWrapper.className = 'message-wrapper flex gap-3 items-start';
messageWrapper.dataset.messageId = messageData.id;

const userData = await getUserData(messageData.userId);

const avatarContainer = document.createElement('div');
avatarContainer.className = 'message-avatar-container';
avatarContainer.innerHTML = createAvatarHTML(userData);
messageWrapper.appendChild(avatarContainer);

const contentWrapper = document.createElement('div');
contentWrapper.className = 'message-content-wrapper flex-grow';

const header = document.createElement('div');
header.className = 'message-header';

const usernameSpan = document.createElement('span');
usernameSpan.className = 'message-username';
usernameSpan.textContent = userData.username || '...loading';
usernameSpan.onclick = () => showUserProfile(messageData.userId);
header.appendChild(usernameSpan);

const timestampSpan = document.createElement('span');
timestampSpan.className = 'message-timestamp';
const date = messageData.timestamp ? new Date(messageData.timestamp.toDate()) : new Date();
timestampSpan.textContent = date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
header.appendChild(timestampSpan);

if (messageData.isEdited) {
const editedIndicator = document.createElement('span');
editedIndicator.className = 'message-edited-indicator';
editedIndicator.textContent = '(edited)';
header.appendChild(editedIndicator);
}

contentWrapper.appendChild(header);

if (messageData.replyToMessageId && messageData.replyToUsername) {
const replyContext = document.createElement('div');
replyContext.className = 'reply-context';
replyContext.innerHTML = `Replying to <strong>${messageData.replyToUsername}</strong>: <span>${messageData.replyToTextSnippet || '...'}</span>`;
contentWrapper.appendChild(replyContext);
}

const messageTextContent = document.createElement('div');
messageTextContent.className = 'message-text-content';

if (messageData.text) {
const textP = document.createElement('p');
textP.innerHTML = renderMessageWithMentions(messageData.text);
messageTextContent.appendChild(textP);
}
if (messageData.imageUrl) {
const imageEl = document.createElement('img');
imageEl.src = messageData.imageUrl;
imageEl.className = 'message-image';
imageEl.alt = 'User uploaded image';
imageEl.onclick = () => window.open(messageData.imageUrl, '_blank');
messageTextContent.appendChild(imageEl);
}
contentWrapper.appendChild(messageTextContent);
messageWrapper.appendChild(contentWrapper);

const actions = document.createElement('div');
actions.className = 'message-actions';

const replyBtn = document.createElement('button');
replyBtn.className = 'message-action-btn';
replyBtn.title = 'Reply';
replyBtn.innerHTML = `<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M7.707 3.293a1 1 0 010 1.414L5.414 7H11a7 7 0 017 7v2a1 1 0 11-2 0v-2a5 5 0 00-5-5H5.414l2.293 2.293a1 1 0 11-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>`;
replyBtn.onclick = () => startReply(messageData);
actions.appendChild(replyBtn);

if (messageData.userId === userId) {
const editBtn = document.createElement('button');
editBtn.className = 'message-action-btn';
editBtn.title = 'Edit';
editBtn.innerHTML = `<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"></path><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd"></path></svg>`;
editBtn.onclick = () => startEdit(messageData.id, messageTextContent, messageData.text);
actions.appendChild(editBtn);

const deleteBtn = document.createElement('button');
deleteBtn.className = 'message-action-btn';
deleteBtn.title = 'Delete';
deleteBtn.innerHTML = `<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z" clip-rule="evenodd"></path></svg>`;
deleteBtn.onclick = () => deleteMessage(messageData.id);
actions.appendChild(deleteBtn);
}
messageWrapper.appendChild(actions);

return messageWrapper;
}

async function displayMessage(messageData) {
if (editingMessageId === messageData.id) return;
const messageElement = await createMessageElement(messageData);
messagesArea.appendChild(messageElement);
}

async function sendMessage(text = messageInput.value.trim(), imageUrl = null) {
if (text === '' && !imageUrl) return;
if (!auth.currentUser || !username) return showMessage("Authentication/username not ready.", true);
if (!currentChatId || !currentChatType) return showMessage("Please select a chat.", true);

if (currentChatType === 'channel' && currentChatId !== 'everyone' && !isCurrentUserMember) {
return showMessage("You must join the channel to send messages.", true);
}

let messagesCollectionRef;
if (currentChatType === 'channel' || currentChatType === 'dm') {
messagesCollectionRef = collection(db, `artifacts/${appId}/public/data/channels/${currentChatId}/messages`);
} else {
return; // Should not happen
}

const messagePayload = {
userId: userId,
username: username,
timestamp: serverTimestamp(),
isEdited: false
};
if (text) messagePayload.text = text;
if (imageUrl) messagePayload.imageUrl = imageUrl;

if (replyingToMessage) {
messagePayload.replyToMessageId = replyingToMessage.id;
messagePayload.replyToUsername = replyingToMessage.username;
messagePayload.replyToTextSnippet = (replyingToMessage.text || 'Image').substring(0, 50);
}

try {
await addDoc(messagesCollectionRef, messagePayload);
messageInput.value = '';
cancelReply();
if (currentChatType === 'dm') {
const otherUserId = currentChatId.replace(userId, '').replace('_', '');
const userDmRef = doc(db, `artifacts/${appId}/public/data/users/${userId}/dms`, otherUserId);
const otherUserDmRef = doc(db, `artifacts/${appId}/public/data/users/${otherUserId}/dms`, userId);

// Fetch the recipient's presence data to see if they are in the chat
const otherUserStatusRef = ref(rtdb, `/status/${otherUserId}`);
const otherUserStatusSnap = await get(otherUserStatusRef);
let shouldIncrement = true;

if (otherUserStatusSnap.exists()) {
const otherUserData = otherUserStatusSnap.val();
// If their active chat is this DM, don't increment unread count
if (otherUserData.activeChatId === currentChatId) {
shouldIncrement = false;
}
}

// Update sender's record
await setDoc(userDmRef, { targetUserId: otherUserId, lastMessageAt: serverTimestamp() }, { merge: true });

// Prepare and update recipient's record
const otherUserPayload = {
targetUserId: userId,
lastMessageAt: serverTimestamp()
};

if (shouldIncrement) {
otherUserPayload.unreadCount = increment(1);
}

await setDoc(otherUserDmRef, otherUserPayload, { merge: true });
}
updateQuestProgress('sendMessage', 1); // Quest progress update
} catch (error) {
console.error("Error sending message:", error);
showMessage(`Error sending message: ${error.message}`, true);
}
}


async function getOrCreateUsername() {
try {
const userData = await getUserData(userId);
if (userData && userData.username) {
username = userData.username;
} else {
usernameModal.classList.remove('hidden');
usernameInput.focus();
}
} catch (error) {
showMessage("Error loading user data.", true);
}
}

usernameForm.addEventListener('submit', async (e) => {
e.preventDefault();
const desiredUsername = usernameInput.value.trim();
usernameError.classList.add('hidden');
if (desiredUsername.length < 3 || desiredUsername.length > 20) {
usernameError.textContent = "Username must be 3-20 characters.";
return usernameError.classList.remove('hidden');
}
try {
const q = query(collection(db, `artifacts/${appId}/public/data/users`), where("username", "==", desiredUsername));
const querySnapshot = await getDocs(q);
if (!querySnapshot.empty) {
usernameError.textContent = "Username is taken.";
return usernameError.classList.remove('hidden');
}
const userDocRef = doc(db, `artifacts/${appId}/public/data/users`, userId);
await setDoc(userDocRef, { username: desiredUsername }, { merge: true });
username = desiredUsername;
_userCache[userId] = { id: userId, username: desiredUsername };
showMessage(`Username "${username}" set!`);
usernameModal.classList.add('hidden');
listenForChannels();
listenForDMs();
listenForFriendRequests();
initializeQuests(); // Initialize quests system
} catch (error) {
showMessage(`Error setting username: ${error.message}`, true);
}
});

let unsubscribeMessages = null;
function listenForMessages() {
if (unsubscribeMessages) unsubscribeMessages();
if (!db || !currentChatId || !currentChatType || !username) {
messagesArea.innerHTML = '<div class="text-center text-9a9aab">Select a chat to begin.</div>';
return loadingMessages.classList.add('hidden');
}
let messagesCollectionRef;
if (currentChatType === 'channel') {
messagesCollectionRef = collection(db, `artifacts/${appId}/public/data/channels/${currentChatId}/messages`);
} else if (currentChatType === 'dm') {
messagesCollectionRef = collection(db, `artifacts/${appId}/public/data/channels/${currentChatId}/messages`);
}
const q = query(messagesCollectionRef, orderBy("timestamp"));
loadingMessages.classList.remove('hidden');
messagesArea.innerHTML = '';

let isFirstSnapshot = true;
unsubscribeMessages = onSnapshot(q, async (snapshot) => {
loadingMessages.classList.add('hidden');

if (isFirstSnapshot) {
isFirstSnapshot = false;
const fragment = document.createDocumentFragment();
for (const doc of snapshot.docs) {
const messageData = { id: doc.id, ...doc.data() };
const el = await createMessageElement(messageData);
fragment.appendChild(el);
}
messagesArea.innerHTML = '';
messagesArea.appendChild(fragment);
if (messagesArea.children.length === 0) {
messagesArea.innerHTML = '<div class="text-center text-9a9aab">No messages yet.</div>';
}
messagesArea.scrollTop = messagesArea.scrollHeight;
return;
}

for (const change of snapshot.docChanges()) {
const messageData = { id: change.doc.id, ...change.doc.data() };
const existingMessageEl = messagesArea.querySelector(`.message-wrapper[data-message-id="${messageData.id}"]`);

if (change.type === 'added') {
if (!existingMessageEl) {
await displayMessage(messageData);
messagesArea.scrollTop = messagesArea.scrollHeight;
}
}
if (change.type === 'removed') {
if (existingMessageEl) existingMessageEl.remove();
}
if (change.type === 'modified') {
if (editingMessageId === messageData.id) continue; // Do not update a message currently being edited by the user.
if (existingMessageEl) {
const newElement = await createMessageElement(messageData);
existingMessageEl.replaceWith(newElement);
}
}
}
if (messagesArea.children.length === 1 && messagesArea.firstElementChild.id === 'loading-messages') {
messagesArea.innerHTML = '<div class="text-center text-9a9aab">No messages yet.</div>';
}
}, (error) => { showMessage(`Error fetching messages: ${error.message}`, true); });
}

async function handleChannelClick(channelData) {
if (currentChatId === channelData.id) return;

const { id, name, isPrivate, password } = channelData;
if (!isPrivate || unlockedPrivateChannels.has(id)) {
await switchChat(id, 'channel', name, channelData);
return;
}
const enteredPassword = prompt(`Channel "#${name}" is private. Please enter the password to join:`);
if (enteredPassword === null) return;
if (enteredPassword === password) {
unlockedPrivateChannels.add(id);
showMessage(`Access granted to #${name}!`);
await switchChat(id, 'channel', name, channelData);
} else {
showMessage("Incorrect password.", true);
}
}

let unsubscribeChannels = null;
function listenForChannels() {
if (unsubscribeChannels) unsubscribeChannels();
if (!db || !username) return;
const q = query(collection(db, `artifacts/${appId}/public/data/channels`), orderBy("name"));
loadingChannels.classList.remove('hidden');
channelsList.innerHTML = '';
const everyoneItem = document.createElement('div');
everyoneItem.className = `channel-item`;
everyoneItem.innerHTML = `<svg class="channel-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/><path d="M12 12c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM8 8h8v2H8z"/></svg><span># ${everyoneChannel.name}</span>`;
everyoneItem.dataset.chatId = everyoneChannel.id;
everyoneItem.dataset.chatType = 'channel';
everyoneItem.dataset.chatName = everyoneChannel.name;
everyoneItem.addEventListener('click', () => switchChat(everyoneChannel.id, 'channel', everyoneChannel.name, everyoneChannel));
channelsList.appendChild(everyoneItem);
unsubscribeChannels = onSnapshot(q, (snapshot) => {
loadingChannels.classList.add('hidden');
Array.from(channelsList.children).forEach(child => { if (child.dataset.chatId !== everyoneChannel.id) child.remove(); });
snapshot.forEach((doc) => {
const channelData = { id: doc.id, ...doc.data() };
if (channelData.id === everyoneChannel.id) return;
const channelItem = document.createElement('div');
channelItem.className = `channel-item`;
channelItem.dataset.chatId = channelData.id;
channelItem.dataset.chatType = 'channel';
channelItem.dataset.chatName = channelData.name;
channelItem.dataset.ownerId = channelData.createdBy;
const isPrivate = channelData.isPrivate === true;
const lockIcon = isPrivate ? `<svg class="w-4 h-4 text-yellow-400 ml-auto" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002 2v-6a2 2 0 00-2-2h-.5V5.5A3 3 0 10-6 0V9h6z" clip-rule="evenodd"></path></svg>` : '';
channelItem.innerHTML = `<svg class="channel-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V3a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg><span># ${channelData.name}</span>${lockIcon}`;
channelItem.addEventListener('click', () => handleChannelClick(channelData));
channelsList.appendChild(channelItem);
});
if (!currentChatId) {
switchChat(everyoneChannel.id, 'channel', everyoneChannel.name, everyoneChannel);
} else {
const activeItem = channelsList.querySelector(`.channel-item[data-chat-id="${currentChatId}"]`);
if (activeItem) activeItem.classList.add('active');
}
});
}

let unsubscribeDMs = null;
function listenForDMs() {
if (unsubscribeDMs) unsubscribeDMs();
if (!db || !username) return;
const q = query(collection(db, `artifacts/${appId}/public/data/users/${userId}/dms`), orderBy("lastMessageAt", "desc"));
loadingDMs.classList.remove('hidden');
dmList.innerHTML = '';
unsubscribeDMs = onSnapshot(q, async (snapshot) => {
loadingDMs.classList.add('hidden');
dmList.innerHTML = '';
if (snapshot.empty) {
dmList.innerHTML = '<div class="text-center text-9a9aab text-sm">No DMs yet.</div>';
} else {
for (const docSnap of snapshot.docs) {
const dmData = docSnap.data();
const targetUserId = dmData.targetUserId;
const unreadCount = dmData.unreadCount || 0;
if (targetUserId === userId) continue;

const targetUserData = await getUserData(targetUserId);
const dmItem = document.createElement('div');
dmItem.className = 'dm-item';

let innerHTML = `<div class="dm-icon">${createAvatarHTML(targetUserData)}</div><span>${targetUserData.username || '...'}</span>`;
if (unreadCount > 0) {
innerHTML += `<span class="unread-badge">${unreadCount}</span>`;
}
dmItem.innerHTML = innerHTML;

dmItem.dataset.chatId = getDmChatId(userId, targetUserId);
dmItem.dataset.chatType = 'dm';
dmItem.dataset.chatName = targetUserData.username;
dmItem.addEventListener('click', () => startDm(targetUserId, targetUserData.username));
dmList.appendChild(dmItem);
}
}
if (currentChatType === 'dm') {
const activeItem = document.querySelector(`[data-chat-id="${currentChatId}"][data-chat-type="dm"]`);
if (activeItem) activeItem.classList.add('active');
}
});
}

function getDmChatId(u1, u2) { return [u1, u2].sort().join('_'); }

async function switchChat(chatId, type, chatName, channelData = {}) {
if (currentChatId === chatId && currentChatType === type) return;

// NEW: Update presence with the new active chat ID
if (userId && userId !== 'anonymous') {
const userStatusRef = ref(rtdb, `/status/${userId}/activeChatId`);
set(userStatusRef, chatId);
}

showChatView();
cancelReply();
if (editingMessageId) cancelEdit(editingMessageId);

if (unsubscribeMembers) unsubscribeMembers();
memberListSidebar.classList.add('hidden');
serverSettingsBtn.classList.add('hidden');
chatHeader.classList.remove('no-right-border');
channelDescriptionArea.classList.add('hidden');

currentChatId = chatId;
currentChatType = type;
currentChatName = chatName;

if (type === 'dm') {
isCurrentUserMember = true; // Not applicable for DMs
const otherUserId = chatId.replace(userId, '').replace('_', '');
const userDmRef = doc(db, `artifacts/${appId}/public/data/users/${userId}/dms`, otherUserId);
// Clear unread count when entering the chat
setDoc(userDmRef, { unreadCount: 0 }, { merge: true }).catch(console.error);
} else if (type === 'channel') {
if (chatId === 'everyone') {
isCurrentUserMember = true;
} else {
const memberRef = doc(db, `artifacts/${appId}/public/data/channels/${chatId}/members`, userId);
const memberSnap = await getDoc(memberRef);
isCurrentUserMember = memberSnap.exists();

memberListSidebar.classList.remove('hidden');
chatHeader.classList.add('no-right-border');
listenForChannelMembers(chatId);
if (channelData.description) {
channelDescriptionArea.textContent = channelData.description;
channelDescriptionArea.classList.remove('hidden');
}
if (channelData.createdBy === userId) {
serverSettingsBtn.classList.remove('hidden');
}
}
}

updateChatUIForMembership();

currentChatNameDisplay.textContent = type === 'channel' ? `# ${chatName}` : `@ ${chatName}`;
document.querySelectorAll('.channel-item, .dm-item').forEach(item => item.classList.remove('active'));
const activeItem = document.querySelector(`[data-chat-id="${chatId}"]`);
if (activeItem) activeItem.classList.add('active');
listenForMessages();
messageInput.focus();
}

function updateChatUIForMembership() {
const isChannelView = currentChatType === 'channel' && currentChatId !== 'everyone';
if (isChannelView && !isCurrentUserMember) {
messageInputArea.classList.add('hidden');
joinChannelBar.classList.remove('hidden');
joinChannelButton.textContent = `Join #${currentChatName} to Chat`;
} else {
messageInputArea.classList.remove('hidden');
joinChannelBar.classList.add('hidden');
}
}

async function joinChannel() {
if (currentChatType !== 'channel' || isCurrentUserMember) return;

try {
const memberRef = doc(db, `artifacts/${appId}/public/data/channels/${currentChatId}/members`, userId);
await setDoc(memberRef, {
role: 'member',
username: username,
joinedAt: serverTimestamp()
});
isCurrentUserMember = true;
updateChatUIForMembership();
showMessage(`You have joined #${currentChatName}!`);
updateQuestProgress('joinChannel', 1); // Quest progress update
} catch (error) {
console.error("Error joining channel:", error);
showMessage("Failed to join the channel.", true);
}
}

async function startDm(targetUserId, targetUsername) {
if (targetUserId === userId) return;
const targetUserData = await getUserData(targetUserId);
if (!targetUserData.username) return showMessage(`Cannot DM user. They haven't set a username.`, true);
await switchChat(getDmChatId(userId, targetUserId), 'dm', targetUserData.username);
}

createChannelBtn.addEventListener('click', () => {
if (!username) return showMessage("Set username first.", true);
createChannelModal.classList.remove('hidden');
newChannelNameInput.focus();
});

closeChannelModalBtn.addEventListener('click', () => {
createChannelModal.classList.add('hidden');
createChannelForm.reset();
channelPasswordContainer.classList.add('hidden');
});

createChannelForm.addEventListener('submit', async (e) => {
e.preventDefault();
const channelName = newChannelNameInput.value.trim();
const isPrivate = makePrivateCheckbox.checked;
const channelPassword = newChannelPasswordInput.value.trim();
if (!channelName) return;
if (isPrivate && !channelPassword) return showMessage("A password is required for a private channel.", true);

const channelData = {
name: channelName,
createdAt: serverTimestamp(),
createdBy: userId,
createdByUsername: username,
isPrivate: isPrivate,
description: '',
roles: {}
};
if (isPrivate) channelData.password = channelPassword;

try {
const newChannelRef = await addDoc(collection(db, `artifacts/${appId}/public/data/channels`), channelData);

const memberRef = doc(db, `artifacts/${appId}/public/data/channels/${newChannelRef.id}/members`, userId);
await setDoc(memberRef, { role: 'owner', username: username, joinedAt: serverTimestamp() });

showMessage(`Channel "${channelName}" created!`);
createChannelModal.classList.add('hidden');
createChannelForm.reset();
channelPasswordContainer.classList.add('hidden');
const newChannelSnap = await getDoc(newChannelRef);
await switchChat(newChannelRef.id, 'channel', channelName, {id: newChannelRef.id, ...newChannelSnap.data()});
} catch (error) {
showMessage(`Error creating channel: ${error.message}`, true);
}
});

async function clearEveryoneChannel() {
const confirmation = confirm("Are you sure you want to delete ALL messages from the @everyone channel? This cannot be undone.");
if (!confirmation) return;

showMessage("Clearing messages...", false);
const messagesCollectionRef = collection(db, `artifacts/${appId}/public/data/channels/everyone/messages`);
try {
const querySnapshot = await getDocs(messagesCollectionRef);
const deletePromises = [];
querySnapshot.forEach(doc => {
deletePromises.push(deleteDoc(doc.ref));
});
await Promise.all(deletePromises);
showMessage("@everyone channel cleared successfully!", false);
} catch (error) {
console.error("Error clearing channel:", error);
showMessage("Failed to clear channel.", true);
}
}

adminClearBtn.addEventListener('click', () => {
const password = prompt("Admin Action: Enter password to clear @everyone channel.");
if (password === "ownerRelic") {
clearEveryoneChannel();
} else if (password !== null) {
showMessage("Incorrect password.", true);
}
});

makePrivateCheckbox.addEventListener('change', () => {
channelPasswordContainer.classList.toggle('hidden', !makePrivateCheckbox.checked);
});

async function sendFriendRequest() {
const targetUsername = addFriendInput.value.trim();
if (!targetUsername || targetUsername === username) return;
try {
const q = query(collection(db, `artifacts/${appId}/public/data/users`), where("username", "==", targetUsername));
const querySnapshot = await getDocs(q);
if (querySnapshot.empty) return showMessage("User not found.", true);
let targetUserId;
querySnapshot.forEach(doc => { targetUserId = doc.id; });
const friendRequestRef = doc(db, `artifacts/${appId}/public/data/friendRequests`, `${userId}_${targetUserId}`);
const friendRef = doc(db, `artifacts/${appId}/public/data/users/${userId}/friends`, targetUserId);
const [existingRequest, existingFriend] = await Promise.all([getDoc(friendRequestRef), getDoc(friendRef)]);
if (existingRequest.exists() || existingFriend.exists()) return showMessage("Already friends or request sent.", true);
await setDoc(friendRequestRef, {
fromUserId: userId, fromUsername: username,
toUserId: targetUserId, toUsername: targetUsername,
status: 'pending', createdAt: serverTimestamp()
});
showMessage(`Friend request sent to ${targetUsername}!`);
addFriendInput.value = '';
updateQuestProgress('addFriend', 1); // Quest progress update
} catch (error) { showMessage(`Error: ${error.message}`, true); }
}

async function acceptFriendRequest(requestId, fromUserId, fromUsername) {
try {
await Promise.all([
setDoc(doc(db, `artifacts/${appId}/public/data/users/${userId}/friends`, fromUserId), { userId: fromUserId, username: fromUsername, addedAt: serverTimestamp() }),
setDoc(doc(db, `artifacts/${appId}/public/data/users/${fromUserId}/friends`, userId), { userId: userId, username: username, addedAt: serverTimestamp() }),
deleteDoc(doc(db, `artifacts/${appId}/public/data/friendRequests`, requestId))
]);
showMessage(`You are now friends with ${fromUsername}!`);
} catch (error) { showMessage(`Error: ${error.message}`, true); }
}

async function declineFriendRequest(requestId) {
try {
await deleteDoc(doc(db, `artifacts/${appId}/public/data/friendRequests`, requestId));
showMessage("Friend request declined.");
} catch (error) { showMessage(`Error: ${error.message}`, true); }
}

let unsubscribeFriendRequests = null;
function listenForFriendRequests() {
if (unsubscribeFriendRequests) unsubscribeFriendRequests();
if (!db || !username) return;
const q = query(collection(db, `artifacts/${appId}/public/data/friendRequests`), where("toUserId", "==", userId), where("status", "==", "pending"));
unsubscribeFriendRequests = onSnapshot(q, (snapshot) => {
friendRequestsList.innerHTML = '';
if (snapshot.empty) {
friendRequestsList.innerHTML = '<div class="text-center text-9a9aab text-sm">No pending requests.</div>';
} else {
snapshot.forEach((doc) => {
const requestData = doc.data();
const requestItem = document.createElement('div');
requestItem.className = 'friend-request-item';
requestItem.innerHTML = `<div class="friend-request-header"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"/></svg><span>${requestData.fromUsername}</span></div><div class="friend-request-actions"><button class="friend-request-btn accept" onclick="window.acceptFriendRequest('${doc.id}', '${requestData.fromUserId}', '${requestData.fromUsername}')">Accept</button><button class="friend-request-btn decline" onclick="window.declineFriendRequest('${doc.id}')">Decline</button></div>`;
friendRequestsList.appendChild(requestItem);
});
}
});
}

async function getCombinedRoles(channelId) {
const staticRoles = JSON.parse(JSON.stringify(ROLES));
const channelRef = doc(db, `artifacts/${appId}/public/data/channels`, channelId);
const channelSnap = await getDoc(channelRef);
if (channelSnap.exists() && channelSnap.data().roles) {
const customRoles = channelSnap.data().roles;
return { ...staticRoles, ...customRoles };
}
return staticRoles;
}

async function listenForChannelMembers(channelId) {
if (unsubscribeMembers) unsubscribeMembers();

const combinedRoles = await getCombinedRoles(channelId);

const membersQuery = query(collection(db, `artifacts/${appId}/public/data/channels/${channelId}/members`), orderBy('username'));
unsubscribeMembers = onSnapshot(membersQuery, async (snapshot) => {
const membersByRole = {};
Object.keys(combinedRoles).forEach(roleId => {
membersByRole[roleId] = [];
});

for (const memberDoc of snapshot.docs) {
const memberData = memberDoc.data();
const userData = await getUserData(memberDoc.id);
const roleId = memberData.role || 'member';

if (membersByRole[roleId]) {
membersByRole[roleId].push({ id: memberDoc.id, ...memberData, ...userData });
} else {
if (!membersByRole['member']) membersByRole['member'] = [];
membersByRole['member'].push({ id: memberDoc.id, ...memberData, ...userData, role: 'member' });
}
}

memberListContent.innerHTML = '';
const sortedRoleIds = Object.keys(combinedRoles).sort((a, b) => (combinedRoles[a]?.order || 99) - (combinedRoles[b]?.order || 99));

sortedRoleIds.forEach(roleId => {
const members = membersByRole[roleId];
if (members && members.length > 0) {
const roleInfo = combinedRoles[roleId];
const groupTitle = document.createElement('h4');
groupTitle.className = 'role-group-title';
groupTitle.textContent = `${roleInfo.name} - ${members.length}`;
groupTitle.style.color = roleInfo.color;
memberListContent.appendChild(groupTitle);

members.forEach(member => {
const memberItem = document.createElement('div');
memberItem.className = 'member-item';
memberItem.innerHTML = `
<div class="member-avatar-container">${createAvatarHTML(member)}</div>
<span class="member-username" style="color: ${roleInfo.color}">${member.username}</span>
`;
memberItem.onclick = () => showUserProfile(member.id);
memberListContent.appendChild(memberItem);
});
}
});
});
}

async function openServerSettings() {
if (!currentChatId || currentChatType !== 'channel') return;

const channelDocRef = doc(db, `artifacts/${appId}/public/data/channels`, currentChatId);
const channelSnap = await getDoc(channelDocRef);
if (!channelSnap.exists()) return showMessage("Channel not found.", true);

const channelData = channelSnap.data();
serverSettingsName.value = channelData.name;
serverSettingsDescription.value = channelData.description || '';

populateCustomRolesList(channelData.roles);
await populateRoleManagementList(currentChatId, channelData.roles);

serverSettingsModal.classList.remove('hidden');
}

function populateCustomRolesList(channelRoles = {}) {
customRolesList.innerHTML = '';
if (Object.keys(channelRoles).length === 0) {
customRolesList.innerHTML = '<p class="text-sm text-center text-9a9aab">No custom roles created yet.</p>';
return;
}

Object.keys(channelRoles).sort((a,b) => channelRoles[a].order - channelRoles[b].order).forEach(roleId => {
const roleData = channelRoles[roleId];
const roleItem = document.createElement('div');
roleItem.className = 'flex items-center justify-between p-2 bg-[#24243e] rounded';

roleItem.innerHTML = `
<div class="flex items-center gap-2">
<div class="w-4 h-4 rounded-full" style="background-color: ${roleData.color};"></div>
<span class="font-medium text-e0e0e0">${roleData.name}</span>
</div>
<button data-role-id="${roleId}" class="delete-role-btn text-red-500 hover:text-red-400">&times;</button>
`;
customRolesList.appendChild(roleItem);
});

document.querySelectorAll('.delete-role-btn').forEach(btn => {
btn.addEventListener('click', async (e) => {
const roleIdToDelete = e.target.dataset.roleId;
if (confirm("Are you sure you want to delete this role? Members with this role will be reassigned to 'Member'.")) {
await deleteRole(roleIdToDelete);
}
});
});
}

async function populateRoleManagementList(channelId, channelRoles = {}) {
serverMembersList.innerHTML = '<div class="text-sm text-9a9aab text-center">Loading members...</div>';
const membersQuery = query(collection(db, `artifacts/${appId}/public/data/channels/${channelId}/members`), orderBy('username'));
const membersSnapshot = await getDocs(membersQuery);

const assignableRoles = { moderator: ROLES.moderator, ...channelRoles };

serverMembersList.innerHTML = '';
membersSnapshot.forEach(memberDoc => {
const memberData = memberDoc.data();
if (memberData.role === 'owner') return;

const item = document.createElement('div');
item.className = 'role-management-item';

const usernameSpan = document.createElement('span');
usernameSpan.textContent = memberData.username;
item.appendChild(usernameSpan);

const select = document.createElement('select');
select.className = 'role-select';

const memberOption = document.createElement('option');
memberOption.value = 'member';
memberOption.textContent = 'Member';
select.appendChild(memberOption);

Object.keys(assignableRoles).sort((a,b) => assignableRoles[a].order - assignableRoles[b].order).forEach(roleId => {
const roleData = assignableRoles[roleId];
const option = document.createElement('option');
option.value = roleId;
option.textContent = roleData.name;
select.appendChild(option);
});

select.value = memberData.role || 'member';
select.onchange = () => updateUserRole(channelId, memberDoc.id, select.value);

item.appendChild(select);
serverMembersList.appendChild(item);
});
}

async function updateUserRole(channelId, targetUserId, newRole) {
const memberRef = doc(db, `artifacts/${appId}/public/data/channels/${channelId}/members`, targetUserId);
try {
await updateDoc(memberRef, { role: newRole });
showMessage("User role updated successfully.");
} catch (error) {
showMessage("Failed to update role.", true);
console.error(error);
}
}

async function deleteRole(roleIdToDelete) {
const channelRef = doc(db, `artifacts/${appId}/public/data/channels`, currentChatId);
try {
await runTransaction(db, async (transaction) => {
const membersRef = collection(db, `artifacts/${appId}/public/data/channels/${currentChatId}/members`);
const q = query(membersRef, where("role", "==", roleIdToDelete));
const membersToUpdateSnap = await getDocs(q);

membersToUpdateSnap.forEach(memberDoc => {
transaction.update(memberDoc.ref, { role: 'member' });
});

transaction.update(channelRef, {
[`roles.${roleIdToDelete}`]: deleteField()
});
});

showMessage("Role deleted successfully.");
await openServerSettings();
} catch (error) {
showMessage("Failed to delete role.", true);
console.error(error);
}
}

serverSettingsForm.addEventListener('submit', async (e) => {
e.preventDefault();
const newName = serverSettingsName.value.trim();
const newDescription = serverSettingsDescription.value.trim();
if (!newName) return;

const channelDocRef = doc(db, `artifacts/${appId}/public/data/channels`, currentChatId);
try {
await updateDoc(channelDocRef, {
name: newName,
description: newDescription
});
showMessage("Channel settings saved!");
currentChatNameDisplay.textContent = `# ${newName}`;
if (newDescription) {
channelDescriptionArea.textContent = newDescription;
channelDescriptionArea.classList.remove('hidden');
} else {
channelDescriptionArea.classList.add('hidden');
}
serverSettingsModal.classList.add('hidden');
} catch (error) {
showMessage("Failed to save settings.", true);
}
});

serverSettingsBtn.addEventListener('click', openServerSettings);
closeServerSettingsModalBtn.addEventListener('click', () => serverSettingsModal.classList.add('hidden'));

function renderStatusSelection(currentManualStatus) {
const statuses = {
online: { label: 'Online', desc: 'Automatic presence', icon: 'status-online' },
dnd: { label: 'Do Not Disturb', desc: 'You won\'t get notifications', icon: 'status-dnd' },
idle: { label: 'Idle', desc: 'idk what this does', icon: 'status-idle' },
offline: { label: 'Invisible', desc: 'Appear offline to others', icon: 'status-offline' },
};
statusSelectionContainer.innerHTML = '';
Object.entries(statuses).forEach(([key, value]) => {
const isChecked = (key === 'online' && !currentManualStatus) || key === currentManualStatus;
const item = document.createElement('label');
item.className = 'flex flex-col items-center gap-2 cursor-pointer p-2 rounded-lg transition-colors hover:bg-[#3a3a5e]';
if (isChecked) item.classList.add('bg-[#4a4a6e]');
item.innerHTML = `
<div class="relative w-8 h-8 rounded-full bg-[#9a9aab]">
<div class="status-indicator ${value.icon}" style="width: 100%; height: 100%; border-width: 3px;"></div>
</div>
<span class="text-sm font-medium">${value.label}</span>
<input type="radio" name="status-option" value="${key}" class="hidden" ${isChecked ? 'checked' : ''}>
`;
item.addEventListener('change', () => {
document.querySelectorAll('#status-selection-container label').forEach(l => l.classList.remove('bg-[#4a4a6e]'));
item.classList.add('bg-[#4a4a6e]');
handleStatusChange(key);
});
statusSelectionContainer.appendChild(item);
});
}

function updateUsernameChangeUI(lastChangeTimestamp) {
settingsUsernameInput.disabled = false;
settingsUsernameBtn.disabled = false;
settingsUsernameInput.value = '';

if (!lastChangeTimestamp) {
usernameChangeStatus.textContent = "You can change your username once every 24 hours.";
return;
}

const cooldownMillis = 24 * 60 * 60 * 1000;
const lastChangeMillis = lastChangeTimestamp.toDate().getTime();
const nowMillis = Date.now();
const elapsedMillis = nowMillis - lastChangeMillis;

if (elapsedMillis < cooldownMillis) {
settingsUsernameInput.disabled = true;
settingsUsernameBtn.disabled = true;

const remainingMillis = cooldownMillis - elapsedMillis;
const remainingHours = Math.floor(remainingMillis / (1000 * 60 * 60));
const remainingMinutes = Math.floor((remainingMillis % (1000 * 60 * 60)) / (1000 * 60));

usernameChangeStatus.textContent = `You can change your username again in ${remainingHours}h ${remainingMinutes}m.`;
} else {
usernameChangeStatus.textContent = "You are eligible to change your username again.";
}
}

async function handleChangeUsername() {
const newUsername = settingsUsernameInput.value.trim();

if (newUsername.length < 3 || newUsername.length > 20) {
return showMessage("Username must be between 3 and 20 characters.", true);
}
if (newUsername === username) {
return showMessage("This is already your username.", true);
}

settingsUsernameBtn.disabled = true;
settingsUsernameBtn.textContent = 'Checking...';

try {
const userDocRef = doc(db, `artifacts/${appId}/public/data/users`, userId);
const userDocSnap = await getDoc(userDocRef);
const userData = userDocSnap.data() || {};

if (userData.lastUsernameChangeAt) {
const cooldownMillis = 24 * 60 * 60 * 1000;
const elapsedMillis = Date.now() - userData.lastUsernameChangeAt.toDate().getTime();
if (elapsedMillis < cooldownMillis) {
showMessage("Cooldown period is still active.", true);
updateUsernameChangeUI(userData.lastUsernameChangeAt);
return;
}
}

const q = query(collection(db, `artifacts/${appId}/public/data/users`), where("username", "==", newUsername));
const querySnapshot = await getDocs(q);
if (!querySnapshot.empty) {
return showMessage("That username is already taken.", true);
}

await setDoc(userDocRef, {
username: newUsername,
lastUsernameChangeAt: serverTimestamp()
}, { merge: true });

username = newUsername;
delete _userCache[userId];
showMessage("Username changed successfully!");

const updatedDocSnap = await getDoc(userDocRef);
updateUsernameChangeUI(updatedDocSnap.data().lastUsernameChangeAt);

} catch (error) {
console.error("Error changing username:", error);
showMessage(`An error occurred: ${error.message}`, true);
} finally {
settingsUsernameBtn.disabled = false;
settingsUsernameBtn.textContent = 'Change';
}
}

function renderPerksStatus(hasPerks) {
if (hasPerks) {
perksStatusContainer.innerHTML = `<p class="text-green-400 font-semibold">You have Relicord Perks! Enjoy GIF avatars and banners.</p>`;
} else {
perksStatusContainer.innerHTML = `
<p class="text-9a9aab mb-3">Claim your free Perks to unlock GIF avatars, banners, and more!</p>
<button id="claim-perks-btn" class="bg-pink-500 hover:bg-pink-600 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200">Claim Free Perks</button>
`;
document.getElementById('claim-perks-btn').addEventListener('click', async () => {
try {
const userDocRef = doc(db, `artifacts/${appId}/public/data/users`, userId);
await setDoc(userDocRef, { hasPerks: true }, { merge: true });
delete _userCache[userId];
showMessage('Perks Claimed! You can now use GIFs.');
renderPerksStatus(true);
} catch (error) {
showMessage(`Error claiming perks: ${error.message}`, true);
}
});
}
}

async function renderDecorationSection() {
decorationsListContainer.innerHTML = '';
const userData = await getUserData(userId);

for (const [id, decoData] of Object.entries(DECORATIONS)) {
const item = document.createElement('div');
item.className = 'decoration-item';

const previewContainer = document.createElement('div');
previewContainer.className = 'decoration-preview-container';
previewContainer.innerHTML = createAvatarHTML(userData, id);

const infoDiv = document.createElement('div');
infoDiv.className = 'decoration-info';
infoDiv.innerHTML = `<h5>${decoData.name}</h5><p>${decoData.description}</p>`;

const actionButton = document.createElement('button');
actionButton.className = 'decoration-action-btn';

const claimed = userData.claimedDecorations?.includes(id);
const equipped = userData.equippedDecoration === id;

if (equipped) {
actionButton.textContent = 'Equipped';
actionButton.disabled = true;
} else if (claimed) {
actionButton.textContent = 'Equip';
actionButton.classList.add('equip');
actionButton.onclick = () => equipDecoration(id);
} else {
actionButton.textContent = 'Claim';
actionButton.classList.add('claim');
actionButton.onclick = () => claimDecoration(id);
}
item.append(previewContainer, infoDiv, actionButton);
decorationsListContainer.appendChild(item);
}
}

async function claimDecoration(decorationId) {
const userDocRef = doc(db, `artifacts/${appId}/public/data/users`, userId);
try {
await setDoc(userDocRef, { claimedDecorations: arrayUnion(decorationId) }, { merge: true });
delete _userCache[userId];
showMessage(`"${DECORATIONS[decorationId].name}" claimed!`);
renderDecorationSection();
} catch (error) { showMessage('Failed to claim decoration.', true); }
}

async function equipDecoration(decorationId) {
const userDocRef = doc(db, `artifacts/${appId}/public/data/users`, userId);
try {
await setDoc(userDocRef, { equippedDecoration: decorationId }, { merge: true });
delete _userCache[userId];
showMessage(`"${DECORATIONS[decorationId].name}" equipped!`);
const userData = await getUserData(userId);
renderDecorationSection();
settingsAvatarPreviewContainer.innerHTML = createAvatarHTML(userData);
} catch (error) { showMessage('Failed to equip decoration.', true); }
}

settingsBtn.addEventListener('click', async () => {
if (!userId) return;
const userData = await getUserData(userId);

settingsAvatarPreviewContainer.innerHTML = createAvatarHTML(userData);
settingsBannerPreview.style.backgroundImage = userData.bannerUrl ? `url(${userData.bannerUrl})` : 'none';
settingsDescriptionInput.value = userData.description || '';

renderStatusSelection(userData.manualStatus);
updateUsernameChangeUI(userData.lastUsernameChangeAt);
renderPerksStatus(userData.hasPerks);
renderDecorationSection();

newAvatarBase64 = null;
newBannerBase64 = null;
settingsAvatarInput.value = '';
settingsBannerInput.value = '';

userSettingsModal.classList.remove('hidden');
});

closeSettingsModalBtn.addEventListener('click', () => userSettingsModal.classList.add('hidden'));

async function handleImagePreview(file, isAvatar) {
if (!file) return;

if (isAvatar && file.type === 'image/gif') {
const currentUserData = await getUserData(userId);
if (!currentUserData.hasPerks) {
showMessage("You need Perks to use a GIF. Claim it in your profile settings!", true);
settingsAvatarInput.value = '';
return;
}
}

if (!file.type.startsWith('image/')) return showMessage('Please upload only image files.', true);
if (file.size > 900 * 1024) return showMessage('Image is too large. Please choose a file under 900KB.', true);

const reader = new FileReader();
reader.onload = async e => {
if (isAvatar) {
const userData = await getUserData(userId);
const tempUserData = { ...userData, avatarUrl: e.target.result };
settingsAvatarPreviewContainer.innerHTML = createAvatarHTML(tempUserData);
newAvatarBase64 = e.target.result;
} else {
settingsBannerPreview.style.backgroundImage = `url(${e.target.result})`;
newBannerBase64 = e.target.result;
}
};
reader.readAsDataURL(file);
}

settingsAvatarInput.addEventListener('change', (e) => handleImagePreview(e.target.files[0], true));
settingsBannerInput.addEventListener('change', (e) => handleImagePreview(e.target.files[0], false));

userSettingsForm.addEventListener('submit', async (e) => {
e.preventDefault();
const description = settingsDescriptionInput.value.trim();
const updateData = { description };

if (newAvatarBase64) updateData.avatarUrl = newAvatarBase64;
if (newBannerBase64) updateData.bannerUrl = newBannerBase64;

try {
const userDocRef = doc(db, `artifacts/${appId}/public/data/users`, userId);
await setDoc(userDocRef, updateData, { merge: true });

delete _userCache[userId];

showMessage('Profile saved successfully!');
userSettingsModal.classList.add('hidden');
} catch (error) {
showMessage(`Error updating profile: ${error.message}`, true);
}
});

async function showUserProfile(targetUserId) {
const userData = await getUserData(targetUserId);

userProfileBanner.style.backgroundImage = userData.bannerUrl ? `url(${userData.bannerUrl})` : 'none';
userProfileBanner.style.backgroundColor = userData.bannerUrl ? 'transparent' : '#6a11cb';

userProfileAvatarContainer.innerHTML = createAvatarHTML(userData);

userProfileUsername.textContent = userData.username || 'Unknown User';
userProfileDescription.textContent = userData.description || 'This user is mysterious. They have no description.';

// --- MODIFIED BADGE LOGIC ---
if (userData.hasPerksPlus) {
userProfilePerksPlusBadge.classList.remove('hidden');
userProfilePerksBadge.classList.add('hidden');
} else if (userData.hasPerks) {
userProfilePerksPlusBadge.classList.add('hidden');
userProfilePerksBadge.classList.remove('hidden');
} else {
userProfilePerksPlusBadge.classList.add('hidden');
userProfilePerksBadge.classList.add('hidden');
}
// --- END MODIFIED BADGE LOGIC ---

userProfileDmBtn.onclick = () => {
startDm(targetUserId, userData.username);
userProfileModal.classList.add('hidden');
};

userProfileModal.classList.remove('hidden');
}

userProfileModal.addEventListener('click', (e) => {
if (e.target === userProfileModal) {
userProfileModal.classList.add('hidden');
}
});

// --- VIEW MANAGEMENT ---

function getYoutubeEmbedUrl(url) {
let videoId;
try {
const urlObj = new URL(url);
if (urlObj.hostname === 'youtu.be') {
videoId = urlObj.pathname.slice(1);
} else if (urlObj.hostname === 'www.youtube.com' || urlObj.hostname === 'youtube.com') {
videoId = urlObj.searchParams.get('v');
}
return videoId ? `https://www.youtube.com/embed/${videoId}` : null;
} catch(e) { return null; }
}

// CORRECTED FUNCTION
function showClipsView() {
chatContainer.classList.add('hidden');
questsContainer.classList.add('hidden');
postsContainer.classList.add('hidden'); // Fix: Hide posts container
clipsContainer.classList.remove('hidden');

document.querySelectorAll('.channel-item, .dm-item').forEach(el => el.classList.remove('active'));
questsNavItem.classList.remove('active');
postsNavItem.classList.remove('active'); // Fix: Deactivate posts button
clipsNavItem.classList.add('active');

if (unsubscribePosts) { unsubscribePosts(); unsubscribePosts = null; } // Cleanup posts listener
if (!unsubscribeClips) {
listenForClips();
}
}

// CORRECTED FUNCTION
function showQuestsView() {
chatContainer.classList.add('hidden');
clipsContainer.classList.add('hidden');
postsContainer.classList.add('hidden'); // Fix: Hide posts container
questsContainer.classList.remove('hidden');

document.querySelectorAll('.channel-item, .dm-item').forEach(el => el.classList.remove('active'));
clipsNavItem.classList.remove('active');
postsNavItem.classList.remove('active'); // Fix: Deactivate posts button
questsNavItem.classList.add('active');

if (unsubscribeClips) { unsubscribeClips(); unsubscribeClips = null; }
if (unsubscribePosts) { unsubscribePosts(); unsubscribePosts = null; } // Cleanup posts listener
activeCommentListeners.forEach(unsub => unsub());
activeCommentListeners.clear();

renderQuests();
}

// NEW FUNCTION
function showPostsView() {
chatContainer.classList.add('hidden');
questsContainer.classList.add('hidden');
clipsContainer.classList.add('hidden');
postsContainer.classList.remove('hidden');

document.querySelectorAll('.channel-item, .dm-item').forEach(el => el.classList.remove('active'));
questsNavItem.classList.remove('active');
clipsNavItem.classList.remove('active');
postsNavItem.classList.add('active');

if (unsubscribeClips) { unsubscribeClips(); unsubscribeClips = null; }
activeCommentListeners.forEach(unsub => unsub());
activeCommentListeners.clear();

if (!unsubscribePosts) {
listenForPosts();
}
}

// CORRECTED FUNCTION
function showChatView() {
clipsContainer.classList.add('hidden');
questsContainer.classList.add('hidden');
postsContainer.classList.add('hidden'); // Fix: Hide posts container
chatContainer.classList.remove('hidden');

clipsNavItem.classList.remove('active');
questsNavItem.classList.remove('active');
postsNavItem.classList.remove('active'); // Fix: Deactivate posts button

if (unsubscribeClips) { unsubscribeClips(); unsubscribeClips = null; }
if (unsubscribePosts) { unsubscribePosts(); unsubscribePosts = null; } // Cleanup posts listener
activeCommentListeners.forEach(unsub => unsub());
activeCommentListeners.clear();
}

// --- CLIPS & VIDEO PLAYER ---

function initializeCustomPlayer(playerWrapper) {
const video = playerWrapper.querySelector('.video-player-element');
const playPauseBtn = playerWrapper.querySelector('.play-pause-btn');
const progressRange = playerWrapper.querySelector('.progress-range');
const progressBar = playerWrapper.querySelector('.progress-bar');
const currentTimeEl = playerWrapper.querySelector('.current-time');
const totalTimeEl = playerWrapper.querySelector('.total-time');
const volumeBtn = playerWrapper.querySelector('.volume-btn');
const volumeRange = playerWrapper.querySelector('.volume-range');
const volumeBar = playerWrapper.querySelector('.volume-bar');
const fullscreenBtn = playerWrapper.querySelector('.fullscreen-btn');

function formatTime(seconds) {
if (isNaN(seconds)) return '0:00';
const min = Math.floor(seconds / 60);
const sec = Math.floor(seconds % 60);
return `${min}:${sec < 10 ? '0' : ''}${sec}`;
}

function updateProgress() {
progressBar.style.width = `${(video.currentTime / video.duration) * 100}%`;
currentTimeEl.textContent = formatTime(video.currentTime);
if (video.duration) {
totalTimeEl.textContent = formatTime(video.duration);
}
}

function setProgress(e) {
const newTime = e.offsetX / progressRange.offsetWidth * video.duration;
video.currentTime = newTime;
}

function togglePlay() {
if (video.paused) {
video.play();
} else {
video.pause();
}
}

function updatePlayPauseIcon() {
playerWrapper.classList.toggle('playing', !video.paused);
}

let lastVolume = 1;
function toggleMute() {
if (video.volume) {
lastVolume = video.volume;
video.volume = 0;
volumeBar.style.width = '0%';
} else {
video.volume = lastVolume;
volumeBar.style.width = `${lastVolume * 100}%`;
}
}

function setVolume(e) {
let volume = e.offsetX / volumeRange.offsetWidth;
if (volume < 0.1) volume = 0;
if (volume > 0.9) volume = 1;
video.volume = volume;
volumeBar.style.width = `${volume * 100}%`;
lastVolume = volume;
}

function toggleFullscreen() {
if (!document.fullscreenElement) {
playerWrapper.requestFullscreen().catch(err => {
console.error(`Error attempting to enable full-screen mode: ${err.message} (${err.name})`);
});
} else {
document.exitFullscreen();
}
}

playPauseBtn.addEventListener('click', togglePlay);
video.addEventListener('click', togglePlay);
video.addEventListener('play', updatePlayPauseIcon);
video.addEventListener('pause', updatePlayPauseIcon);
video.addEventListener('timeupdate', updateProgress);
video.addEventListener('canplay', updateProgress);
progressRange.addEventListener('click', setProgress);
volumeBtn.addEventListener('click', toggleMute);
volumeRange.addEventListener('click', setVolume);
fullscreenBtn.addEventListener('click', toggleFullscreen);
}

function listenForClips() {
if (unsubscribeClips) unsubscribeClips();
if (!db) return;

const q = query(collection(db, `artifacts/${appId}/public/data/clips`), orderBy("createdAt", "desc"));
unsubscribeClips = onSnapshot(q, async (snapshot) => {
loadingClips.classList.add('hidden');
clipsFeed.innerHTML = '';

const currentUserData = await getUserData(userId);

if(snapshot.empty) {
clipsFeed.innerHTML = '<div class="text-center text-9a9aab">No clips have been posted yet. Be the first!</div>';
return;
}

for (const doc of snapshot.docs) {
const clipData = { id: doc.id, ...doc.data() };
const uploaderData = await getUserData(clipData.uploaderId);
const hasReported = currentUserData.reportedClips?.includes(clipData.id);

const clipCard = document.createElement('div');
clipCard.className = 'clip-card';
clipCard.dataset.clipId = clipData.id;

let videoElement;
if (clipData.clipType === 'direct' && clipData.videoDataUrl) {
videoElement = `
<div class="custom-video-player">
<video playsinline loop class="video-player-element" src="${clipData.videoDataUrl}"></video>
<div class="video-controls-container">
<button class="play-pause-btn" title="Play/Pause">
<svg class="play-icon icon" viewBox="0 0 24 24"><path fill="currentColor" d="M8 5v14l11-7z"></path></svg>
<svg class="pause-icon icon" viewBox="0 0 24 24"><path fill="currentColor" d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"></path></svg>
</button>
<div class="time-container">
<span class="current-time">0:00</span> / <span class="total-time">0:00</span>
</div>
<div class="progress-range" title="Seek">
<div class="progress-bar"></div>
</div>
<div class="volume-container">
<button class="volume-btn" title="Mute/Unmute">
<svg class="volume-icon icon" viewBox="0 0 24 24"><path fill="currentColor" d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"></path></svg>
</button>
<div class="volume-range" title="Set volume">
<div class="volume-bar"></div>
</div>
</div>
<button class="fullscreen-btn" title="Fullscreen">
<svg class="fullscreen-icon icon" viewBox="0 0 24 24"><path fill="currentColor" d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"></path></svg>
</button>
</div>
</div>
`;
} else {
const embedUrl = getYoutubeEmbedUrl(clipData.videoUrl);
clipCard.dataset.originalUrl = clipData.videoUrl;
videoElement = embedUrl
? `<iframe src="${embedUrl}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`
: `<div style="text-align: center; padding: 20px;">Invalid or unsupported video URL</div>`;
}

clipCard.innerHTML = `
<div class="clip-video-placeholder">${videoElement}</div>
<div class="clip-content">
<div class="clip-header">
<div class="clip-uploader-avatar-container">${createAvatarHTML(uploaderData)}</div>
<div class="clip-title-meta">
<div class="flex justify-between items-start">
<div class="flex-grow">
<h3 class="clip-title">${clipData.title}</h3>
<span class="clip-uploader-name">${clipData.uploaderUsername}</span>
</div>
<button class="clip-report-btn flex-shrink-0 ml-2" title="Report this clip" ${hasReported ? 'disabled' : ''}>
<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 6a3 3 0 013-3h10a1 1 0 01.8 1.6L14.25 8l2.55 3.4A1 1 0 0116 13H6a1 1 0 00-1 1v3a1 1 0 11-2 0V6z" clip-rule="evenodd"></path></svg>
</button>
</div>
</div>
</div>
<div class="clip-comments-section">
<div class="comment-list">
<p class="text-xs text-9a9aab">Loading comments...</p>
</div>
<form class="comment-form">
<input type="text" class="comment-input" placeholder="Add a comment..." required>
<button type="submit" class="comment-submit-btn">Post</button>
</form>
</div>
</div>
`;
clipsFeed.appendChild(clipCard);
listenForComments(clipData.id, clipCard.querySelector('.comment-list'));

if (clipData.clipType === 'direct' && clipData.videoDataUrl) {
const playerWrapper = clipCard.querySelector('.custom-video-player');
if (playerWrapper) {
initializeCustomPlayer(playerWrapper);
}
}
}
}, (error) => {
console.error("Error listening for clips:", error);
showMessage("Could not load clips.", true);
loadingClips.classList.add('hidden');
});
}

function listenForComments(clipId, commentListElement) {
if (activeCommentListeners.has(clipId)) activeCommentListeners.get(clipId)();

const q = query(collection(db, `artifacts/${appId}/public/data/clips/${clipId}/comments`), orderBy("createdAt"));
const unsubscribe = onSnapshot(q, async (snapshot) => {
commentListElement.innerHTML = '';
if (snapshot.empty) {
commentListElement.innerHTML = '<p class="text-xs text-9a9aab">No comments yet.</p>';
return;
}
snapshot.forEach(async (doc) => {
const commentData = doc.data();
const commenterData = await getUserData(commentData.userId);
const commentDiv = document.createElement('div');
commentDiv.className = 'comment';

commentDiv.innerHTML = `
<div class="comment-avatar-container">${createAvatarHTML(commenterData)}</div>
<div class="comment-content">
<p><span class="comment-username">${commentData.username}</span><span class="comment-text">${commentData.text}</span></p>
</div>`;
commentListElement.appendChild(commentDiv);
});
});
activeCommentListeners.set(clipId, unsubscribe);
}

async function postClip(e) {
e.preventDefault();
const title = newClipTitleInput.value.trim();
if (!title) return showMessage("Title is required.", true);

postClipSubmitBtn.disabled = true;
const uploadType = document.querySelector('input[name="upload-type"]:checked').value;

try {
let clipPayload;
if (uploadType === 'url') {
const url = newClipUrlInput.value.trim();
if (!url || !getYoutubeEmbedUrl(url)) throw new Error("Please provide a valid YouTube URL.");
clipPayload = { clipType: 'youtube', videoUrl: url };
} else {
const file = newClipFileInput.files[0];
if (!file) throw new Error("Please select a video file to upload.");

const largeFileThreshold = 5 * 1024 * 1024; // 5MB
if (file.size > largeFileThreshold) {
const proceed = confirm("Warning: This video is over 5MB and may cause slow loading or lag for other users. Do you want to continue with the upload?");
if (!proceed) {
throw new Error("Upload cancelled by user.");
}
}

postClipSubmitBtn.textContent = "Converting...";
const videoDataUrl = await new Promise((resolve, reject) => {
const reader = new FileReader();
reader.onload = () => resolve(reader.result);
reader.onerror = (err) => reject(err);
reader.readAsDataURL(file);
});
clipPayload = { clipType: 'direct', videoDataUrl };
}

const finalPayload = {
...clipPayload,
title: title,
uploaderId: userId,
uploaderUsername: username,
createdAt: serverTimestamp()
};

await addDoc(collection(db, `artifacts/${appId}/public/data/clips`), finalPayload);
showMessage("Clip posted successfully!");
uploadClipForm.reset();
uploadClipModal.classList.add('hidden');
updateQuestProgress('postClip', 1); // Quest progress update
} catch (error) {
showMessage(error.message, true);
} finally {
postClipSubmitBtn.disabled = false;
postClipSubmitBtn.textContent = "Post Clip";
}
}

async function postComment(e) {
e.preventDefault();
if (!e.target.classList.contains('comment-form')) return;

const input = e.target.querySelector('.comment-input');
const text = input.value.trim();
if (!text) return;

const clipCard = e.target.closest('.clip-card');
const clipId = clipCard.dataset.clipId;
if (!clipId) return;

try {
const commentsCollectionRef = collection(db, `artifacts/${appId}/public/data/clips/${clipId}/comments`);
await addDoc(commentsCollectionRef, {
text: text,
userId: userId,
username: username,
createdAt: serverTimestamp()
});
input.value = '';
} catch (error) {
console.error("Error posting comment:", error);
showMessage("Failed to post comment.", true);
}
}

function handleClipCardClick(e) {
const reportButton = e.target.closest('.clip-report-btn');
if (!reportButton || reportButton.disabled) return;

const clipCard = e.target.closest('.clip-card');
if (!clipCard) return;

reportClipModal.dataset.clipId = clipCard.dataset.clipId;
reportClipModal.dataset.clipTitle = clipCard.querySelector('.clip-title').textContent;
// Only set URL if it's a youtube link
reportClipModal.dataset.clipUrl = clipCard.dataset.originalUrl || `(Direct Upload - ID: ${clipCard.dataset.clipId})`;

reportClipForm.reset();
reportClipModal.classList.remove('hidden');
}

async function handleReportSubmit(e) {
e.preventDefault();

const clipId = reportClipModal.dataset.clipId;
const clipTitle = reportClipModal.dataset.clipTitle;
const clipUrl = reportClipModal.dataset.clipUrl;

const category = reportCategory.value;
const details = reportDetails.value.trim();

if (!category) {
return showMessage("Please select a report category.", true);
}

const submitButton = reportClipForm.querySelector('button[type="submit"]');
submitButton.disabled = true;
submitButton.textContent = "Submitting...";

const webhookUrl = "https://discord.com/api/webhooks/1392330060861800508/tdLg0QIcjSjcJlO_4PA4Hp_viHL98UnsRhbN8zQ7wQEvnC8vmrJgNgfYnB9L0Uetgxc1";

const payload = {
username: "Relicord Clip Reports",
avatar_url: "https://static.vecteezy.com/system/resources/previews/006/892/625/non_2x/discord-logo-icon-editorial-free-vector.jpg",
embeds: [{
title: "New Clip Report",
color: 15158332,
fields: [
{ name: "Clip Title", value: clipTitle, inline: false },
{ name: "Clip URL/Identifier", value: clipUrl.startsWith('http') ? `[Watch here](${clipUrl})` : clipUrl, inline: false },
{ name: "Reported By", value: `${username} (${userId})`, inline: true },
{ name: "Category", value: category, inline: true },
{ name: "Clip ID", value: `\`${clipId}\``, inline: false },
],
timestamp: new Date().toISOString()
}]
};

if (details) {
payload.embeds[0].fields.push({ name: "Additional Details", value: details, inline: false });
}

try {
const response = await fetch(webhookUrl, {
method: 'POST',
headers: { 'Content-Type': 'application/json' },
body: JSON.stringify(payload)
});

if (!response.ok) throw new Error(`Webhook failed with status ${response.status}`);

const userDocRef = doc(db, `artifacts/${appId}/public/data/users`, userId);
await setDoc(userDocRef, { reportedClips: arrayUnion(clipId) }, { merge: true });

if (_userCache[userId]) {
if (!_userCache[userId].reportedClips) _userCache[userId].reportedClips = [];
_userCache[userId].reportedClips.push(clipId);
}

const reportedClipCard = clipsFeed.querySelector(`.clip-card[data-clip-id="${clipId}"]`);
if (reportedClipCard) {
reportedClipCard.querySelector('.clip-report-btn').disabled = true;
}

showMessage("Report submitted. Thank you for helping keep the community safe!");
reportClipModal.classList.add('hidden');

} catch (error) {
console.error("Error submitting report:", error);
showMessage("Could not submit your report. Please try again.", true);
} finally {
submitButton.disabled = false;
submitButton.textContent = "Submit Report";
}
}

// --- QUESTS SYSTEM LOGIC ---
function initializeQuests() {
loadQuestsFromStorage();
generateUserQuests();
}

function loadQuestsFromStorage() {
const storedData = localStorage.getItem(QUEST_STORAGE_KEY);
if (storedData) {
userQuestsData = JSON.parse(storedData);
}
}

function saveQuestsToStorage() {
localStorage.setItem(QUEST_STORAGE_KEY, JSON.stringify(userQuestsData));
}

function generateUserQuests() {
const now = Date.now();
const cooldown = 24 * 60 * 60 * 1000;

if (userQuestsData.activeQuests && userQuestsData.activeQuests.length > 0) {
return; // User already has quests
}

if (userQuestsData.questsCompletedTimestamp && (now - userQuestsData.questsCompletedTimestamp < cooldown)) {
return; // On cooldown
}

const shuffledQuests = [...QUESTS_DEFINITIONS].sort(() => 0.5 - Math.random());
const newQuests = shuffledQuests.slice(0, 3).map(questDef => ({
id: questDef.id,
progress: 0,
claimed: false
}));

userQuestsData = { activeQuests: newQuests, questsCompletedTimestamp: null };
saveQuestsToStorage();
}

function updateQuestProgress(questType, amount = 1) {
if (!userQuestsData.activeQuests || userQuestsData.activeQuests.length === 0) return;

let questUpdated = false;
userQuestsData.activeQuests.forEach(quest => {
const questDef = QUESTS_DEFINITIONS.find(q => q.id === quest.id);
if (questDef && questDef.type === questType && quest.progress < questDef.target) {
quest.progress += amount;
if (quest.progress > questDef.target) quest.progress = questDef.target;
questUpdated = true;
}
});

if (questUpdated) {
saveQuestsToStorage();
if (!questsContainer.classList.contains('hidden')) {
renderQuests();
}
}
}

function renderQuests() {
questsFeed.innerHTML = '';
loadingQuests.classList.add('hidden');

const now = Date.now();
const cooldown = 24 * 60 * 60 * 1000;

if (userQuestsData.questsCompletedTimestamp && (now - userQuestsData.questsCompletedTimestamp < cooldown)) {
const remaining = userQuestsData.questsCompletedTimestamp + cooldown - now;
const hours = Math.floor(remaining / (1000 * 60 * 60));
const minutes = Math.floor((remaining % (1000 * 60 * 60)) / (1000 * 60));
questsTimerDisplay.textContent = `New quests in ${hours}h ${minutes}m`;
questsFeed.innerHTML = `<div class="text-center text-e0e0e0 p-4 bg-[#24243e] rounded-lg">You've completed all quests! Come back later for more.</div>`;
return;
} else {
questsTimerDisplay.textContent = `Complete quests to get verified!`;
}

if (!userQuestsData.activeQuests || userQuestsData.activeQuests.length === 0) {
questsFeed.innerHTML = `<div class="text-center text-9a9aab">No active quests. New quests will be available soon!</div>`;
return;
}

userQuestsData.activeQuests.forEach(quest => {
const questDef = QUESTS_DEFINITIONS.find(q => q.id === quest.id);
if (!questDef) return;

const isComplete = quest.progress >= questDef.target;
const progressPercent = isComplete ? 100 : (quest.progress / questDef.target) * 100;

const card = document.createElement('div');
card.className = 'quest-card';
card.innerHTML = `
<h3 class="quest-title">${questDef.title}</h3>
<p class="quest-description">${questDef.description}</p>
<div class="quest-progress-container">
<div class="quest-progress-bar" style="width: ${progressPercent}%"></div>
<div class="quest-progress-text">${quest.progress} / ${questDef.target}</div>
</div>
<button class="quest-action-btn claim" data-quest-id="${quest.id}" ${!isComplete || quest.claimed ? 'disabled' : ''}>
${quest.claimed ? 'Claimed' : (isComplete ? 'Claim Reward' : 'In Progress')}
</button>
`;
questsFeed.appendChild(card);
});

questsFeed.querySelectorAll('.quest-action-btn.claim').forEach(btn => {
btn.addEventListener('click', () => claimQuestReward(btn.dataset.questId));
});
}

function claimQuestReward(questId) {
const quest = userQuestsData.activeQuests.find(q => q.id === questId);
if (quest && !quest.claimed) {
quest.claimed = true;
saveQuestsToStorage();
renderQuests();
checkAllQuestsCompleted();
}
}

function checkAllQuestsCompleted() {
const allClaimed = userQuestsData.activeQuests.every(q => q.claimed);
if (allClaimed) {
awardPerksPlus();
}
}

async function awardPerksPlus() {
try {
const userDocRef = doc(db, `artifacts/${appId}/public/data/users`, userId);
// MODIFIED: Ensure both perks flags are set to true.
await setDoc(userDocRef, { hasPerks: true, hasPerksPlus: true }, { merge: true });

if (_userCache[userId]) {
_userCache[userId].hasPerks = true;
_userCache[userId].hasPerksPlus = true;
}

userQuestsData.questsCompletedTimestamp = Date.now();
userQuestsData.activeQuests = []; // Clear active quests
saveQuestsToStorage();

showMessage("Congratulations! You've earned the Verified reward!", false);
renderQuests(); // Re-render to show the cooldown timer
} catch (error) {
console.error("Error awarding Perks+:", error);
showMessage("Failed to award your reward. Please try again.", true);
}
}

createRoleBtn.addEventListener('click', async () => {
const name = newRoleNameInput.value.trim();
const color = newRoleColorInput.value;
if (!name) {
return showMessage("Role name cannot be empty.", true);
}

createRoleBtn.disabled = true;
createRoleBtn.textContent = '...';

try {
const channelRef = doc(db, `artifacts/${appId}/public/data/channels`, currentChatId);
const channelSnap = await getDoc(channelRef);
if (!channelSnap.exists()) throw new Error("Channel not found.");

const channelData = channelSnap.data();
const existingRoles = channelData.roles || {};

if (Object.values(existingRoles).some(r => r.name.toLowerCase() === name.toLowerCase()) || Object.values(ROLES).some(r => r.name.toLowerCase() === name.toLowerCase())) {
throw new Error("A role with that name already exists.");
}

const newRoleId = `custom_${Date.now()}`;
const highestOrder = Object.values(existingRoles).reduce((max, role) => Math.max(max, role.order), 3);
const newOrder = highestOrder + 1;
const newRoleData = { name, color, order: newOrder };

await updateDoc(channelRef, { [`roles.${newRoleId}`]: newRoleData });
showMessage(`Role "${name}" created!`);
newRoleNameInput.value = '';
await openServerSettings();
} catch (error) {
showMessage(`Error: ${error.message}`, true);
} finally {
createRoleBtn.disabled = false;
createRoleBtn.textContent = 'Create';
}
});

uploadTypeRadios.forEach(radio => {
radio.addEventListener('change', () => {
if (radio.value === 'file') {
fileUploadSection.classList.remove('hidden');
urlUploadSection.classList.add('hidden');
newClipUrlInput.required = false;
newClipFileInput.required = true;
} else {
fileUploadSection.classList.add('hidden');
urlUploadSection.classList.remove('hidden');
newClipUrlInput.required = true;
newClipFileInput.required = false;
}
});
});

// --- NEW MESSAGE ACTION FUNCTIONS ---

function startReply(messageData) {
if (editingMessageId) cancelEdit(editingMessageId);
replyingToMessage = messageData;
const snippet = (messageData.text || 'Image').substring(0, 50);
replyInputBar.innerHTML = `
<span>Replying to <strong>${messageData.username}</strong></span>
<button class="font-bold text-lg leading-none" onclick="window.cancelReply()">&times;</button>
`;
replyInputBar.classList.remove('hidden');
messageInput.focus();
}

function cancelReply() {
replyingToMessage = null;
replyInputBar.classList.add('hidden');
replyInputBar.innerHTML = '';
}

async function deleteMessage(messageId) {
if (!confirm('Are you sure you want to delete this message? This cannot be undone.')) return;

try {
const messageRef = doc(db, `artifacts/${appId}/public/data/channels/${currentChatId}/messages`, messageId);
await deleteDoc(messageRef);
// The onSnapshot listener will handle UI removal.
} catch (error) {
console.error('Error deleting message:', error);
showMessage('Could not delete message.', true);
}
}

function startEdit(messageId, contentElement, originalText) {
if (editingMessageId) cancelEdit(editingMessageId); // Cancel any other ongoing edit
if (replyingToMessage) cancelReply();

editingMessageId = messageId;

const originalP = contentElement.querySelector('p');
if (originalP) {
originalP.style.display = 'none';
originalP.dataset.originalText = 'true'; // Mark it for easy retrieval
}

// Create a temporary container for the edit inputs
const editContainer = document.createElement('div');
editContainer.className = 'edit-container-temp'; // To find and remove it easily
editContainer.innerHTML = `
<textarea class="edit-message-input">${originalText || ''}</textarea>
<div class="edit-actions-info">
escape to <a onclick="window.cancelEdit('${messageId}')">cancel</a>
• enter to <a onclick="window.saveEditFromLink('${messageId}')">save</a>
</div>
`;
contentElement.appendChild(editContainer);

const textarea = editContainer.querySelector('textarea');
textarea.focus();
textarea.style.height = 'auto'; // Reset height
textarea.style.height = (textarea.scrollHeight) + 'px'; // Set to content height

// Auto-resize textarea on input
textarea.addEventListener('input', () => {
textarea.style.height = 'auto';
textarea.style.height = (textarea.scrollHeight) + 'px';
});

textarea.addEventListener('keydown', (e) => {
if (e.key === 'Enter' && !e.shiftKey) {
e.preventDefault();
saveEdit(messageId, textarea.value);
} else if (e.key === 'Escape') {
cancelEdit(messageId);
}
});
}

async function saveEdit(messageId, newText) {
if (!newText.trim()) {
return deleteMessage(messageId); // Delete if text is empty
}

try {
const messageRef = doc(db, `artifacts/${appId}/public/data/channels/${currentChatId}/messages`, messageId);
await updateDoc(messageRef, {
text: newText,
isEdited: true,
editedAt: serverTimestamp()
});
editingMessageId = null;
// The onSnapshot listener will handle the UI update in-place.
} catch (error) {
console.error('Error saving edit:', error);
showMessage('Could not save edit.', true);
}
}

function cancelEdit(messageId) {
if (!messageId) return;
const messageEl = messagesArea.querySelector(`.message-wrapper[data-message-id="${messageId}"]`);
if (messageEl) {
const editContainer = messageEl.querySelector('.edit-container-temp');
if (editContainer) {
editContainer.remove();
}

const originalP = messageEl.querySelector('p[data-original-text="true"]');
if (originalP) {
originalP.style.display = '';
delete originalP.dataset.originalText;
}
}
if (editingMessageId === messageId) {
editingMessageId = null;
}
}

// --- EMOJI SHORTCODE & AUTOCOMPLETE FUNCTIONS ---

function replaceEmojiShortcodes() {
const input = messageInput.value;
const regex = /:([a-zA-Z0-9_+-]+):/g;
let newInputValue = input.replace(regex, (match, shortcode) => {
return emojiShortcodeMap[shortcode.toLowerCase()] || match;
});

if (input !== newInputValue) {
messageInput.value = newInputValue;
}
}

function handleEmojiAutocomplete(event) {
const value = messageInput.value;
const cursorPos = messageInput.selectionStart;

const textBeforeCursor = value.substring(0, cursorPos);
const match = textBeforeCursor.match(/:([a-zA-Z0-9_]*)$/);

if (match) {
const query = match[1].toLowerCase();
const suggestions = EMOJI_DATA.filter(emoji => emoji.shortcode.toLowerCase().startsWith(query)).slice(0, 10);

if (suggestions.length > 0) {
emojiAutocompleteContainer.innerHTML = '';
suggestions.forEach((suggestion, index) => {
const item = document.createElement('div');
item.className = 'emoji-suggestion-item';
item.dataset.index = index;
item.innerHTML = `
<span class="emoji-char">${suggestion.unicode}</span>
<span class="emoji-name">:${suggestion.shortcode.replace(new RegExp(query, 'i'), `<strong>${query}</strong>`)}:</span>
`;
item.addEventListener('mousedown', (e) => {
e.preventDefault();
selectEmojiSuggestion(suggestion, match[0].length);
});
emojiAutocompleteContainer.appendChild(item);
});
emojiAutocompleteContainer.classList.remove('hidden');
autocompleteActive = true;
selectedAutocompleteIndex = -1; // Reset selection
updateAutocompleteSelection();
} else {
emojiAutocompleteContainer.classList.add('hidden');
autocompleteActive = false;
}
} else {
emojiAutocompleteContainer.classList.add('hidden');
autocompleteActive = false;
}
}

// --- THIS IS THE CORRECTED AND COMPLETED FUNCTION ---
function selectEmojiSuggestion(suggestion, lengthOfShortcodeToReplace) {
const value = messageInput.value;
const cursorPos = messageInput.selectionStart;
const textBefore = value.substring(0, cursorPos - lengthOfShortcodeToReplace);
const textAfter = value.substring(cursorPos);

// Add a space after the emoji for better user experience
const newText = `${textBefore}${suggestion.unicode} ${textAfter}`;
messageInput.value = newText;

// Calculate the new cursor position to be after the emoji and the space
const newCursorPos = (textBefore + suggestion.unicode + ' ').length;

// Reset the state and UI
messageInput.focus();
messageInput.setSelectionRange(newCursorPos, newCursorPos);
emojiAutocompleteContainer.classList.add('hidden');
autocompleteActive = false;
}

function updateAutocompleteSelection() {
const items = emojiAutocompleteContainer.querySelectorAll('.emoji-suggestion-item');
items.forEach((item, index) => {
if (index === selectedAutocompleteIndex) {
item.classList.add('selected');
item.scrollIntoView({ block: 'nearest' });
} else {
item.classList.remove('selected');
}
});
}

// --- POSTS SYSTEM LOGIC (REFACTORED FOR FIRESTORE) ---

function listenForPosts() {
if (unsubscribePosts) unsubscribePosts(); // Stop any previous listener

const q = query(collection(db, `artifacts/${appId}/public/data/posts`), orderBy("timestamp", "desc"));

unsubscribePosts = onSnapshot(q, async (snapshot) => {
loadingPosts.classList.add('hidden');
postsFeed.innerHTML = '';

if (snapshot.empty) {
postsFeed.innerHTML = '<div class="text-center text-9a9aab">No posts yet. Be the first to share something!</div>';
return;
}

for (const postDoc of snapshot.docs) {
const postData = postDoc.data();
const postElement = await createPostElement(postDoc.id, postData);
postsFeed.appendChild(postElement);
}
}, (error) => {
console.error("Error listening for posts:", error);
showMessage("Could not load posts.", true);
});
}

async function createPostElement(postId, postData) {
const postCard = document.createElement('div');
postCard.className = 'post-card';
postCard.dataset.postId = postId;

const isLiked = postData.likes.users.includes(userId);
const isHearted = postData.hearts.users.includes(userId);

const authorData = await getUserData(postData.authorId);

postCard.innerHTML = `
<div class="post-avatar-container">
${createAvatarHTML(authorData)}
</div>
<div class="post-main-content">
<div class="post-header">
<span class="post-username">${postData.authorUsername}</span>
<span class="post-timestamp">${timeSince(postData.timestamp.toDate())}</span>
</div>
<div class="post-body">
${postData.content.replace(/</g, "&lt;").replace(/>/g, "&gt;")}
</div>
<div class="post-actions">
<button class="post-action-btn like ${isLiked ? 'active' : ''}" data-action="like">
<svg fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"></path></svg>
<span>${postData.likes.count}</span>
</button>
<button class="post-action-btn heart ${isHearted ? 'active' : ''}" data-action="heart">
<svg fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
<span>${postData.hearts.count}</span>
</button>
</div>
</div>
`;

postCard.querySelector('.post-actions').addEventListener('click', (e) => {
const button = e.target.closest('.post-action-btn');
if (button) {
handlePostAction(postId, button.dataset.action);
}
});

postCard.querySelector('.post-username').addEventListener('click', () => {
showUserProfile(postData.authorId);
});

return postCard;
}

async function handlePostSubmit(e) {
e.preventDefault();
const content = newPostContentInput.value.trim();
if (!content || !username) {
return showMessage("Post content cannot be empty.", true);
}

const postPayload = {
authorId: userId,
authorUsername: username,
content: content,
timestamp: serverTimestamp(),
likes: { count: 0, users: [] },
hearts: { count: 0, users: [] }
};

try {
const postsCollectionRef = collection(db, `artifacts/${appId}/public/data/posts`);
await addDoc(postsCollectionRef, postPayload);
createPostForm.reset();
createPostModal.classList.add('hidden');
// The real-time listener will automatically add the post to the UI.
} catch (error) {
console.error("Error creating post:", error);
showMessage("Could not create post.", true);
}
}

async function handlePostAction(postId, actionType) {
const postRef = doc(db, `artifacts/${appId}/public/data/posts`, postId);
const fieldToUpdate = actionType === 'like' ? 'likes' : 'hearts';

try {
await runTransaction(db, async (transaction) => {
const postDoc = await transaction.get(postRef);
if (!postDoc.exists()) {
throw "Post does not exist!";
}

const postData = postDoc.data();
const actionData = postData[fieldToUpdate];
const userHasActed = actionData.users.includes(userId);

if (userHasActed) {
// User is un-doing the action
transaction.update(postRef, {
[`${fieldToUpdate}.count`]: increment(-1),
[`${fieldToUpdate}.users`]: arrayRemove(userId)
});
} else {
// User is performing the action
transaction.update(postRef, {
[`${fieldToUpdate}.count`]: increment(1),
[`${fieldToUpdate}.users`]: arrayUnion(userId)
});
}
});
} catch (error) {
console.error("Error handling post action:", error);
showMessage("Could not update post interaction.", true);
}
}

// A simple utility to format time like "5m ago", "2h ago"
function timeSince(date) {
const seconds = Math.floor((new Date() - date) / 1000);
let interval = seconds / 31536000;
if (interval > 1) return Math.floor(interval) + "y ago";
interval = seconds / 2592000;
if (interval > 1) return Math.floor(interval) + "mo ago";
interval = seconds / 86400;
if (interval > 1) return Math.floor(interval) + "d ago";
interval = seconds / 3600;
if (interval > 1) return Math.floor(interval) + "h ago";
interval = seconds / 60;
if (interval > 1) return Math.floor(interval) + "m ago";
return Math.max(0, Math.floor(seconds)) + "s ago";
}


// --- EVENT LISTENERS ---

window.acceptFriendRequest = acceptFriendRequest;
window.declineFriendRequest = declineFriendRequest;
window.cancelReply = cancelReply;
window.cancelEdit = cancelEdit;
window.saveEditFromLink = (messageId) => {
const ta = document.querySelector(`.message-wrapper[data-message-id="${messageId}"] textarea`);
if(ta) saveEdit(messageId, ta.value);
};

addFriendBtn.addEventListener('click', sendFriendRequest);
addFriendInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') sendFriendRequest(); });
sendButton.addEventListener('click', () => sendMessage());

// Main input listener for multiple features
messageInput.addEventListener('input', (e) => {
replaceEmojiShortcodes();
handleEmojiAutocomplete(e);
});

messageInput.addEventListener('keydown', (e) => {
if (autocompleteActive) {
const items = emojiAutocompleteContainer.querySelectorAll('.emoji-suggestion-item');
if (e.key === 'ArrowDown') {
e.preventDefault();
selectedAutocompleteIndex = (selectedAutocompleteIndex + 1) % items.length;
updateAutocompleteSelection();
} else if (e.key === 'ArrowUp') {
e.preventDefault();
selectedAutocompleteIndex = (selectedAutocompleteIndex - 1 + items.length) % items.length;
updateAutocompleteSelection();
} else if (e.key === 'Enter' || e.key === 'Tab') {
e.preventDefault();
if (selectedAutocompleteIndex > -1) {
items[selectedAutocompleteIndex].dispatchEvent(new MouseEvent('mousedown'));
}
} else if (e.key === 'Escape') {
emojiAutocompleteContainer.classList.add('hidden');
autocompleteActive = false;
}
} else if (e.key === 'Enter' && !e.shiftKey) {
e.preventDefault();
sendMessage();
}
});

joinChannelButton.addEventListener('click', joinChannel);
emojiBtn.addEventListener('click', (e) => { e.stopPropagation(); emojiPicker.classList.toggle('hidden'); });
document.addEventListener('click', (e) => { if (!emojiPicker.contains(e.target) && !emojiBtn.contains(e.target) && !emojiAutocompleteContainer.contains(e.target)) { emojiPicker.classList.add('hidden'); emojiAutocompleteContainer.classList.add('hidden'); autocompleteActive = false; } });

settingsUsernameBtn.addEventListener('click', handleChangeUsername);

// Main View Navigation
clipsNavItem.addEventListener('click', showClipsView);
questsNavItem.addEventListener('click', showQuestsView);
postsNavItem.addEventListener('click', showPostsView);

const observer = new MutationObserver((mutations) => {
mutations.forEach((mutation) => {
mutation.addedNodes.forEach((node) => {
if (node.nodeType === 1 && (node.classList.contains('dm-item') || node.classList.contains('channel-item'))) {
if (node.id !== 'quests-nav-item' && node.id !== 'clips-nav-item' && node.id !== 'posts-nav-item') {
node.addEventListener('click', showChatView);
}
}
});
});
});
observer.observe(channelsList, { childList: true, subtree: true });
observer.observe(dmList, { childList: true, subtree: true });

// Clips Event Listeners
uploadClipBtn.addEventListener('click', () => uploadClipModal.classList.remove('hidden'));
closeUploadModalBtn.addEventListener('click', () => uploadClipModal.classList.add('hidden'));
uploadClipForm.addEventListener('submit', postClip);
clipsFeed.addEventListener('submit', postComment);
clipsFeed.addEventListener('click', handleClipCardClick);
rulesBtn.addEventListener('click', () => rulesModal.classList.remove('hidden'));
closeRulesModalBtn.addEventListener('click', () => rulesModal.classList.add('hidden'));
rulesModal.addEventListener('click', (e) => { if (e.target === rulesModal) rulesModal.classList.add('hidden'); });
reportClipForm.addEventListener('submit', handleReportSubmit);
closeReportModalBtn.addEventListener('click', () => reportClipModal.classList.add('hidden'));
reportClipModal.addEventListener('click', (e) => { if (e.target === reportClipModal) reportClipModal.classList.add('hidden'); });

// Posts Event Listeners
createPostBtn.addEventListener('click', () => {
if (!username) return showMessage("Please set a username before posting.", true);
postCharCount.textContent = `${newPostContentInput.value.length} / 280`;
createPostModal.classList.remove('hidden');
newPostContentInput.focus();
});
closePostModalBtn.addEventListener('click', () => createPostModal.classList.add('hidden'));
createPostForm.addEventListener('submit', handlePostSubmit);
newPostContentInput.addEventListener('input', () => {
const count = newPostContentInput.value.length;
postCharCount.textContent = `${count} / 280`;
});



document.addEventListener('DOMContentLoaded', () => { initializeFirebase(); initializeEmojiPicker(); });
</script>

<script src="https://static.app/js/static-forms.js" type="text/javascript"></script>
</body>
</html>
